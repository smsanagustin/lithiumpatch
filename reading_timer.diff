--- a/res/mipmap-anydpi-v26/ic_launcher.xml
+++ b/res/mipmap-anydpi-v26/ic_launcher.xml
@@ -3,4 +3,5 @@
   xmlns:android="http://schemas.android.com/apk/res/android">
     <background android:drawable="@color/ic_launcher_background" />
     <foreground android:drawable="@mipmap/ic_launcher_foreground" />
+    <monochrome android:drawable="@drawable/ic_launcher_monochrome" />
 </adaptive-icon>
\ No newline at end of file
--- /dev/null
+++ b/res/drawable/ic_launcher_monochrome.xml
@@ -1 +1,20 @@
+<?xml version="1.0" encoding="utf-8"?>
+<vector xmlns:android="http://schemas.android.com/apk/res/android"
+    android:width="90dp"
+    android:height="90dp"
+    android:viewportWidth="90"
+    android:viewportHeight="90">
+    <path
+        android:pathData="M 58.621 57.5 L 31.4 57.5 C 30.06 57.5 29 56.422 29 55.108 L 29 34.892 C 29 33.556 30.081 32.5 31.4 32.5 L 58.6 32.5 C 59.94 32.5 61 33.578 61 34.892 L 61 55.086 C 61.021 56.422 59.94 57.5 58.621 57.5 Z M 45.021 32.5 L 45.021 57.5"
+        android:strokeWidth="3"
+        android:strokeColor="#FFFFFFFF"
+        android:strokeLineJoin="round"
+        android:fillColor="#00000000"
+        android:fillAlpha="0"/>
+    <path
+        android:pathData="M 52.3 32.5 L 52.3 43.362 L 54.45 39.978 L 56.6 43.362 L 56.6 32.5 L 52.3 32.5 Z"
+        android:strokeWidth="1.5"
+        android:strokeLineJoin="round"
+        android:strokeColor="#FFFFFFFF"
+        android:fillColor="#FFFFFFFF"/>
+</vector>
--- a/res/values/public.xml
+++ b/res/values/public.xml
@@ -3554,4 +3554,5 @@
     <public type="xml" name="standalone_badge_gravity_bottom_start" id="0x7f130005" />
     <public type="xml" name="standalone_badge_gravity_top_start" id="0x7f130006" />
     <public type="xml" name="sync" id="0x7f130007" />
+    <public type="drawable" name="ic_launcher_monochrome" id="0x7f0800fc" />
 </resources>
\ No newline at end of file
--- a/smali/com/faultexception/reader/R$drawable.smali
+++ b/smali/com/faultexception/reader/R$drawable.smali
@@ -515,3 +515,6 @@
 
     return-void
 .end method
+
+
+.field public static final ic_launcher_monochrome:I = 0x7f0800fc
--- a/smali/com/google/api/client/testing/json/package-info.smali
+++ /dev/null
Binary file
--- a/smali/com/google/api/client/testing/json/MockJsonFactory.smali
+++ /dev/null
Binary file
--- a/smali/com/google/api/client/testing/json/MockJsonGenerator.smali
+++ /dev/null
Binary file
--- a/smali/com/google/api/client/testing/json/MockJsonParser.smali
+++ /dev/null
Binary file
--- a/smali/com/google/api/client/testing/json/webtoken/package-info.smali
+++ /dev/null
Binary file
--- a/smali/com/google/api/client/testing/json/webtoken/TestCertificates.smali
+++ /dev/null
Binary file
--- a/smali/com/google/api/client/testing/json/webtoken/TestCertificates$CertData.smali
+++ /dev/null
Binary file
--- a/res/values/colors.xml
+++ b/res/values/colors.xml
@@ -15,8 +15,8 @@
     <color name="annotation_none_stroke_color">#ff333333</color>
     <color name="annotation_remove_color">#ffd13030</color>
     <color name="annotation_selected_bg_color">#1f000000</color>
-    <color name="app_primary">#ff5f2deb</color>
-    <color name="app_primary_dark">#ff4a1cc9</color>
+    <color name="app_primary">#ff104068</color>
+    <color name="app_primary_dark">#ff002b5a</color>
     <color name="app_secondary">#fff03737</color>
     <color name="background_floating_material_dark">@color/material_grey_800</color>
     <color name="background_floating_material_light">@android:color/white</color>
@@ -102,7 +102,7 @@
     <color name="foreground_material_light">@android:color/black</color>
     <color name="highlighted_text_material_dark">#6680cbc4</color>
     <color name="highlighted_text_material_light">#66009688</color>
-    <color name="ic_launcher_background">#ff784ef1</color>
+    <color name="ic_launcher_background">#ff466a96</color>
     <color name="launch_toolbar_color">@color/app_primary</color>
     <color name="material_blue_grey_800">#ff37474f</color>
     <color name="material_blue_grey_900">#ff263238</color>
--- a/res/values-sw364dp/dimens.xml
+++ b/res/values-sw364dp/dimens.xml
@@ -1,7 +1,7 @@
 <?xml version="1.0" encoding="utf-8"?>
 <resources>
     <dimen name="bookshelf_cover_height">212.0dip</dimen>
-    <dimen name="bookshelf_cover_width">160.0dip</dimen>
+    <dimen name="bookshelf_cover_width">115.0dip</dimen>
     <dimen name="contents_drawer_width">300.0dip</dimen>
     <dimen name="drawer_width">280.0dip</dimen>
 </resources>
--- a/res/values-sw480dp/dimens.xml
+++ b/res/values-sw480dp/dimens.xml
@@ -1,6 +1,6 @@
 <?xml version="1.0" encoding="utf-8"?>
 <resources>
     <dimen name="bookshelf_cover_height">239.0dip</dimen>
-    <dimen name="bookshelf_cover_width">180.0dip</dimen>
+    <dimen name="bookshelf_cover_width">115.0dip</dimen>
     <dimen name="contents_drawer_width">340.0dip</dimen>
 </resources>
--- a/smali/com/faultexception/reader/BooksFragment.smali
+++ b/smali/com/faultexception/reader/BooksFragment.smali
@@ -3614,3 +3614,4 @@
 
     return-void
 .end method
+
--- a/res/layout/books_grid_item.xml
+++ b/res/layout/books_grid_item.xml
@@ -1,11 +1,11 @@
 <?xml version="1.0" encoding="utf-8"?>
-<androidx.cardview.widget.CardView android:layout_width="wrap_content" android:layout_height="wrap_content" android:layout_margin="5.0dip" android:foreground="?android:selectableItemBackground" app:cardCornerRadius="4.0dip"
+<androidx.cardview.widget.CardView android:layout_width="fill_parent" android:layout_height="wrap_content" android:layout_margin="5.0dip" android:foreground="?android:selectableItemBackground" app:cardCornerRadius="4.0dip"
   xmlns:android="http://schemas.android.com/apk/res/android" xmlns:app="http://schemas.android.com/apk/res-auto">
     <LinearLayout android:orientation="vertical" android:layout_width="fill_parent" android:layout_height="fill_parent">
-        <FrameLayout android:id="@id/cover_container" android:layout_width="@dimen/bookshelf_cover_width" android:layout_height="@dimen/bookshelf_cover_height">
+        <com.faultexception.reader.widget.CoverFrameLayout android:id="@id/cover_container" android:layout_width="fill_parent" android:layout_height="wrap_content">
             <ImageView android:id="@id/cover" android:layout_width="fill_parent" android:layout_height="fill_parent" android:scaleType="fitCenter" android:contentDescription="@null" />
             <ImageView android:id="@id/noCover" android:visibility="gone" android:layout_width="fill_parent" android:layout_height="fill_parent" android:src="@drawable/book_no_cover" android:scaleType="center" android:contentDescription="@null" app:tint="@color/book_item_no_cover_tint" />
-        </FrameLayout>
+        </com.faultexception.reader.widget.CoverFrameLayout>
         <LinearLayout android:orientation="vertical" android:id="@id/footer" android:padding="12.0dip" android:layout_width="fill_parent" android:layout_height="wrap_content">
             <TextView android:textSize="14.0sp" android:textColor="#ffffffff" android:ellipsize="end" android:id="@id/title" android:layout_width="fill_parent" android:layout_height="wrap_content" android:maxLines="1" android:fontFamily="sans-serif" />
             <TextView android:textSize="12.0sp" android:textColor="#ffffffff" android:ellipsize="end" android:id="@id/creator" android:layout_width="fill_parent" android:layout_height="wrap_content" android:maxLines="1" android:fontFamily="sans-serif" />
--- /dev/null
+++ b/smali/com/faultexception/reader/widget/CoverFrameLayout.smali
@@ -1 +1,40 @@
+.class public Lcom/faultexception/reader/widget/CoverFrameLayout;
+.super Landroid/widget/FrameLayout;
+
+.method public constructor <init>(Landroid/content/Context;)V
+    .locals 0
+    invoke-direct {p0, p1}, Landroid/widget/FrameLayout;-><init>(Landroid/content/Context;)V
+    return-void
+.end method
+
+.method public constructor <init>(Landroid/content/Context;Landroid/util/AttributeSet;)V
+    .locals 0
+    invoke-direct {p0, p1, p2}, Landroid/widget/FrameLayout;-><init>(Landroid/content/Context;Landroid/util/AttributeSet;)V
+    return-void
+.end method
+
+.method public constructor <init>(Landroid/content/Context;Landroid/util/AttributeSet;I)V
+    .locals 0
+    invoke-direct {p0, p1, p2, p3}, Landroid/widget/FrameLayout;-><init>(Landroid/content/Context;Landroid/util/AttributeSet;I)V
+    return-void
+.end method
+
+.method protected onMeasure(II)V
+    .locals 3
+
+    # get width
+    invoke-static {p1}, Landroid/view/View$MeasureSpec;->getSize(I)I
+    move-result v0
+
+    # 1.5 aspect ratio
+    div-int/lit8 v1, v0, 0x2
+    mul-int/lit8 v1, v1, 0x3
+
+    # set height
+    const/high16 v2, 0x40000000 # MeasureSpec.EXACTLY
+    invoke-static {v1, v2}, Landroid/view/View$MeasureSpec;->makeMeasureSpec(II)I
+    move-result p2
+
+    invoke-super {p0, p1, p2}, Landroid/widget/FrameLayout;->onMeasure(II)V
+    return-void
+.end method
--- a/smali/com/faultexception/reader/widget/AutoFitRecyclerView.smali
+++ b/smali/com/faultexception/reader/widget/AutoFitRecyclerView.smali
@@ -108,7 +108,7 @@
 
     sub-int/2addr p1, p2
 
-    if-lez p1, :cond_2
+    goto :cond_2
 
     .line 52
     div-int/lit8 p1, p1, 0x2
@@ -154,6 +154,7 @@
 
     :goto_0
     return-void
+
 .end method
 
 .method public setSpanWidth(I)V
--- a/res/xml/preferences.xml
+++ b/res/xml/preferences.xml
@@ -17,6 +17,7 @@
         <SwitchPreferenceCompat android:title="@string/pref_open_last_book_title" android:key="open_last_book" android:defaultValue="false" />
     </PreferenceCategory>
     <PreferenceCategory android:title="@string/pref_category_advanced">
+        <SwitchPreferenceCompat android:title="Hide footer (grid view)" android:key="only_covers" android:defaultValue="false" />
         <com.faultexception.reader.library.LibraryFolderPreference android:title="@string/pref_library_folder_title" android:key="library_folder" />
         <SwitchPreferenceCompat android:title="@string/pref_folders_in_drawer_title" android:key="folders_in_drawer" android:defaultValue="false" />
         <SwitchPreferenceCompat android:title="@string/pref_book_wide_pages_title" android:key="book_wide_pages" android:defaultValue="true" />
--- a/smali/com/faultexception/reader/BooksAdapter.smali
+++ b/smali/com/faultexception/reader/BooksAdapter.smali
@@ -482,6 +482,27 @@
     return-void
 .end method
 
+.method private maybeHideFooter(Landroid/view/View;)V
+    .locals 3
+
+    iget-object v0, p0, Lcom/faultexception/reader/BooksAdapter;->mActivity:Landroidx/appcompat/app/AppCompatActivity;
+    invoke-static {v0}, Landroid/preference/PreferenceManager;->getDefaultSharedPreferences(Landroid/content/Context;)Landroid/content/SharedPreferences;
+    move-result-object v0
+
+    const-string v1, "only_covers"
+    const/4 v2, 0x0
+    invoke-interface {v0, v1, v2}, Landroid/content/SharedPreferences;->getBoolean(Ljava/lang/String;Z)Z
+    move-result v1
+
+    const/16 v2, 0x0 # android.View.VISIBLE
+    if-eqz v1, :visible
+    const/16 v2, 0x8 # android.View.GONE
+    :visible
+    invoke-virtual {p1, v2}, Landroid/view/View;->setVisibility(I)V
+
+    return-void
+.end method
+
 .method public onBindViewHolder(Lcom/faultexception/reader/BooksAdapter$ViewHolder;I)V
     .locals 6
 
@@ -731,6 +752,7 @@
 
     .line 193
     iget-object v2, p1, Lcom/faultexception/reader/BooksAdapter$ViewHolder;->footerView:Landroid/view/View;
+    invoke-direct {p0, v2}, Lcom/faultexception/reader/BooksAdapter;->maybeHideFooter(Landroid/view/View;)V
 
     invoke-virtual {v2, v0}, Landroid/view/View;->setBackgroundColor(I)V
 
@@ -744,6 +766,7 @@
 
     .line 195
     iget-object v2, p1, Lcom/faultexception/reader/BooksAdapter$ViewHolder;->footerView:Landroid/view/View;
+    invoke-direct {p0, v2}, Lcom/faultexception/reader/BooksAdapter;->maybeHideFooter(Landroid/view/View;)V
 
     invoke-virtual {v2, v0}, Landroid/view/View;->setBackgroundColor(I)V
 
--- a/smali/com/faultexception/reader/content/HtmlContentWebView.smali
+++ b/smali/com/faultexception/reader/content/HtmlContentWebView.smali
@@ -135,6 +135,9 @@
 
     sput-object v0, Lcom/faultexception/reader/content/HtmlContentWebView;->GSON:Lcom/google/gson/Gson;
 
+    const/4 v0, 0x1
+    invoke-static {v0}, Landroid/webkit/WebView;->setWebContentsDebuggingEnabled(Z)V
+
     return-void
 .end method
 
--- /dev/null
+++ b/assets/dict/dict.js
@@ -1 +1,563 @@
+/**
+ * Copyright 2023 Patrick Gaskin
+ * Requires a relatively recent version of the Chromium WebView.
+ */
+"use strict";
+
+const getDictionaryCached = makeSingleFlightCache(async base => await Dictionary.load(async fn => {
+    const url = new URL(fn, base)
+    const resp = await fetch(url, {
+        cache: "no-store",
+    })
+    if (resp.status === 404) {
+        throw new Error(`${url} not found`)
+    } else if (resp.status !== 200) {
+        throw new Error(`${url} response status ${resp.status} (${resp.statusText})`)
+    }
+    return resp.arrayBuffer()
+}))
+
+export default async function dictionary(base) {
+    return getDictionaryCached(new URL(base + "/", import.meta.url).href)
+}
+
+export class Dictionary {
+    /** @type {DictionaryIndex}                             */ #index
+    /** @type {(shard: string) => Promise<DictionaryShard>} */ #shard
+
+    constructor(index, shard) {
+        this.#index = index
+        this.#shard = shard
+    }
+
+    static async load(read, shardCacheMax = 14) {
+        const index = new DictionaryIndex(await read("index"))
+        const shard = makeSingleFlightCache(async shard => new DictionaryShard(await read(shard)), shardCacheMax)
+        return new Dictionary(index, shard)
+    }
+
+    async query(term, normalized = false) {
+        if (!normalized) {
+            term = Dictionary.normalize(term)
+        }
+        if (!term.length) {
+            return new DictionaryResult(term);
+        }
+
+        // look up the word, plus some basic fallbacks
+        const origTerm = term
+        let entries = this.#index.lookup(term)
+        if (!entries.length && term.endsWith("'s")) {
+            term = term.substring(0, term.length - "'s".length);
+            entries = this.#index.lookup(term)
+        }
+        if (!entries.length && term.endsWith("s")) {
+            term = term.substring(0, term.length - "s".length);
+            entries = this.#index.lookup(term)
+        }
+        if (!entries.length && term.includes("-")) {
+            term = removeChar(term, "-")
+            entries = this.#index.lookup(term)
+        }
+        if (!entries.length && term.endsWith("ly")) {
+            term = term.substring(0, term.length - "ly".length);
+            entries = this.#index.lookup(term)
+        }
+        if (!entries.length && term.endsWith("ing")) {
+            term = term.substring(0, term.length - "ing".length);
+            entries = this.#index.lookup(term)
+        }
+        if (!entries.length) {
+            return new DictionaryResult(origTerm);
+        }
+
+        const res = await Promise.all(entries.map(x => this.#get(x)))
+        return new DictionaryResult(term, ...res)
+    }
+
+    async lookup(word) {
+        return await Promise.all(this.#index.lookup(word).map(x => this.#get(x)))
+    }
+
+    async #get(entry) {
+        const name = Math.floor(entry / this.#index.shardSize).toString(16).padStart(3, "0")
+        const shard = await this.#shard(name)
+        return shard.get(entry % this.#index.shardSize)
+    }
+
+    autocomplete(term, limit = -1, normalized = false) {
+        if (!normalized) {
+            term = Dictionary.normalize(term)
+        }
+        if (!term.length){
+            return []
+        }
+        return this.#index.lookupPrefix(term, limit)
+    }
+
+    static normalize(term) {
+        let n = ""
+        let lastS = true // trim leading whitespace
+        let lastD = false
+
+        // decompose accents and stuff
+        // convert similar characters with only stylistic differences
+        // convert all whitespace to the ascii equivalent (incl nbsp,em-space,en-space,etc->space)
+        // other unicode normalization stuff
+        // to lowercase (unicode-aware)
+        for (let r of term.normalize("NFKD").toLowerCase()) {
+            r = r.charCodeAt(0)
+
+            // replace smart punctuation
+            switch (r) {
+                case 0x00ab: r = `"`.charCodeAt(0); break
+                case 0x00bb: r = `"`.charCodeAt(0); break
+                case 0x2010: r = `-`.charCodeAt(0); break
+                case 0x2011: r = `-`.charCodeAt(0); break
+                case 0x2012: r = `-`.charCodeAt(0); break
+                case 0x2013: r = `-`.charCodeAt(0); break
+                case 0x2014: r = `-`.charCodeAt(0); break
+                case 0x2015: r = `-`.charCodeAt(0); break
+                case 0x2018: r = `'`.charCodeAt(0); break
+                case 0x2019: r = `'`.charCodeAt(0); break
+                case 0x201a: r = `'`.charCodeAt(0); break
+                case 0x201b: r = `'`.charCodeAt(0); break
+                case 0x201c: r = `"`.charCodeAt(0); break
+                case 0x201d: r = `"`.charCodeAt(0); break
+                case 0x201e: r = `"`.charCodeAt(0); break
+                case 0x201f: r = `"`.charCodeAt(0); break
+                case 0x2024: r = `.`.charCodeAt(0); break
+                case 0x2032: r = `'`.charCodeAt(0); break
+                case 0x2033: r = `"`.charCodeAt(0); break
+                case 0x2035: r = `'`.charCodeAt(0); break
+                case 0x2036: r = `"`.charCodeAt(0); break
+                case 0x2038: r = `^`.charCodeAt(0); break
+                case 0x2039: r = `'`.charCodeAt(0); break
+                case 0x203a: r = `'`.charCodeAt(0); break
+                case 0x204f: r = `;`.charCodeAt(0); break
+            }
+
+            // collapse whitespace
+            if (r === 32 || (r >= 9 && r <= 12)) {
+                if (lastS) {
+                    continue
+                }
+                lastS = true
+                r = 32
+            } else {
+                lastS = false
+            }
+
+            // collapse dashes
+            if (r === 45) {
+                if (lastD) {
+                    continue
+                }
+                lastD = true
+            } else {
+                lastD = false
+            }
+
+            // expand ligatures
+            // remove unknown characters/diacritics
+            switch (r) {
+                case 0xa74f: n += `oo`;  continue
+                case 0x00df: n += `ss`;  continue
+                case 0x00e6: n += `ae`;  continue
+                case 0x0153: n += `oe`;  continue
+                case 0xfb00: n += `ff`;  continue
+                case 0xfb01: n += `fi`;  continue
+                case 0xfb02: n += `fl`;  continue
+                case 0xfb03: n += `ffi`; continue
+                case 0xfb04: n += `ffl`; continue
+                case 0xfb05: n += `ft`;  continue
+                case 0xfb06: n += `st`;  continue
+            }
+            if (
+                (r >= 97 && r <= 122) ||                                               // a-z
+                (r >= 48 && r <= 57) ||                                                // 0-9
+                (r === 32 || r === 39 || r === 44 || r === 45 || r === 46 || r === 95) // space and ',-._
+            ) {
+                n += String.fromCharCode(r)
+            }
+        }
+        if (lastS && n.length > 0) {
+            // trim trailing whitespace
+            n = n.slice(0, -1)
+        }
+        return n
+    }
+}
+
+export class DictionaryResult extends Array {
+    constructor(term, ...entries) {
+        super(...entries)
+        this.term = term // term which matched
+        this.sort()
+    }
+
+    sort(compareFn = undefined) {
+        if (compareFn !== undefined) {
+            super.sort(compareFn)
+            return
+        }
+
+        // sort the entries by relevance (since they aren't inherently ordered in the dictionary)
+        this.sort((a, b) => {
+            // exact matches
+            if (a.name === this.term && b.name !== this.term) return -1
+            if (a.name !== this.term && b.name === this.term) return 1
+
+            const aVar = a.meaningGroups.flatMap(g => g.wordVariants).map(x => x.toLowerCase()).includes(this.term)
+            const bVar = b.meaningGroups.flatMap(g => g.wordVariants).map(x => x.toLowerCase()).includes(this.term)
+
+            // exact variant matches
+            if (aVar && !bVar) return -1
+            if (!aVar && bVar) return 1
+
+            const aHead = a.name.toLowerCase()
+            const bHead = b.name.toLowerCase()
+
+            // case-insensitive headword matches
+            if (aHead === this.term && bHead !== this.term) return -1
+            if (aHead !== this.term && bHead === this.term) return 1
+
+            // non-abbreviations
+            if (aHead === a.name && bHead !== b.name) return -1
+            if (aHead !== a.name && bHead === b.name) return 1
+
+            // more meaning groups
+            if (a.meaningGroups.length > b.meaningGroups.length) return -1
+            if (a.meaningGroups.length < b.meaningGroups.length) return 1
+
+            const aN = a.meaningGroups.reduce((acc, cur) => acc + cur.meanings.length, 0)
+            const bN = b.meaningGroups.reduce((acc, cur) => acc + cur.meanings.length, 0)
+
+            // more meanings
+            if (aN > bN) return -1
+            if (aN < bN) return 1
+
+            // common prefix with headword
+            if (aHead.startsWith(this.term) && !bHead.startsWith(this.term)) return -1
+            if (!aHead.startsWith(this.term) && bHead.startsWith(this.term)) return 1
+
+            return a.name.localeCompare(b.name)
+        })
+
+        // sort meaning groups by relevance
+        for (const entry of this) {
+            entry.meaningGroups.sort((a, b) => {
+                const aVar = a.wordVariants.map(x => x.toLowerCase()).includes(this.term)
+                const bVar = b.wordVariants.map(x => x.toLowerCase()).includes(this.term)
+
+                // exact variant matches
+                if (aVar && !bVar) return -1
+                if (!aVar && bVar) return 1
+
+                return 0
+            })
+        }
+    }
+
+    toString(showExamples = true, showEntryInfo = true) {
+        let s = ""
+        if (this.term.length) {
+            s += this.term
+            s += "\n"
+        }
+        for (const e of this) {
+            s += "\n"
+            s += e.toString(showExamples, showEntryInfo)
+        }
+        return s
+    }
+}
+
+export class DictionaryIndex {
+    /** @type {number}       */ #shardSize
+    /** @type {number[]}     */ #bucketCounts
+    /** @type {Uint8Array[]} */ #bucketWords
+    /** @type {DataView[]}   */ #bucketIndexes
+    /** @type {TextEncoder}  */ #enc
+    /** @type {TextDecoder}  */ #dec
+
+    constructor(buf) {
+        const b = wrapBuffer(buf)
+        this.#shardSize = b.u32()
+        this.#bucketCounts = b.arr(b.u32)
+        this.#bucketWords = b.arr(
+            bucket => {
+                const count = this.#bucketCounts[bucket]
+                const len = bucket + 1
+                return new Uint8Array(b.buf(count * len))
+            },
+            this.#bucketCounts.length,
+        )
+        this.#bucketIndexes = b.arr(
+            bucket => {
+                const count = this.#bucketCounts[bucket]
+                return new DataView(b.buf(count * 4))
+            },
+            this.#bucketCounts.length,
+        )
+        this.#enc = new TextEncoder()
+        this.#dec = new TextDecoder()
+    }
+
+    lookup(term) {
+        const arr = this.#enc.encode(term)
+        const len = arr.length
+        if (len >= this.#bucketCounts.length) {
+            return []
+        }
+
+        const bucket = len-1
+        const count = this.#bucketCounts[bucket]
+        const words = this.#bucketWords[bucket]
+        const indexes = this.#bucketIndexes[bucket]
+
+        const [lo, hi] = binarySearchRange(count, i => {
+            for (let c = 0; c < len; c++) {
+                const x = arr[c]
+                const y = words[i*len + c]
+                if (x < y) {
+                    return -1
+                }
+                if (x > y) {
+                    return 1
+                }
+            }
+            return 0
+        })
+        if (lo === -1) {
+            return []
+        }
+
+        const es = new Array(hi-lo+1)
+        for (let i = lo; i <= hi; i++) {
+            es[i-lo] = indexes.getUint32(i*4)
+        }
+        return es
+    }
+
+    lookupPrefix(term, limit = -1) {
+        const arr = this.#enc.encode(term)
+        const len = arr.length
+        if (len >= this.#bucketCounts.length) {
+            return []
+        }
+
+        const ws = []
+        for (let len1 = len; len1 <= this.#bucketCounts.length; len1++) {
+            const bucket = len1-1
+            const count = this.#bucketCounts[bucket]
+            const words = this.#bucketWords[bucket]
+
+            const [lo, hi] = binarySearchRange(count, i => {
+                for (let c = 0; c < len; c++) {
+                    const x = arr[c]
+                    const y = words[i*len1 + c]
+                    if (x < y) {
+                        return -1
+                    }
+                    if (x > y) {
+                        return 1
+                    }
+                }
+                return 0
+            })
+            if (lo === -1) {
+                continue
+            }
+
+            let last
+            for (let i = lo; i <= hi; i++) {
+                const w = this.#dec.decode(words.slice(i*len1, i*len1 + len1))
+                if (last !== w) {
+                    ws.push(w)
+                }
+                if (ws.length == limit) {
+                    return ws
+                }
+                last = w
+            }
+        }
+        return ws
+    }
+
+    get shardSize() {
+        return this.#shardSize
+    }
+}
+
+export class DictionaryShard {
+    /** @type {DataView} */ #data
+
+    constructor(buf) {
+        this.#data = new DataView(buf)
+    }
+
+    get(index) {
+        const offset = this.#data.getUint32(index * 4)
+        const buf = this.#data.buffer.slice(offset)
+        return new DictionaryEntry(buf)
+    }
+}
+
+export class DictionaryEntry {
+    constructor(buf) {
+        const b = wrapBuffer(buf)
+        this.name = b.str()
+        this.pronunciation = b.str()
+        this.meaningGroups = b.arr(i => ({
+            info: b.arr(b.str),
+            meanings: b.arr(i => ({
+                tags: b.arr(b.str),
+                text: b.str(),
+                examples: b.arr(b.str),
+            })),
+            wordVariants: b.arr(b.str),
+        }))
+        this.info = b.str()
+        this.source = b.str()
+    }
+
+    toString(showExamples = true, showEntryInfo = true) {
+        let s = ""
+        s += this.name
+        if (this.pronunciation.length) {
+            s += " \u00b7 "
+            s += this.pronunciation
+        }
+        s += "\n"
+        for (const g of this.meaningGroups) {
+            if (g.info.length) {
+                s += "  "
+                s += g.info.join(" \u2014 ")
+                s += "\n"
+            }
+            let n = 0
+            for (const m of g.meanings) {
+                s += "  "
+                s += (++n).toString().padStart(4, " ")
+                s += ". "
+                if (m.tags.length) {
+                    s += "["
+                    s += m.tags.join("] [")
+                    s += "] "
+                }
+                s += m.text
+                s += "\n"
+                if (showExamples) {
+                    for (const x of m.examples) {
+                        s += "        - "
+                        s += x
+                        s += "\n"
+                    }
+                }
+            }
+        }
+        if (showEntryInfo && this.info.length) {
+            s += "  "
+            s += this.info
+            s += "\n"
+        }
+        if (this.source.length) {
+            s += this.source
+            s += "\n"
+        }
+        return s
+    }
+}
+
+function wrapBuffer(b) {
+    let c = 0
+    const dv = new DataView(b)
+    const td = new TextDecoder("utf-8")
+    const u32 = () => {
+        const x = dv.getUint32(c)
+        c += 4
+        return x
+    }
+    const buf = n => {
+        const x = dv.buffer.slice(c, c + n)
+        c += n
+        return x
+    }
+    const str = () => {
+        return td.decode(buf(u32()))
+    }
+    const arr = (fn, n = undefined) => {
+        const x = new Array(n ?? u32())
+        for (let i = 0; i < x.length; i++) {
+            x[i] = fn(i)
+        }
+        return x
+    }
+    return { u32, buf, str, arr }
+}
+
+function makeSingleFlightCache(get, max = 0) {
+    const cache = new Map()
+    const pending = new Map()
+
+    return async key => {
+        let obj = cache.get(key)
+        if (!obj) {
+            let p = pending.get(key)
+            if (!p) {
+                p = get(key)
+                pending.set(key, p)
+            }
+            obj = await p
+        }
+        if (max > 0 && cache.size > max) {
+            cache.delete(cache.keys().next().value)
+        }
+        cache.delete(key)
+        cache.set(key, obj)
+        pending.delete(key)
+        return obj
+    }
+}
+
+function binarySearch(n, cmp) {
+    let lo = 0
+    let hi = n - 1
+    while (lo <= hi) {
+        const mi = Math.floor((lo + hi) / 2)
+        const cv = cmp(mi)
+        if (!cv) {
+            return mi
+        } else if (cv < 0) {
+            hi = mi - 1
+        } else {
+            lo = mi + 1
+        }
+    }
+    return -1
+}
+
+function binarySearchRange(n, cmp) {
+    let lo = binarySearch(n, cmp)
+    let hi = lo
+    if (lo !== -1) {
+        while (lo > 0 && !cmp(lo-1)) {
+            lo--
+        }
+        while (hi < n-1 && !cmp(hi+1)) {
+            hi++
+        }
+    }
+    return [lo, hi]
+}
+
+function removeChar(s, c) {
+    let t = ""
+    for (const x of s) {
+        if (x !== c) {
+            t += x;
+        }
+    }
+    return t;
+}
--- a/smali/com/faultexception/reader/content/HtmlContentWebView.smali
+++ b/smali/com/faultexception/reader/content/HtmlContentWebView.smali
@@ -704,6 +704,102 @@
     return-void
 .end method
 
+.method private getResponseForDictUrl(Landroid/net/Uri;)Landroid/webkit/WebResourceResponse;
+    .locals 5
+
+    const-string v1, "dict.androidplatform.net"
+    invoke-virtual {p1}, Landroid/net/Uri;->getHost()Ljava/lang/String;
+    move-result-object v0
+    invoke-virtual {v0, v1}, Ljava/lang/String;->equalsIgnoreCase(Ljava/lang/String;)Z
+    move-result v0
+    if-eqz v0, :not_dict
+
+    const-string v1, "/"
+    invoke-virtual {p1}, Landroid/net/Uri;->getPath()Ljava/lang/String;
+    move-result-object v4
+    invoke-virtual {v4, v1}, Ljava/lang/String;->startsWith(Ljava/lang/String;)Z
+    move-result v0
+    if-eqz v0, :path_cleaned
+    const v1, 0x1
+    invoke-virtual {v4, v1}, Ljava/lang/String;->substring(I)Ljava/lang/String;
+    move-result-object v4
+    :path_cleaned
+
+    const-string v1, "dict/"
+    invoke-virtual {v1, v4}, Ljava/lang/String;->concat(Ljava/lang/String;)Ljava/lang/String;
+    move-result-object v4
+
+    iget-object v0, p0, Lcom/faultexception/reader/content/HtmlContentWebView;->mContext:Landroid/content/Context;
+    invoke-virtual {v0}, Landroid/content/Context;->getAssets()Landroid/content/res/AssetManager;
+    move-result-object v0
+
+    :t1s
+    invoke-virtual {v0, v4}, Landroid/content/res/AssetManager;->open(Ljava/lang/String;)Ljava/io/InputStream;
+    move-result-object v0
+    :t1e
+
+    .catch Ljava/io/FileNotFoundException; {:t1s .. :t1e} :t1c1
+    .catch Ljava/io/IOException; {:t1s .. :t1e} :t1c2
+    goto :t1f
+
+    :t1c1
+    const p1, 0x0
+    new-array p1, p1, [B
+    new-instance v0, Ljava/io/ByteArrayInputStream;
+    invoke-direct {v0, p1}, Ljava/io/ByteArrayInputStream;-><init>([B)V
+    new-instance p1, Landroid/webkit/WebResourceResponse;
+    const-string v2, "text/plain"
+    const-string v1, "UTF-8"
+    invoke-direct {p1, v2, v1, v0}, Landroid/webkit/WebResourceResponse;-><init>(Ljava/lang/String;Ljava/lang/String;Ljava/io/InputStream;)V
+    const v0, 404
+    const-string v1, "Not Found"
+    invoke-virtual {p1, v0, v1}, Landroid/webkit/WebResourceResponse;->setStatusCodeAndReasonPhrase(ILjava/lang/String;)V
+    goto :cors
+
+    :t1c2
+    const p1, 0x0
+    new-array p1, p1, [B
+    new-instance v0, Ljava/io/ByteArrayInputStream;
+    invoke-direct {v0, p1}, Ljava/io/ByteArrayInputStream;-><init>([B)V
+    new-instance p1, Landroid/webkit/WebResourceResponse;
+    const-string v2, "text/plain"
+    const-string v1, "UTF-8"
+    invoke-direct {p1, v2, v1, v0}, Landroid/webkit/WebResourceResponse;-><init>(Ljava/lang/String;Ljava/lang/String;Ljava/io/InputStream;)V
+    const v0, 500
+    const-string v1, "Internal Server Error"
+    invoke-virtual {p1, v0, v1}, Landroid/webkit/WebResourceResponse;->setStatusCodeAndReasonPhrase(ILjava/lang/String;)V
+    goto :cors
+
+    :t1f
+    new-instance p1, Landroid/webkit/WebResourceResponse;
+    const-string v1, ".js"
+    invoke-virtual {v4, v1}, Ljava/lang/String;->endsWith(Ljava/lang/String;)Z
+    move-result v1
+    if-nez v1, :mt1
+    const-string v2, "application/octet-stream"
+    const v1, 0x0
+    goto :mt
+    :mt1
+    const-string v2, "application/javascript"
+    const-string v1, "UTF-8"
+    :mt
+    invoke-direct {p1, v2, v1, v0}, Landroid/webkit/WebResourceResponse;-><init>(Ljava/lang/String;Ljava/lang/String;Ljava/io/InputStream;)V
+    goto :cors
+
+    :cors
+    new-instance v0, Ljava/util/HashMap;
+    const-string v1, "Access-Control-Allow-Origin"
+    const-string v2, "*"
+    invoke-direct {v0}, Ljava/util/HashMap;-><init>()V
+    invoke-virtual {v0, v1, v2}, Ljava/util/HashMap;->put(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
+    invoke-virtual {p1, v0}, Landroid/webkit/WebResourceResponse;->setResponseHeaders(Ljava/util/Map;)V
+    return-object p1
+
+    :not_dict
+    const p1, 0x0
+    return-object p1
+.end method
+
 .method private getResponseForUrl(Ljava/lang/String;)Landroid/webkit/WebResourceResponse;
     .locals 3
 
@@ -712,6 +808,12 @@
 
     move-result-object v0
 
+    invoke-direct {p0, v0}, Lcom/faultexception/reader/content/HtmlContentWebView;->getResponseForDictUrl(Landroid/net/Uri;)Landroid/webkit/WebResourceResponse;
+    move-result-object v1
+    if-eqz v1, :not_dict
+    return-object v1
+    :not_dict
+
     .line 723
     invoke-virtual {v0}, Landroid/net/Uri;->getScheme()Ljava/lang/String;
 
@@ -815,6 +917,7 @@
     invoke-direct {p1, v2, v0, v1}, Landroid/webkit/WebResourceResponse;-><init>(Ljava/lang/String;Ljava/lang/String;Ljava/io/InputStream;)V
 
     return-object p1
+
 .end method
 
 .method private getThemeSetCode(Lcom/faultexception/reader/themes/Theme;)Ljava/lang/String;
--- /dev/null
+++ b/assets/js/dictionary.js
@@ -1 +1,1061 @@
+/**
+ * Copyright 2019-2023 Patrick Gaskin
+ * Requires a relatively recent version of the Chromium WebView.
+ */
+"use strict";
+
+var Dictionary = (function() {
+
+    /**
+     * Symbol used by html to mark processed strings.
+     */
+    const isHtml = Symbol("isHtml")
+
+    /**
+     * ES6 template function for safely building HTML, optionally with inline CSS.
+     */
+    function html(literals, ...subs) {
+        const raw = literals.raw.reduce((acc, lit, i) => {
+            let sub = subs[--i]
+            if (Array.isArray(sub)) {
+                sub = sub.map(x => x[isHtml] ? x : (x !== undefined && x !== null) ? escape(x.toString()) : "").join("")
+            } else if (sub === undefined || sub === null || sub === false) {
+                sub = ""
+            } else if (literals.raw[i]?.endsWith("$")) {
+                acc = acc.slice(0, -1)
+                sub = sub.toString()
+            } else if (sub[isHtml]) {
+                sub = sub.toString()
+            } else {
+                sub = escape(sub.toString())
+            }
+            return acc + sub + lit
+        })
+        return Object.defineProperties(new String(raw), {
+            [isHtml]: {
+                value: true,
+            },
+        })
+    }
+
+    /**
+     * Raw HTML.
+     */
+    function rawHTML(s) {
+        return Object.defineProperties(new String(s), {
+            [isHtml]: {
+                value: true,
+            },
+        })
+    }
+
+    /**
+     * Material Icons Rounded
+     */
+    const matIconSearch = rawHTML(`<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#e8eaed"><path d="M0 0h24v24H0z" fill="none"/><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg>`)
+    const matIconClose = rawHTML(`<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#e8eaed"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M18.3 5.71c-.39-.39-1.02-.39-1.41 0L12 10.59 7.11 5.7c-.39-.39-1.02-.39-1.41 0-.39.39-.39 1.02 0 1.41L10.59 12 5.7 16.89c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0L12 13.41l4.89 4.89c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L13.41 12l4.89-4.89c.38-.38.38-1.02 0-1.4z"/></svg>`)
+
+    /**
+     * Escapes a string for use in HTML.
+     */
+    function escape(str) {
+        str = str.replace(/&/g, "&amp;")
+        str = str.replace(/>/g, "&gt;")
+        str = str.replace(/</g, "&lt;")
+        str = str.replace(/"/g, "&quot;")
+        str = str.replace(/'/g, "&#39;")
+        return str
+    }
+
+    /**
+     * Listens for Lithium theme changes, returning true if successful. The first
+     * theme update is sent on DOMContentLoaded. Note that the default white
+     * theme is null.
+     */
+    function hookLithiumTheme(callback) {
+        if ("LithiumThemes" in globalThis) {
+            const orig = globalThis.LithiumThemes.set
+            globalThis.LithiumThemes.set = theme => {
+                window.setTimeout(() => callback(theme), 0)
+                return orig(theme)
+            }
+            return true
+        }
+        return false
+    }
+
+    /**
+     * Converts an integer color into a CSS hex value.
+     */
+    function hexColor(color) {
+        return `#${color.toString(16).padStart(6, "0")}`
+    }
+
+    /**
+     * Theme-aware popup.
+     */
+    class Popup {
+        #root
+        #cssBase
+        #cssExtra
+        #shadow
+        #wrapper
+        #popup
+        #inner
+        #content
+        #pos
+        #posRect
+        #expand
+        constructor(css = undefined) {
+            this.#root = document.createElement("x-popup")
+
+            this.#cssBase = new CSSStyleSheet()
+            this.#cssBase.replaceSync(`
+                #wrapper {
+                    display: block;
+                    position: fixed;
+                    left: 16px;
+                    right: 16px;
+                    height: auto;
+                    width: auto;
+                    overflow: visible;
+                    user-select: none;
+                    z-index: 9999999;
+                    transition: opacity .1s ease-in;
+                }
+                #popup {
+                    contain: strict;
+                    display: block;
+                    box-sizing: border-box;
+                    position: relative;
+                    max-height: 220px;
+                    min-height: 50px;
+                    height: 30vh;
+                    max-width: 480px;
+                    width: 100%;
+                    overflow: hidden;
+                    margin: 16px auto;
+                    border: 1px solid transparent;
+                    border-radius: 4px;
+                }
+                #inner {
+                    overscroll-behavior: contain;
+                    display: block;
+                    box-sizing: border-box;
+                    position: absolute;
+                    overflow-x: hidden;
+                    overflow-y: auto;
+                    inset: 0;
+                    line-height: 1.25;
+                    font-size: 14px;
+                    font-family: serif;
+                }
+                #inner::-webkit-scrollbar {
+                    display: none;
+                }
+                #wrapper.expand {
+                    display: flex;
+                    flex-direction: column;
+                }
+                #wrapper.expand #popup {
+                    flex: 1;
+                    max-height: none;
+                }
+            `)
+
+            this.#cssExtra = new CSSStyleSheet()
+            if (css !== undefined) {
+                this.#cssExtra.replace(css)
+            }
+
+            this.#shadow = this.#root.attachShadow({mode: "open"})
+            this.#shadow.adoptedStyleSheets = [this.#cssBase, this.#cssExtra]
+
+            this.#wrapper = this.#shadow.appendChild(document.createElement("div"))
+            this.#wrapper.id = "wrapper"
+
+            this.#popup = this.#wrapper.appendChild(document.createElement("div"))
+            this.#popup.id = "popup"
+
+            this.#inner = this.#popup.appendChild(document.createElement("div"))
+            this.#inner.id = "inner"
+
+            this.#content = this.#inner.appendChild(document.createElement("div"))
+
+            const applyTheme = (dark = false, bg = undefined, fg = undefined) => {
+                this.#popup.style.setProperty("border-color", dark ? "rgba(255, 255, 255, .25)" : "rgba(0, 0, 0, .25)")
+                this.#popup.style.setProperty("box-shadow", dark ? "none" : "0 0 8px 0 rgba(0, 0, 0, .25)")
+                this.#popup.style.setProperty("background-color", bg !== undefined ? bg : dark ? "#333" : "#fff")
+                this.#popup.style.setProperty("color", fg !== undefined ? fg : dark ? "#eee" : "#000")
+                this.#popup.style.setProperty("--popup-background", bg !== undefined ? bg : dark ? "#333" : "#fff")
+                this.#popup.style.setProperty("--popup-border-color", dark ? "rgba(255, 255, 255, .25)" : "rgba(0, 0, 0, .25)")
+            }
+            applyTheme()
+
+            if (!hookLithiumTheme(theme => {
+                if (theme) {
+                    applyTheme(theme.bgIsDark, hexColor(theme.backgroundColor), hexColor(theme.textColor))
+                } else {
+                    applyTheme()
+                }
+            })) {
+                const matcher = window.matchMedia('(prefers-color-scheme: dark)')
+                if (matcher) {
+                    applyTheme(matcher.matches)
+                    matcher.addEventListener("change", ev => {
+                        applyTheme(ev.matches)
+                    })
+                }
+            }
+
+            window.addEventListener("resize", () => this.visible && this.move(), true)
+            document.addEventListener("scroll", () => this.visible && this.move(), true)
+        }
+
+        /**
+         * Replaces the contents of the popup, returning a element for future
+         * updates (which will continue to take effect until replace is called
+         * again).
+         */
+        replace(initial = "") {
+            const el = document.createElement("div")
+            el.innerHTML = initial
+            this.#content.replaceWith(el)
+            this.#content = el
+            return el
+        }
+
+        /**
+         * Shows the popup if it isn't already visible. Returns true if the popup
+         * was previously hidden.
+         *
+         * If getClientRect is set, pos=true means to put the popup near the rect,
+         * and pos=false means to put it against the opposite screen edge.
+         * Otherwise, pos=true means to put the popup at the top edge, and pos=false
+         * means the bottom.
+         */
+        show(pos = false, getClientRect = undefined) {
+            this.#pos = pos
+            this.#posRect = getClientRect
+            this.move()
+
+            if (!this.visible) {
+                this.#wrapper.style.setProperty("opacity", "0", "important")
+                document.body.appendChild(this.#root);
+                window.setTimeout(() => this.#wrapper.style.setProperty("opacity", "1", "important"), 0)
+                return true
+            }
+            if (this.#root.parentElement.lastElementChild != this.#root) {
+                this.#root.parentElement.appendChild(this.#root)
+            }
+            return false
+        }
+
+        /**
+         * Expands the popup to fill the screen if it's visible. Reset upon the
+         * next call to hide.
+         */
+        expand() {
+            this.#expand = true
+            this.move()
+        }
+
+        /**
+         * Hides the popup if it is visible.
+         */
+        hide() {
+            if (this.visible) {
+                this.#root.remove()
+                this.#pos = false
+                this.#posRect = undefined
+                this.#expand = false
+            }
+        }
+
+        /**
+         * Updates the popup's position if it is visible.
+         */
+        move() {
+            let top, bot
+            if (this.#expand) {
+                top = 0
+                bot = 0
+            } else if (this.#posRect === undefined) {
+                if (this.#pos) {
+                    top = 0
+                } else {
+                    bot = 0
+                }
+            } else {
+                const rect = this.#posRect()
+                if (rect.y > document.documentElement.clientHeight / 2) {
+                    if (this.#pos) {
+                        bot = document.documentElement.clientHeight - rect.y
+                    } else {
+                        top = 0
+                    }
+                } else {
+                    if (this.#pos) {
+                        top = rect.y + rect.height
+                    } else {
+                        bot = 0
+                    }
+                }
+            }
+            if (this.#expand) {
+                this.#wrapper.classList.add("expand")
+            } else {
+                this.#wrapper.classList.remove("expand")
+            }
+            this.#wrapper.style.setProperty("top", top === undefined ? "auto" : `${top}px`, "important")
+            this.#wrapper.style.setProperty("bottom", bot === undefined ? "auto" : `${bot}px`, "important")
+        }
+
+        /**
+         * Whether the popup is currently visible.
+         */
+        get visible() {
+            return !!this.#root.parentElement
+        }
+
+        /**
+         * Gets the Shadow DOM root.
+         */
+        get shadowRoot() {
+            return this.#shadow
+        }
+
+        /**
+         * Whether the popup is currently expanded.
+         */
+        get expanded() {
+            return !!this.#expand
+        }
+    }
+
+    class SelectionController {
+        #selectionClearPending // timer
+
+        #deepSelectionRoot // element
+        #deepSelectionRootShadow // shadow root
+        #deepSelectionPointers = new Set() // of pointer IDs which are down inside the root
+        #deepSelectionWasLastSelection = false
+        #_handleDeepPointerAdd // bound event handler
+        #_handleDeepPointerDel // bound event handler
+        #_handleDeepClick // bound event handler
+
+        constructor() {
+            document.addEventListener("selectionchange", this.#handleSelectionChange.bind(this), false)
+        }
+
+        /** 
+         * Callback to check whether a range is valid for initial selections.
+         * Takes a Range, returns a boolean.
+         */
+        rangeValidate
+
+        /**
+         * Callback for when a valid range is selected. A selection is when the
+         * selected text changes (and is not in the deep selection root). Takes
+         * a Range (which is cloned).
+         */
+        rangeSelected
+
+        /**
+         * Callback for when a range is deep-selected. The range will have a
+         * length of zero. Takes a Range (which is cloned) and the selection
+         * anchorNode.
+         */
+        rangeSelectedDeep
+
+        /**
+         * Called when no range is selected anymore.
+         */
+        rangeCleared
+
+        /**
+         * Sets the root element used for deep selection. If the element is
+         * within a Shadow DOM, the shadow root must also be passed.
+         */
+        changeDeepSelectionRoot(el, shadowRoot = undefined) {
+            if (this.#deepSelectionRoot) {
+                this.#deepSelectionRoot.removeEventListener("pointerdown", this.#_handleDeepPointerAdd, false)
+                this.#deepSelectionRoot.removeEventListener("pointerup", this.#_handleDeepPointerDel, false)
+                this.#deepSelectionRoot.removeEventListener("pointercancel", this.#_handleDeepPointerDel, false)
+                this.#deepSelectionRoot.removeEventListener("pointerleave", this.#_handleDeepPointerDel, false)
+                this.#deepSelectionRoot.removeEventListener("pointerout", this.#_handleDeepPointerDel, false)
+                this.#deepSelectionRoot.removeEventListener("click", this.#_handleDeepClick, false)
+                this.#deepSelectionPointers.clear()
+                this.#deepSelectionRootShadow = undefined
+                this.#deepSelectionRoot = undefined
+            }
+            this.#deepSelectionRoot = el
+            this.#deepSelectionRootShadow = shadowRoot
+            if (this.#deepSelectionRoot) {
+                this.#_handleDeepPointerAdd = this.#handleDeepPointerAdd.bind(this)
+                this.#_handleDeepPointerDel = this.#handleDeepPointerDel.bind(this)
+                this.#_handleDeepClick = this.#handleDeepClick.bind(this)
+                this.#deepSelectionRoot.addEventListener("pointerdown", this.#_handleDeepPointerAdd, false)
+                this.#deepSelectionRoot.addEventListener("pointerup", this.#_handleDeepPointerDel, false)
+                this.#deepSelectionRoot.addEventListener("pointercancel", this.#_handleDeepPointerDel, false)
+                this.#deepSelectionRoot.addEventListener("pointerleave", this.#_handleDeepPointerDel, false)
+                this.#deepSelectionRoot.addEventListener("pointerout", this.#_handleDeepPointerDel, false)
+                this.#deepSelectionRoot.addEventListener("click", this.#_handleDeepClick, false)
+                // yes, we don't want handleDeepPointerAdd for pointerenter
+            }
+        }
+
+        /**
+         * Clears the current selection. Does not call rangeCleared.
+         */
+        clear() {
+            const sel = document.getSelection()
+            if (sel?.rangeCount) {
+                sel?.empty?.()
+                sel?.removeAllRanges?.()
+            }
+        }
+
+        #handleSelectionChange(event) {
+            // note: this gets called for zero-length selections (i.e., clicks)
+            // too, which is why it works for hiding it
+
+            // clear the previous clear timer
+            if (this.#selectionClearPending !== undefined) {
+                window.clearTimeout(this.#selectionClearPending)
+                this.#selectionClearPending = undefined
+            }
+
+            // get the selection
+            const sel = document.getSelection()
+
+            // ensure the selection didn't start within the deep selection root
+            if (sel && this.#deepSelectionRoot?.contains(sel.anchorNode)) {
+                return
+            }
+
+            let rng
+            if (sel?.rangeCount) {
+                // get the range
+                rng = sel.getRangeAt(0)
+            }
+            if (rng) {
+                // clone the range
+                rng = rng.cloneRange()
+            }
+            if (rng) {
+                // check if it's empty
+                if (!rng.toString().length) {
+                    rng = undefined
+                }
+            }
+            if (rng) {
+                // validate the range
+                if (this.rangeValidate && !this.rangeValidate(rng)) {
+                    rng = undefined
+                }
+            }
+            if (rng) {
+                // call the callback for a selection
+                this.rangeSelected?.(rng, false)
+            } else {
+                if (this.#deepSelectionRoot) {
+                    // add a short delay to give time for a deep selection to be
+                    // processed (i.e., don't mark the selection as cleared
+                    // while a deep selection might be in progress)
+                    this.#selectionClearPending = window.setTimeout(() => {
+                        if (!this.#deepSelectionPointers.size) {
+
+                            // save the deep selection flag
+                            const deepSelectionWasLastSelection = this.#deepSelectionWasLastSelection
+
+                            // reset the deep selection flag
+                            this.#deepSelectionWasLastSelection = false
+
+                            // call the callback for a cleared selection
+                            if (!deepSelectionWasLastSelection) {
+                                this.rangeCleared?.()
+                            }
+                        }
+                    }, 5)
+                } else {
+
+                    // save the deep selection flag
+                    const deepSelectionWasLastSelection = this.#deepSelectionWasLastSelection
+
+                    // reset the deep selection flag
+                    this.#deepSelectionWasLastSelection = false
+
+                    // call the callback for a cleared selection
+                    if (!deepSelectionWasLastSelection) {
+                        this.rangeCleared?.()
+                    }
+                }
+            }
+        }
+
+        #handleDeepPointerAdd(event) {
+            this.#deepSelectionPointers.add(event.pointerId)
+        }
+
+        #handleDeepPointerDel(event) {
+            this.#deepSelectionPointers.delete(event.pointerId)
+        }
+
+        #handleDeepClick(event) {
+            // clicking sets the selection for a non-user-select-none element
+            //
+            // note: this is usually a zero-length selection, but on chrome (as
+            // of 122), clicking on an existing selection will use that
+
+            // stop propagating the event
+            //
+            // note: this is especially important on Lithium to prevent the
+            // menus being shown when tapping the middle
+            event.stopPropagation()
+
+            // get the selection
+            const sel = this.#deepSelectionRootShadow?.getSelection
+                ? this.#deepSelectionRootShadow.getSelection() // non-standard, only supported on chrome
+                : window.getSelection();
+            
+            // ensure we have a selection
+            if (!sel?.rangeCount) {
+                return
+            }
+
+            // ensure the selection started within the deep selection root
+            if (!this.#deepSelectionRoot.contains(sel.anchorNode)) {
+                return
+            }
+
+            // get the range
+            let rng = sel.getRangeAt(0)
+
+            // normalize it to the start
+            rng.collapse(true)
+
+            // clone the range
+            rng = rng.cloneRange()
+
+            // set the deep selection flag to inhibit the next selection clear
+            // event (i.e., the one caused by de-selecting the first selection
+            // and doing the deep selection)
+            this.#deepSelectionWasLastSelection = true
+
+            // call the callback
+            this.rangeSelectedDeep?.(rng, sel.anchorNode)
+        }
+    }
+
+    const createAutocompleteSearch = (el, normalize, autocomplete, search) => {
+        const input = el.querySelector("input")
+        const ul = el.querySelector("ul")
+
+        let last
+        const update = query => {
+            if (normalize) {
+                query = normalize(query)
+            }
+            if (query === last) {
+                return
+            }
+            const ws = Array.from(new Set(autocomplete ? autocomplete(query) : [])).sort((a, b) => {
+                return a.length - b.length || b.localeCompare(a)
+            })
+            for (let i = 0; i < ws.length; i++) {
+                const li = i < ul.children.length
+                    ? ul.children[i] // reuse where possible
+                    : ul.appendChild(document.createElement("li"))
+                li.tabindex = -1
+                li.dataset.term = ws[i]
+                li.textContent = ws[i] // TODO: show source dicts? ws.get(sws[i])
+            }
+            for (let i = ul.children.length-1; i >= ws.length; i--) {
+                ul.children[i].remove()
+            }
+            if (ul.children.length) {
+                ul.children[0].scrollIntoView?.({behavior: "instant", block: "nearest", inline: "nearest"})
+            }
+        }
+
+        // handle the enter key
+        input.addEventListener("keypress", event => {
+            if (event.keyCode == 13) {
+                event.preventDefault()
+                event.stopPropagation()
+                if (search) {
+                    search(acInput.value)
+                }
+            }
+        }, true)
+
+        // handle an autocomplete entry
+        ul.addEventListener("click", event => {
+            event.preventDefault()
+            event.stopPropagation()
+            if (event.target?.dataset?.term && search) {
+                search(event.target.dataset.term)
+            }
+        }, true)
+
+        // handle input
+        // note: I would use the input event, but this is more reliable across devices
+        const interval = window.setInterval(() => {
+            if (!input.isConnected) {
+                window.clearInterval(interval)
+                return
+            }
+            update(input.value)
+        }, 250)
+    }
+
+    const settings = {
+        dict_disabled: 'LithiumApp' in globalThis ? globalThis.LithiumApp.getDictDisabled().split(" ") : [],
+        dict_show_examples: 'LithiumApp' in globalThis ? globalThis.LithiumApp.getDictShowExamples() : true,
+        dict_show_info: 'LithiumApp' in globalThis ? globalThis.LithiumApp.getDictShowInfo() : true,
+        dict_small_font: 'LithiumApp' in globalThis ? globalThis.LithiumApp.getDictSmallFont() : false,
+    }
+
+    const init = {
+        dict: new URL(document.currentScript.dataset.dict || "./dict.js", document.currentScript.src).href,
+        dicts: document.currentScript.dataset.dicts.split(" "),
+    }
+
+    const dictPopup = new Popup(`
+        nav.toolbar {
+            display: flex;
+            white-space: nowrap;
+            position: fixed;
+            top: 0;
+            right: 0;
+            z-index: 1000;
+        }
+        nav.toolbar > button {
+            appearance: none;
+            border: 0;
+            padding: 0;
+            margin: 0;
+            font: inherit;
+            color: inherit;
+            background: none;
+            border-radius: 0;
+            outline: 0;
+            line-height: 1;
+        }
+        nav.toolbar > button {
+            display: flex;
+            justify-content: center;
+            align-items: center;
+            flex: 0 0 auto;
+            padding: 8px;
+        }
+        nav.toolbar > button:hover {
+            background: rgba(0, 0, 0, 0.1);
+        }
+        nav.toolbar > button:active {
+            background: rgba(0, 0, 0, 0.15);
+        }
+        nav.toolbar > button > svg {
+            flex: 0 0 auto;
+            fill: currentColor;
+            height: 16px;
+            width: 16px;
+        }
+        nav.toolbar > button.close {
+            display: none;
+        }
+        aside.lookup {
+            display: none;
+        }
+        aside.lookup > input {
+            appearance: none;
+            border: 0;
+            padding: 0;
+            margin: 0;
+            font: inherit;
+            color: inherit;
+            background: none;
+            border-radius: 0;
+            outline: 0;
+            line-height: 1;
+        }
+        aside.lookup > input {
+            display: block;
+            width: 100%;
+            position: sticky;
+            top: 0;
+            left: 0;
+            right: 0;
+            padding: 8px;
+            font-weight: inherit;
+            background: var(--popup-background);
+            border-bottom: 1px solid var(--popup-border-color);
+        }
+        aside.lookup > ul {
+            list-style-type: none;
+            padding: 0;
+            margin: 0;
+            text-indent: 0;
+        }
+        aside.lookup > ul > li {
+            display: block;
+            padding: 0 8px;
+            line-height: 2.25;
+            white-space: nowrap;
+            overflow: hidden;
+            text-overflow: ellipsis;
+        }
+        aside.lookup > ul > li:hover {
+            background: rgba(0, 0, 0, 0.1);
+        }
+        aside.lookup > ul > li:active {
+            background: rgba(0, 0, 0, 0.15);
+        }
+        section {
+            padding: 8px;
+            border-top: 1px solid rgba(128,128,128,0.4);
+            font-size: ${settings.dict_small_font ? ".85em" : "1em"};
+        }
+        section:first-of-type {
+            border-top: none;
+        }
+        section > header {
+            display: flex;
+            fontSize: 1.14em;
+            margin-bottom: 4px;
+        }
+        section > header::after {
+            content: '\u00a0';
+        }
+        section > header > .headword {
+            font-weight: bold;
+        }
+        section > header > .pronunciation {
+            opacity: .75;
+        }
+        section > header > .pronunciation::before {
+            content: '\u00a0\u00b7\u00a0';
+        }
+        section > .meaning-group-info {
+            font-style: italic;
+            margin-bottom: 4px;
+        }
+        section > ol.meaning-group-definitions {
+            margin: 8px 0 16px;
+            padding: 0 0 0 2em;
+        }
+        section > ol.meaning-group-definitions > li {
+            margin: 0 0 4px;
+        }
+        section > ol.meaning-group-definitions > li > span.tag {
+            display: inline-block;
+            font-size: .85em;
+            vertical-align: baseline;
+            padding: .1em .25em;
+            background-color: rgba(128,128,128,0.2);
+        }
+        section > ol.meaning-group-definitions > li > span.definition,
+        section > ol.meaning-group-definitions > li > div.example {
+            /*
+                for deep selection - we want this for each individual element so
+                clicking between them doesn't select the first word of the
+                nearest one
+            */
+            user-select: text;
+        }
+        section > ol.meaning-group-definitions > li > div.example {
+            font-style: italic;
+            margin-top: 4px;
+        }
+        section > .entry-info {
+            opacity: 0.75;
+            margin-top: 8px;
+        }
+        section > .source {
+            font-style: italic;
+            font-size: .85em;
+            margin-top: 8px;
+        }
+    `)
+
+    const render = (t, x) => !Array.isArray(x) ? html`
+        <section>
+            <header>
+                <div class="headword">${t}</div>${"\u00a0"}
+            </header>
+            <div>
+                ${x}
+            </div>
+        </section>
+    ` : x.map((x, i) => html`
+        <section>
+            <header>
+                <div class="headword">${x.name}</div>
+                ${!!x.pronunciation && html`
+                    <div class="pronunciation">${x.pronunciation}</div>
+                `}
+            </header>
+            ${x.meaningGroups.map(x => html`
+                ${!!x.info.length && html`
+                    <div class="meaning-group-info">${x.info.join(" \u2014 ")}</div>
+                `}
+                ${!!x.meanings.length && html`
+                    <ol class="meaning-group-definitions">
+                        ${x.meanings.map(x => html`
+                            <li>
+                                ${x.tags.map(x => html`
+                                    <span class="tag">${x}</span>
+                                `)}
+                                ${!!x.text.length && html`
+                                    <span class="definition">${x.text}</span>
+                                `}
+                                ${settings.dict_show_examples && x.examples.map(x => html`
+                                    <div class="example">${x}</div>
+                                `)}
+                            </li>
+                        `)}
+                    </ol>
+                `}
+            `)}
+            ${settings.dict_show_info && !!x.info.length && html`
+                <div class="entry-info">${x.info}</div>
+            `}
+            ${!!x.source.length && html`
+                <div class="source">${x.source}</div>
+            `}
+        </section>
+    `).join("")
+
+    import(init.dict).then(({default: dictionary, Dictionary: Dictionary}) => {
+        let dictSettle // timer
+        let dictSem // promise
+        let dictClientRect // function -> rect
+
+        const controller = new SelectionController()
+
+        const lookup = (txt, deep, query) => {
+
+            // set the initial popup
+            const tt = Dictionary.normalize(txt)
+            const pw = dictPopup.replace(html`
+                <nav class="toolbar">
+                    <button class="lookup">${matIconSearch}</button>
+                    <button class="close">${matIconClose}</button>
+                </nav>
+                <aside class="lookup">
+                    <input type="text" autocomplete="off" placeholder="Search dictionary..."/>
+                    <ul></ul>
+                </aside>
+            `)
+
+            // allow expanding the popup by clicking on a header
+            pw.addEventListener("click", event => {
+                if (!event.target || (event.target.tagName.toLowerCase() != "HEADER" && Array.from(event.target.parentElement.querySelectorAll("header *")).indexOf(event.target) == -1))
+                    return
+                event.preventDefault()
+                event.stopPropagation()
+                dictPopup.expand()
+                controller.clear()
+                pw.querySelector("button.close").style.display = "block"
+            }, true)
+
+            // handle the lookup button
+            pw.querySelector("button.lookup").addEventListener("click", event => {
+                event.preventDefault()
+                event.stopPropagation()
+                pw.querySelector("aside.lookup").style.display = "block"
+                pw.querySelector("button.lookup").style.display = "none"
+                pw.querySelector("button.close").style.display = "block"
+                pw.querySelector("main").style.display = "none"
+                dictPopup.expand()
+                controller.clear()
+                if (query?.length) {
+                    pw.querySelector("aside.lookup > input").value = query
+                } else {
+                    pw.querySelector("aside.lookup > input").focus()
+                }
+            }, true)
+
+            // handle the close button
+            pw.querySelector("button.close").addEventListener("click", event => {
+                event.preventDefault()
+                event.stopPropagation()
+                dictPopup.hide()
+            }, true)
+
+            // don't let the autocomplete trigger the expand/lookup or gestures
+            pw.querySelector("aside.lookup").addEventListener("click", event => {
+                event.preventDefault()
+                event.stopPropagation()
+            }, false)
+
+            // initialize the autocomplete
+            const acDicts = []
+            createAutocompleteSearch(pw.querySelector("aside.lookup"),
+                query => Dictionary.normalize(query),
+                query => {
+                    const ws = new Map()
+                    if (query.length >= 2) {
+                        for (const x of acDicts) {
+                            for (const w of x.d.autocomplete(query, 15, true)) {
+                                let src = ws.get(w)
+                                if (src === undefined) {
+                                    src = new Set()
+                                    ws.set(w, src)
+                                }
+                                src.add(x.n)
+                            }
+                        }
+                    }
+                    return ws.keys() // TODO: include the dict source?
+                },
+                term => {
+                    lookup(term, true, pw.querySelector("aside.lookup > input").value.trim())
+                },
+            )
+
+            // render the contents
+            const el = document.createElement("main")
+            el.innerHTML = render(tt, "Loading.")
+            pw.appendChild(el)
+
+            // show the popup
+            if (dictPopup.show(false, dictClientRect) || deep) {
+
+                // if we're not modifying an existing selection (or it's a deep selection), discard the old semaphore
+                dictSem = Promise.resolve()
+            }
+            if (dictPopup.expanded) {
+                pw.querySelector("button.close").style.display = "block"
+            }
+
+            // wait for the selection to settle
+            const ownSettle = dictSettle = window.setTimeout(() => {
+
+                // wait for the previous lookup to finish, then continue ours
+                dictSem = dictSem.finally(async () => {
+
+                    // check if we've been replaced or canceled
+                    if (ownSettle === dictSettle) {
+                        dictSettle = undefined
+                    } else {
+                        return
+                    }
+
+                    // do stuff
+                    try {
+                        // do the lookup
+                        const es = await Promise.all(init.dicts.map(async n => {
+                            if (!settings.dict_disabled.includes(n)) {
+                                try {
+                                    var d = await dictionary(n)
+                                } catch (ex) {
+                                    throw new Error(`load ${n}: ${ex}`)
+                                }
+                                acDicts.push({n, d})
+                                try {
+                                    var r = await d.query(tt, true)
+                                } catch (ex) {
+                                    throw new Error(`query ${n}: ${ex}`)
+                                }
+                                return r
+                            }
+                        }))
+
+                        // render the entries
+                        const ee = es.flat()
+                        if (ee.length) {
+                            el.innerHTML = render(tt, ee)
+                        } else {
+                            el.innerHTML = render(tt, "No matches found.")
+                        }
+                    } catch (ex) {
+                        el.innerHTML = render(tt, `${ex}.`)
+                    }
+
+                    // allow text selection within the element for deep selection
+                    //
+                    // note: we want this for each individual element so
+                    // clicking between them doesn't select the first word
+                    // of the nearest one
+                    controller.changeDeepSelectionRoot(el, dictPopup.shadowRoot)
+                })
+            }, deep ? 0 : 50)
+        }
+
+        controller.rangeValidate = rng => {
+            const txt = rng.toString()
+            if (txt.length < 1) {
+                return false
+            }
+            if (txt.length > 100) {
+                return false
+            }
+            if ((txt.match(/\s+/g) || []).length > 5) {
+                return false
+            }
+            return true
+        }
+        controller.rangeCleared = () => {
+            // clear the settle timer
+            if (dictSettle !== undefined) {
+                window.clearTimeout(dictSettle)
+                dictSettle = undefined
+            }
+
+            // hide the popup
+            if (!dictPopup.expanded) {
+                dictPopup.hide()
+            }
+        }
+        controller.rangeSelected = rng => {
+            // clear the settle timer
+            if (dictSettle !== undefined) {
+                window.clearTimeout(dictSettle)
+                dictSettle = undefined
+            }
+
+            // save the range location
+            dictClientRect = () => rng.getBoundingClientRect()
+
+            // do the lookup
+            if (!dictPopup.expanded) {
+                lookup(rng.toString(), false)
+            }
+        }
+        controller.rangeSelectedDeep = (rng, anchorNode) => {
+            const re = /^\w*$/
+
+            // extend the range backward until it matches word beginning
+            while ((rng.startOffset > 0) && rng.toString().match(re)) {
+                rng.setStart(anchorNode, rng.startOffset-1)
+            }
+
+            // restore the valid word match after overshooting
+            if (!rng.toString().match(re)) {
+                rng.setStart(anchorNode, rng.startOffset+1)
+            }
+
+            // extend the range forward until it matches word ending
+            while ((rng.endOffset < anchorNode.length) && rng.toString().match(re)) {
+                rng.setEnd(anchorNode, rng.endOffset+1)
+            }
+
+            // restore the valid word match after overshooting
+            if (!rng.toString().match(re)) {
+                rng.setEnd(anchorNode, rng.endOffset-1)
+            }
+
+            // ignore it if it there's nothing left
+            if (!rng.toString().length || !rng.toString().match(re)) {
+                return
+            }
+
+            // do the lookup
+            lookup(rng.toString(), true)
+        }
+    })
+
+    return dictPopup
+})()
--- a/smali/com/faultexception/reader/content/HtmlContentWebView.smali
+++ b/smali/com/faultexception/reader/content/HtmlContentWebView.smali
@@ -1249,7 +1249,7 @@
 
     invoke-virtual {v5, v3}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
 
-    const-string v3, "<script type=\'text/javascript\' src=\'file:///android_asset/js/themes.js\'></script>"
+    const-string v3, "<script type=\'text/javascript\' src=\'file:///android_asset/js/themes.js\'></script><script type=\'text/javascript\' src=\'file:///android_asset/js/dictionary.js\' data-dict=\'https://dict.androidplatform.net/dict.js\' data-dicts=\'webster1913\'></script>"
 
     invoke-virtual {v5, v3}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
 
--- a/res/values/arrays.xml
+++ b/res/values/arrays.xml
@@ -20,4 +20,8 @@
         <item>enabled</item>
         <item>reversed</item>
     </string-array>
+
+    <string-array name="dict_names">
+        <item>webster1913</item>
+    </string-array>
 </resources>
--- a/res/values/public.xml
+++ b/res/values/public.xml
@@ -3555,4 +3555,5 @@
     <public type="xml" name="standalone_badge_gravity_top_start" id="0x7f130006" />
     <public type="xml" name="sync" id="0x7f130007" />
     <public type="drawable" name="ic_launcher_monochrome" id="0x7f0800fc" />
+    <public type="array" name="dict_names" id="0x7f030004" />
 </resources>
\ No newline at end of file
--- a/smali/com/faultexception/reader/R$array.smali
+++ b/smali/com/faultexception/reader/R$array.smali
@@ -31,3 +31,6 @@
 
     return-void
 .end method
+
+
+.field public static final dict_names:I = 0x7f030004
--- a/res/xml/preferences.xml
+++ b/res/xml/preferences.xml
@@ -16,6 +16,13 @@
         <ListPreference android:entries="@array/pref_screen_rotation_keys" android:title="@string/pref_screen_rotation_title" android:key="screen_rotation" android:summary="%s" android:defaultValue="auto" android:negativeButtonText="@null" android:entryValues="@array/pref_screen_rotation_values" />
         <SwitchPreferenceCompat android:title="@string/pref_open_last_book_title" android:key="open_last_book" android:defaultValue="false" />
     </PreferenceCategory>
+    <PreferenceCategory android:title="Dictionary">
+        <MultiSelectListPreference android:title="Disable dictionaries" android:key="dict_disabled" android:entries="@array/dict_names" android:entryValues="@array/dict_names" />
+        <SwitchPreferenceCompat android:title="Show examples" android:key="dict_show_examples" android:defaultValue="true" />
+        <SwitchPreferenceCompat android:title="Show word info" android:key="dict_show_info" android:defaultValue="true" />
+        <SwitchPreferenceCompat android:title="Use smaller font size" android:key="dict_small_font" android:defaultValue="false" />
+    </PreferenceCategory>
+
     <PreferenceCategory android:title="@string/pref_category_advanced">
         <SwitchPreferenceCompat android:title="Hide footer (grid view)" android:key="only_covers" android:defaultValue="false" />
         <com.faultexception.reader.library.LibraryFolderPreference android:title="@string/pref_library_folder_title" android:key="library_folder" />
--- a/smali/com/faultexception/reader/content/HtmlContentWebView$JsInterface.smali
+++ b/smali/com/faultexception/reader/content/HtmlContentWebView$JsInterface.smali
@@ -992,6 +992,89 @@
     return-void
 .end method
 
+.method public getDictDisabled()Ljava/lang/String;
+    .locals 3
+
+    .annotation runtime Landroid/webkit/JavascriptInterface;
+    .end annotation
+
+    iget-object v0, p0, Lcom/faultexception/reader/content/HtmlContentWebView$JsInterface;->this$0:Lcom/faultexception/reader/content/HtmlContentWebView;
+    iget-object v0, v0, Lcom/faultexception/reader/content/HtmlContentWebView;->mContext:Landroid/content/Context;
+    invoke-static {v0}, Landroid/preference/PreferenceManager;->getDefaultSharedPreferences(Landroid/content/Context;)Landroid/content/SharedPreferences;
+    move-result-object v0
+
+    const-string v1, "dict_disabled"
+    const v2, 0x0
+    invoke-interface {v0, v1, v2}, Landroid/content/SharedPreferences;->getStringSet(Ljava/lang/String;Ljava/util/Set;)Ljava/util/Set;
+    move-result-object v1
+
+    const-string v0, ""
+    if-eqz v1, :done
+    const-string v0, " "
+    invoke-static {v0, v1}, Ljava/lang/String;->join(Ljava/lang/CharSequence;Ljava/lang/Iterable;)Ljava/lang/String;
+    move-result-object v0
+
+    :done
+    return-object v0
+.end method
+
+.method public getDictShowExamples()Z
+    .locals 3
+
+    .annotation runtime Landroid/webkit/JavascriptInterface;
+    .end annotation
+
+    iget-object v0, p0, Lcom/faultexception/reader/content/HtmlContentWebView$JsInterface;->this$0:Lcom/faultexception/reader/content/HtmlContentWebView;
+    iget-object v0, v0, Lcom/faultexception/reader/content/HtmlContentWebView;->mContext:Landroid/content/Context;
+    invoke-static {v0}, Landroid/preference/PreferenceManager;->getDefaultSharedPreferences(Landroid/content/Context;)Landroid/content/SharedPreferences;
+    move-result-object v0
+
+    const-string v1, "dict_show_examples"
+    const v2, 0x0
+    invoke-interface {v0, v1, v2}, Landroid/content/SharedPreferences;->getBoolean(Ljava/lang/String;Z)Z
+    move-result v0
+
+    return v0
+.end method
+
+.method public getDictShowInfo()Z
+    .locals 3
+
+    .annotation runtime Landroid/webkit/JavascriptInterface;
+    .end annotation
+
+    iget-object v0, p0, Lcom/faultexception/reader/content/HtmlContentWebView$JsInterface;->this$0:Lcom/faultexception/reader/content/HtmlContentWebView;
+    iget-object v0, v0, Lcom/faultexception/reader/content/HtmlContentWebView;->mContext:Landroid/content/Context;
+    invoke-static {v0}, Landroid/preference/PreferenceManager;->getDefaultSharedPreferences(Landroid/content/Context;)Landroid/content/SharedPreferences;
+    move-result-object v0
+
+    const-string v1, "dict_show_info"
+    const v2, 0x0
+    invoke-interface {v0, v1, v2}, Landroid/content/SharedPreferences;->getBoolean(Ljava/lang/String;Z)Z
+    move-result v0
+
+    return v0
+.end method
+
+.method public getDictSmallFont()Z
+    .locals 3
+
+    .annotation runtime Landroid/webkit/JavascriptInterface;
+    .end annotation
+
+    iget-object v0, p0, Lcom/faultexception/reader/content/HtmlContentWebView$JsInterface;->this$0:Lcom/faultexception/reader/content/HtmlContentWebView;
+    iget-object v0, v0, Lcom/faultexception/reader/content/HtmlContentWebView;->mContext:Landroid/content/Context;
+    invoke-static {v0}, Landroid/preference/PreferenceManager;->getDefaultSharedPreferences(Landroid/content/Context;)Landroid/content/SharedPreferences;
+    move-result-object v0
+
+    const-string v1, "dict_small_font"
+    const v2, 0x0
+    invoke-interface {v0, v1, v2}, Landroid/content/SharedPreferences;->getBoolean(Ljava/lang/String;Z)Z
+    move-result v0
+
+    return v0
+.end method
+
 .method public onBookReady()V
     .locals 2
     .annotation runtime Landroid/webkit/JavascriptInterface;
--- a/res/xml/preferences.xml
+++ b/res/xml/preferences.xml
@@ -7,6 +7,7 @@
     <Preference android:title="@string/pref_backups" android:key="backups" />
     <Preference android:title="@string/pref_sync" android:key="sync" android:summary="@string/pref_sync_off" />
     <PreferenceCategory android:title="@string/pref_category_navigation">
+        <SwitchPreferenceCompat android:title="Disable page turn animation" android:key="no_page_turn_animation" android:defaultValue="false" />
         <SwitchPreferenceCompat android:title="@string/pref_tap_pagination_title" android:key="tap_pagination" android:defaultValue="false" />
         <ListPreference android:entries="@array/pref_volume_pagination_keys" android:title="@string/pref_volume_pagination_title" android:key="volume_pagination" android:summary="%s" android:defaultValue="disabled" android:negativeButtonText="@null" android:entryValues="@array/pref_volume_pagination_values" />
         <SwitchPreferenceCompat android:title="@string/pref_warn_external_links_title" android:key="warn_external_links" android:defaultValue="true" />
--- a/smali/com/faultexception/reader/content/HtmlContentWebView.smali
+++ b/smali/com/faultexception/reader/content/HtmlContentWebView.smali
@@ -122,8 +122,26 @@
 .field private mTouchSlop:F
 
 .field private mUrl:Ljava/lang/String;
+.field private mNoPageTurnAnimation:Z
 
+.method private initNoPageTurnAnimation(Landroid/content/Context;)V
+    .locals 3
 
+    invoke-static {p1}, Landroid/preference/PreferenceManager;->getDefaultSharedPreferences(Landroid/content/Context;)Landroid/content/SharedPreferences;
+    move-result-object v0
+
+    const-string v1, "no_page_turn_animation"
+    const/4 v2, 0x0
+    invoke-interface {v0, v1, v2}, Landroid/content/SharedPreferences;->getBoolean(Ljava/lang/String;Z)Z
+    move-result v1
+
+    iput-boolean v1, p0, Lcom/faultexception/reader/content/HtmlContentWebView;->mNoPageTurnAnimation:Z
+
+    return-void
+.end method
+
+
+
 # direct methods
 .method static constructor <clinit>()V
     .locals 1
@@ -146,6 +162,7 @@
 
     .line 115
     invoke-direct {p0, p1}, Landroid/webkit/WebView;-><init>(Landroid/content/Context;)V
+    invoke-direct {p0, p1}, Lcom/faultexception/reader/content/HtmlContentWebView;->initNoPageTurnAnimation(Landroid/content/Context;)V
 
     const v0, 0x3fa66666    # 1.3f
 
@@ -3672,7 +3689,12 @@
 
 .method public setPage(IZ)V
     .locals 5
+    iget-boolean v0, p0, Lcom/faultexception/reader/content/HtmlContentWebView;->mNoPageTurnAnimation:Z
+    if-eqz v0, :page_turn_animation_ok
+    const/4 p2, 0x0
+    :page_turn_animation_ok
 
+
     .line 383
     iget-boolean v0, p0, Lcom/faultexception/reader/content/HtmlContentWebView;->mBookReady:Z
 
--- a/smali/com/faultexception/reader/widget/OverScrollView.smali
+++ b/smali/com/faultexception/reader/widget/OverScrollView.smali
@@ -41,14 +41,33 @@
 .field private mTransition:Z
 
 .field private mVerticalRestricted:Z
+.field private mNoPageTurnAnimation:Z
 
+.method private initNoPageTurnAnimation(Landroid/content/Context;)V
+    .locals 3
 
+    invoke-static {p1}, Landroid/preference/PreferenceManager;->getDefaultSharedPreferences(Landroid/content/Context;)Landroid/content/SharedPreferences;
+    move-result-object v0
+
+    const-string v1, "no_page_turn_animation"
+    const/4 v2, 0x0
+    invoke-interface {v0, v1, v2}, Landroid/content/SharedPreferences;->getBoolean(Ljava/lang/String;Z)Z
+    move-result v1
+
+    iput-boolean v1, p0, Lcom/faultexception/reader/widget/OverScrollView;->mNoPageTurnAnimation:Z
+
+    return-void
+.end method
+
+
+
 # direct methods
 .method public constructor <init>(Landroid/content/Context;Landroid/util/AttributeSet;)V
     .locals 2
 
     .line 45
     invoke-direct {p0, p1, p2}, Landroid/widget/FrameLayout;-><init>(Landroid/content/Context;Landroid/util/AttributeSet;)V
+    invoke-direct {p0, p1}, Lcom/faultexception/reader/widget/OverScrollView;->initNoPageTurnAnimation(Landroid/content/Context;)V
 
     .line 47
     invoke-static {p1}, Landroid/view/ViewConfiguration;->get(Landroid/content/Context;)Landroid/view/ViewConfiguration;
@@ -518,6 +529,13 @@
 
     invoke-virtual {v2, v3}, Landroid/animation/ValueAnimator;->addListener(Landroid/animation/Animator$AnimatorListener;)V
 
+    iget-boolean v0, p0, Lcom/faultexception/reader/widget/OverScrollView;->mNoPageTurnAnimation:Z
+    if-eqz v0, :page_turn_animation_ok
+    const v0, 0x0
+    invoke-virtual {v3, v0}, Lcom/faultexception/reader/widget/OverScrollView$2;->onAnimationEnd(Landroid/animation/Animator;)V
+    return-void
+    :page_turn_animation_ok
+
     .line 207
     iget-object v0, p0, Lcom/faultexception/reader/widget/OverScrollView;->mOverScrollPullAnimation:Landroid/animation/ValueAnimator;
 
@@ -548,6 +566,7 @@
     iput-boolean v1, p0, Lcom/faultexception/reader/widget/OverScrollView;->mTransition:Z
 
     return-void
+
 .end method
 
 .method protected drawChild(Landroid/graphics/Canvas;Landroid/view/View;J)Z
--- a/res/layout/fragment_display_settings.xml
+++ b/res/layout/fragment_display_settings.xml
@@ -1,5 +1,5 @@
 <?xml version="1.0" encoding="utf-8"?>
-<com.faultexception.reader.widget.ExpansionScrollView android:id="@id/scroll_view" android:layout_width="fill_parent" android:layout_height="wrap_content"
+<ScrollView android:id="@id/scroll_view" android:layout_width="fill_parent" android:layout_height="wrap_content"
   xmlns:android="http://schemas.android.com/apk/res/android" xmlns:app="http://schemas.android.com/apk/res-auto">
     <LinearLayout android:orientation="vertical" android:layout_width="fill_parent" android:layout_height="wrap_content"
       xmlns:android="http://schemas.android.com/apk/res/android">
@@ -38,9 +38,9 @@
             <ImageButton android:id="@id/text_align_start" android:background="@drawable/action_ripple" android:padding="16.0dip" android:layout_width="wrap_content" android:layout_height="wrap_content" android:src="@drawable/ic_align_start" android:contentDescription="@string/display_settings_text_align_start" app:tint="@color/display_settings_control_color_selector" />
             <ImageButton android:id="@id/text_align_justify" android:background="@drawable/action_ripple" android:padding="16.0dip" android:layout_width="wrap_content" android:layout_height="wrap_content" android:src="@drawable/ic_align_justify" android:contentDescription="@string/display_settings_text_align_justify" app:tint="@color/display_settings_control_color_selector" />
         </LinearLayout>
-        <Space android:id="@id/end_padding" android:visibility="gone" android:layout_width="fill_parent" android:layout_height="8.0dip" />
-        <ImageButton android:id="@id/expand_more" android:background="@drawable/action_ripple_20dp" android:padding="16.0dip" android:layout_width="fill_parent" android:layout_height="wrap_content" android:src="@drawable/ic_expand_more" android:contentDescription="@null" app:tint="?android:textColorPrimary" />
-        <LinearLayout android:orientation="vertical" android:id="@id/more_section" android:paddingBottom="8.0dip" android:visibility="gone" android:layout_width="fill_parent" android:layout_height="wrap_content">
+        <Space android:id="@id/end_padding" android:visibility="invisible" android:layout_width="fill_parent" android:layout_height="8.0dip" />
+        <ImageButton android:id="@id/expand_more" android:visibility="gone" android:background="@drawable/action_ripple_20dp" android:padding="16.0dip" android:layout_width="fill_parent" android:layout_height="wrap_content" android:src="@drawable/ic_expand_more" android:contentDescription="@null" app:tint="?android:textColorPrimary" />
+        <LinearLayout android:orientation="vertical" android:id="@id/more_section" android:paddingBottom="8.0dip" android:visibility="visible" android:layout_width="fill_parent" android:layout_height="wrap_content">
             <LinearLayout android:gravity="center_vertical" android:orientation="horizontal" android:id="@id/margin" android:paddingLeft="24.0dip" android:paddingRight="8.0dip" android:layout_width="fill_parent" android:layout_height="wrap_content">
                 <LinearLayout android:gravity="center_vertical" android:orientation="vertical" android:layout_width="0.0dip" android:layout_height="wrap_content" android:layout_weight="1.0">
                     <TextView android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="@string/display_settings_margin" style="@style/DisplaySettingsHeader" />
@@ -62,4 +62,4 @@
             </LinearLayout>
         </LinearLayout>
     </LinearLayout>
-</com.faultexception.reader.widget.ExpansionScrollView>
\ No newline at end of file
+</ScrollView>
\ No newline at end of file
--- a/res/layout-v17/fragment_display_settings.xml
+++ b/res/layout-v17/fragment_display_settings.xml
@@ -1,5 +1,5 @@
 <?xml version="1.0" encoding="utf-8"?>
-<com.faultexception.reader.widget.ExpansionScrollView android:id="@id/scroll_view" android:layout_width="fill_parent" android:layout_height="wrap_content"
+<ScrollView android:id="@id/scroll_view" android:layout_width="fill_parent" android:layout_height="wrap_content"
   xmlns:android="http://schemas.android.com/apk/res/android" xmlns:app="http://schemas.android.com/apk/res-auto">
     <LinearLayout android:orientation="vertical" android:layout_width="fill_parent" android:layout_height="wrap_content"
       xmlns:android="http://schemas.android.com/apk/res/android">
@@ -38,9 +38,9 @@
             <ImageButton android:id="@id/text_align_start" android:background="@drawable/action_ripple" android:padding="16.0dip" android:layout_width="wrap_content" android:layout_height="wrap_content" android:src="@drawable/ic_align_start" android:contentDescription="@string/display_settings_text_align_start" app:tint="@color/display_settings_control_color_selector" />
             <ImageButton android:id="@id/text_align_justify" android:background="@drawable/action_ripple" android:padding="16.0dip" android:layout_width="wrap_content" android:layout_height="wrap_content" android:src="@drawable/ic_align_justify" android:contentDescription="@string/display_settings_text_align_justify" app:tint="@color/display_settings_control_color_selector" />
         </LinearLayout>
-        <Space android:id="@id/end_padding" android:visibility="gone" android:layout_width="fill_parent" android:layout_height="8.0dip" />
-        <ImageButton android:id="@id/expand_more" android:background="@drawable/action_ripple_20dp" android:padding="16.0dip" android:layout_width="fill_parent" android:layout_height="wrap_content" android:src="@drawable/ic_expand_more" android:contentDescription="@null" app:tint="?android:textColorPrimary" />
-        <LinearLayout android:orientation="vertical" android:id="@id/more_section" android:paddingBottom="8.0dip" android:visibility="gone" android:layout_width="fill_parent" android:layout_height="wrap_content">
+        <Space android:id="@id/end_padding" android:visibility="invisible" android:layout_width="fill_parent" android:layout_height="8.0dip" />
+        <ImageButton android:id="@id/expand_more" android:visibility="gone" android:background="@drawable/action_ripple_20dp" android:padding="16.0dip" android:layout_width="fill_parent" android:layout_height="wrap_content" android:src="@drawable/ic_expand_more" android:contentDescription="@null" app:tint="?android:textColorPrimary" />
+        <LinearLayout android:orientation="vertical" android:id="@id/more_section" android:paddingBottom="8.0dip" android:visibility="visible" android:layout_width="fill_parent" android:layout_height="wrap_content">
             <LinearLayout android:gravity="center_vertical" android:orientation="horizontal" android:id="@id/margin" android:paddingLeft="24.0dip" android:paddingRight="8.0dip" android:layout_width="fill_parent" android:layout_height="wrap_content">
                 <LinearLayout android:gravity="center_vertical" android:orientation="vertical" android:layout_width="0.0dip" android:layout_height="wrap_content" android:layout_weight="1.0">
                     <TextView android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="@string/display_settings_margin" style="@style/DisplaySettingsHeader" />
@@ -62,4 +62,4 @@
             </LinearLayout>
         </LinearLayout>
     </LinearLayout>
-</com.faultexception.reader.widget.ExpansionScrollView>
\ No newline at end of file
+</ScrollView>
\ No newline at end of file
--- a/smali/com/faultexception/reader/DisplaySettingsFragment.smali
+++ b/smali/com/faultexception/reader/DisplaySettingsFragment.smali
@@ -1136,12 +1136,12 @@
 
     move-result-object p2
 
-    check-cast p2, Lcom/faultexception/reader/widget/ExpansionScrollView;
+    check-cast p2, Landroid/widget/ScrollView;
 
     const v0, 0x7f0900bb
 
     .line 131
-    invoke-virtual {p2, v0}, Lcom/faultexception/reader/widget/ExpansionScrollView;->findViewById(I)Landroid/view/View;
+    invoke-virtual {p2, v0}, Landroid/widget/ScrollView;->findViewById(I)Landroid/view/View;
 
     move-result-object v0
 
@@ -1150,7 +1146,7 @@
     const v0, 0x7f0901c7
 
     .line 133
-    invoke-virtual {p2, v0}, Lcom/faultexception/reader/widget/ExpansionScrollView;->findViewById(I)Landroid/view/View;
+    invoke-virtual {p2, v0}, Landroid/widget/ScrollView;->findViewById(I)Landroid/view/View;
 
     move-result-object v0
 
@@ -1159,7 +1155,7 @@
     const v0, 0x7f0901bc
 
     .line 134
-    invoke-virtual {p2, v0}, Lcom/faultexception/reader/widget/ExpansionScrollView;->findViewById(I)Landroid/view/View;
+    invoke-virtual {p2, v0}, Landroid/widget/ScrollView;->findViewById(I)Landroid/view/View;
 
     move-result-object v0
 
@@ -1170,7 +1166,7 @@
     const v0, 0x7f0901bb
 
     .line 136
-    invoke-virtual {p2, v0}, Lcom/faultexception/reader/widget/ExpansionScrollView;->findViewById(I)Landroid/view/View;
+    invoke-virtual {p2, v0}, Landroid/widget/ScrollView;->findViewById(I)Landroid/view/View;
 
     move-result-object v0
 
@@ -1203,7 +1199,7 @@
     const v0, 0x7f0901ba
 
     .line 141
-    invoke-virtual {p2, v0}, Lcom/faultexception/reader/widget/ExpansionScrollView;->findViewById(I)Landroid/view/View;
+    invoke-virtual {p2, v0}, Landroid/widget/ScrollView;->findViewById(I)Landroid/view/View;
 
     move-result-object v0
 
@@ -1236,7 +1232,7 @@
     const v0, 0x7f0900f5
 
     .line 146
-    invoke-virtual {p2, v0}, Lcom/faultexception/reader/widget/ExpansionScrollView;->findViewById(I)Landroid/view/View;
+    invoke-virtual {p2, v0}, Landroid/widget/ScrollView;->findViewById(I)Landroid/view/View;
 
     move-result-object v0
 
@@ -1245,7 +1241,7 @@
     const v0, 0x7f0900f8
 
     .line 147
-    invoke-virtual {p2, v0}, Lcom/faultexception/reader/widget/ExpansionScrollView;->findViewById(I)Landroid/view/View;
+    invoke-virtual {p2, v0}, Landroid/widget/ScrollView;->findViewById(I)Landroid/view/View;
 
     move-result-object v0
 
@@ -1256,7 +1252,7 @@
     const v0, 0x7f0900f7
 
     .line 149
-    invoke-virtual {p2, v0}, Lcom/faultexception/reader/widget/ExpansionScrollView;->findViewById(I)Landroid/view/View;
+    invoke-virtual {p2, v0}, Landroid/widget/ScrollView;->findViewById(I)Landroid/view/View;
 
     move-result-object v0
 
@@ -1289,7 +1285,7 @@
     const v0, 0x7f0900f6
 
     .line 154
-    invoke-virtual {p2, v0}, Lcom/faultexception/reader/widget/ExpansionScrollView;->findViewById(I)Landroid/view/View;
+    invoke-virtual {p2, v0}, Landroid/widget/ScrollView;->findViewById(I)Landroid/view/View;
 
     move-result-object v0
 
@@ -1322,7 +1318,7 @@
     const v0, 0x7f0900ee
 
     .line 159
-    invoke-virtual {p2, v0}, Lcom/faultexception/reader/widget/ExpansionScrollView;->findViewById(I)Landroid/view/View;
+    invoke-virtual {p2, v0}, Landroid/widget/ScrollView;->findViewById(I)Landroid/view/View;
 
     move-result-object v0
 
@@ -1331,7 +1327,7 @@
     const v0, 0x7f0900ed
 
     .line 160
-    invoke-virtual {p2, v0}, Lcom/faultexception/reader/widget/ExpansionScrollView;->findViewById(I)Landroid/view/View;
+    invoke-virtual {p2, v0}, Landroid/widget/ScrollView;->findViewById(I)Landroid/view/View;
 
     move-result-object v0
 
@@ -1342,7 +1338,7 @@
     const v0, 0x7f0900ec
 
     .line 162
-    invoke-virtual {p2, v0}, Lcom/faultexception/reader/widget/ExpansionScrollView;->findViewById(I)Landroid/view/View;
+    invoke-virtual {p2, v0}, Landroid/widget/ScrollView;->findViewById(I)Landroid/view/View;
 
     move-result-object v0
 
@@ -1375,7 +1371,7 @@
     const v0, 0x7f0900eb
 
     .line 167
-    invoke-virtual {p2, v0}, Lcom/faultexception/reader/widget/ExpansionScrollView;->findViewById(I)Landroid/view/View;
+    invoke-virtual {p2, v0}, Landroid/widget/ScrollView;->findViewById(I)Landroid/view/View;
 
     move-result-object v0
 
@@ -1408,7 +1404,7 @@
     const v0, 0x7f0901c0
 
     .line 172
-    invoke-virtual {p2, v0}, Lcom/faultexception/reader/widget/ExpansionScrollView;->findViewById(I)Landroid/view/View;
+    invoke-virtual {p2, v0}, Landroid/widget/ScrollView;->findViewById(I)Landroid/view/View;
 
     move-result-object v0
 
@@ -1417,7 +1413,7 @@
     const v0, 0x7f0901c3
 
     .line 173
-    invoke-virtual {p2, v0}, Lcom/faultexception/reader/widget/ExpansionScrollView;->findViewById(I)Landroid/view/View;
+    invoke-virtual {p2, v0}, Landroid/widget/ScrollView;->findViewById(I)Landroid/view/View;
 
     move-result-object v0
 
@@ -1428,7 +1424,7 @@
     const v0, 0x7f0901c2
 
     .line 175
-    invoke-virtual {p2, v0}, Lcom/faultexception/reader/widget/ExpansionScrollView;->findViewById(I)Landroid/view/View;
+    invoke-virtual {p2, v0}, Landroid/widget/ScrollView;->findViewById(I)Landroid/view/View;
 
     move-result-object v0
 
@@ -1461,7 +1457,7 @@
     const v0, 0x7f0901c1
 
     .line 180
-    invoke-virtual {p2, v0}, Lcom/faultexception/reader/widget/ExpansionScrollView;->findViewById(I)Landroid/view/View;
+    invoke-virtual {p2, v0}, Landroid/widget/ScrollView;->findViewById(I)Landroid/view/View;
 
     move-result-object v0
 
@@ -1494,7 +1490,7 @@
     const v0, 0x7f090054
 
     .line 185
-    invoke-virtual {p2, v0}, Lcom/faultexception/reader/widget/ExpansionScrollView;->findViewById(I)Landroid/view/View;
+    invoke-virtual {p2, v0}, Landroid/widget/ScrollView;->findViewById(I)Landroid/view/View;
 
     move-result-object v0
 
@@ -1523,7 +1519,7 @@
     const v0, 0x7f090055
 
     .line 190
-    invoke-virtual {p2, v0}, Lcom/faultexception/reader/widget/ExpansionScrollView;->findViewById(I)Landroid/view/View;
+    invoke-virtual {p2, v0}, Landroid/widget/ScrollView;->findViewById(I)Landroid/view/View;
 
     move-result-object v0
 
@@ -1571,7 +1567,7 @@
     const v0, 0x7f0901cb
 
     .line 196
-    invoke-virtual {p2, v0}, Lcom/faultexception/reader/widget/ExpansionScrollView;->findViewById(I)Landroid/view/View;
+    invoke-virtual {p2, v0}, Landroid/widget/ScrollView;->findViewById(I)Landroid/view/View;
 
     move-result-object v0
 
@@ -1580,7 +1576,7 @@
     const v0, 0x7f0901cd
 
     .line 198
-    invoke-virtual {p2, v0}, Lcom/faultexception/reader/widget/ExpansionScrollView;->findViewById(I)Landroid/view/View;
+    invoke-virtual {p2, v0}, Landroid/widget/ScrollView;->findViewById(I)Landroid/view/View;
 
     move-result-object v0
 
@@ -1647,7 +1643,7 @@
     const v0, 0x7f0900c1
 
     .line 207
-    invoke-virtual {p2, v0}, Lcom/faultexception/reader/widget/ExpansionScrollView;->findViewById(I)Landroid/view/View;
+    invoke-virtual {p2, v0}, Landroid/widget/ScrollView;->findViewById(I)Landroid/view/View;
 
     move-result-object v0
 
@@ -1656,7 +1652,7 @@
     const v0, 0x7f0900c2
 
     .line 208
-    invoke-virtual {p2, v0}, Lcom/faultexception/reader/widget/ExpansionScrollView;->findViewById(I)Landroid/view/View;
+    invoke-virtual {p2, v0}, Landroid/widget/ScrollView;->findViewById(I)Landroid/view/View;
 
     move-result-object v0
 
@@ -1688,7 +1684,7 @@
     const v0, 0x7f0900bc
 
     .line 213
-    invoke-virtual {p2, v0}, Lcom/faultexception/reader/widget/ExpansionScrollView;->findViewById(I)Landroid/view/View;
+    invoke-virtual {p2, v0}, Landroid/widget/ScrollView;->findViewById(I)Landroid/view/View;
 
     move-result-object v0
 
@@ -1697,7 +1693,7 @@
     const v0, 0x7f0900bd
 
     .line 215
-    invoke-virtual {p2, v0}, Lcom/faultexception/reader/widget/ExpansionScrollView;->findViewById(I)Landroid/view/View;
+    invoke-virtual {p2, v0}, Landroid/widget/ScrollView;->findViewById(I)Landroid/view/View;
 
     move-result-object v0
 
@@ -1755,7 +1751,7 @@
     const v0, 0x7f0900be
 
     .line 223
-    invoke-virtual {p2, v0}, Lcom/faultexception/reader/widget/ExpansionScrollView;->findViewById(I)Landroid/view/View;
+    invoke-virtual {p2, v0}, Landroid/widget/ScrollView;->findViewById(I)Landroid/view/View;
 
     move-result-object v0
 
@@ -1807,7 +1803,7 @@
     const v0, 0x7f0900bf
 
     .line 231
-    invoke-virtual {p2, v0}, Lcom/faultexception/reader/widget/ExpansionScrollView;->findViewById(I)Landroid/view/View;
+    invoke-virtual {p2, v0}, Landroid/widget/ScrollView;->findViewById(I)Landroid/view/View;
 
     move-result-object v0
 
@@ -1859,7 +1855,7 @@
     const p1, 0x7f0900a7
 
     .line 239
-    invoke-virtual {p2, p1}, Lcom/faultexception/reader/widget/ExpansionScrollView;->findViewById(I)Landroid/view/View;
+    invoke-virtual {p2, p1}, Landroid/widget/ScrollView;->findViewById(I)Landroid/view/View;
 
     move-result-object p1
 
@@ -1868,7 +1864,7 @@
     const p1, 0x7f0900ae
 
     .line 240
-    invoke-virtual {p2, p1}, Lcom/faultexception/reader/widget/ExpansionScrollView;->findViewById(I)Landroid/view/View;
+    invoke-virtual {p2, p1}, Landroid/widget/ScrollView;->findViewById(I)Landroid/view/View;
 
     move-result-object p1
 
@@ -1879,7 +1875,7 @@
     const p1, 0x7f090106
 
     .line 241
-    invoke-virtual {p2, p1}, Lcom/faultexception/reader/widget/ExpansionScrollView;->findViewById(I)Landroid/view/View;
+    invoke-virtual {p2, p1}, Landroid/widget/ScrollView;->findViewById(I)Landroid/view/View;
 
     move-result-object p1
 
@@ -1890,21 +1886,13 @@
     .line 242
     iget-object p1, p0, Lcom/faultexception/reader/DisplaySettingsFragment;->mExpandButton:Landroid/widget/ImageButton;
 
-    new-instance v0, Lcom/faultexception/reader/DisplaySettingsFragment$1;
-
-    invoke-direct {v0, p0, p2}, Lcom/faultexception/reader/DisplaySettingsFragment$1;-><init>(Lcom/faultexception/reader/DisplaySettingsFragment;Lcom/faultexception/reader/widget/ExpansionScrollView;)V
-
-    invoke-virtual {p1, v0}, Landroid/widget/ImageButton;->setOnClickListener(Landroid/view/View$OnClickListener;)V
-
-    .line 259
+                .line 259
     iget-object p1, p0, Lcom/faultexception/reader/DisplaySettingsFragment;->mExpandButton:Landroid/widget/ImageButton;
 
     iget-object v0, p0, Lcom/faultexception/reader/DisplaySettingsFragment;->mMoreSection:Landroid/view/ViewGroup;
 
-    invoke-virtual {p2, p1, v0}, Lcom/faultexception/reader/widget/ExpansionScrollView;->setExpandButtonAndContainer(Landroid/view/View;Landroid/view/View;)V
+        if-eqz p3, :cond_1
 
-    if-eqz p3, :cond_1
-
     const-string p1, "features"
 
     .line 262
--- /dev/null
+++ b/assets/fonts/Caladea-Regular.ttf
Binary file
--- /dev/null
+++ b/assets/fonts/Caladea-Bold.ttf
Binary file
--- /dev/null
+++ b/assets/fonts/Caladea-Italic.ttf
Binary file
--- /dev/null
+++ b/assets/fonts/Caladea-BoldItalic.ttf
Binary file
--- /dev/null
+++ b/assets/fonts/CharisSIL-Regular.ttf
Binary file
--- /dev/null
+++ b/assets/fonts/CharisSIL-Bold.ttf
Binary file
--- /dev/null
+++ b/assets/fonts/CharisSIL-Italic.ttf
Binary file
--- /dev/null
+++ b/assets/fonts/CharisSIL-BoldItalic.ttf
Binary file
--- /dev/null
+++ b/assets/fonts/Gentium-Regular.ttf
Binary file
--- /dev/null
+++ b/assets/fonts/Gentium-Bold.ttf
Binary file
--- /dev/null
+++ b/assets/fonts/Gentium-Italic.ttf
Binary file
--- /dev/null
+++ b/assets/fonts/Gentium-BoldItalic.ttf
Binary file
--- /dev/null
+++ b/assets/fonts/GentiumBook-Regular.ttf
Binary file
--- /dev/null
+++ b/assets/fonts/GentiumBook-Bold.ttf
Binary file
--- /dev/null
+++ b/assets/fonts/GentiumBook-Italic.ttf
Binary file
--- /dev/null
+++ b/assets/fonts/GentiumBook-BoldItalic.ttf
Binary file
--- /dev/null
+++ b/assets/fonts/Kanit-Regular.ttf
Binary file
--- /dev/null
+++ b/assets/fonts/Kanit-Bold.ttf
Binary file
--- /dev/null
+++ b/assets/fonts/Kanit-Italic.ttf
Binary file
--- /dev/null
+++ b/assets/fonts/Kanit-BoldItalic.ttf
Binary file
--- /dev/null
+++ b/assets/fonts/Literata-Regular.ttf
Binary file
--- /dev/null
+++ b/assets/fonts/Literata-Bold.ttf
Binary file
--- /dev/null
+++ b/assets/fonts/Literata-Italic.ttf
Binary file
--- /dev/null
+++ b/assets/fonts/Literata-BoldItalic.ttf
Binary file
--- /dev/null
+++ b/assets/fonts/NotoSansThai-Regular.ttf
Binary file
--- /dev/null
+++ b/assets/fonts/NotoSansThai-Bold.ttf
Binary file
--- /dev/null
+++ b/assets/fonts/Sarabun-Regular.ttf
Binary file
--- /dev/null
+++ b/assets/fonts/Sarabun-Bold.ttf
Binary file
--- /dev/null
+++ b/assets/fonts/Sarabun-Italic.ttf
Binary file
--- /dev/null
+++ b/assets/fonts/Sarabun-BoldItalic.ttf
Binary file
--- /dev/null
+++ b/assets/fonts/SourceSerif-Regular.ttf
Binary file
--- /dev/null
+++ b/assets/fonts/SourceSerif-Bold.ttf
Binary file
--- /dev/null
+++ b/assets/fonts/SourceSerif-Italic.ttf
Binary file
--- /dev/null
+++ b/assets/fonts/SourceSerif-BoldItalic.ttf
Binary file
--- /dev/null
+++ b/assets/fonts/Spectral-Regular.ttf
Binary file
--- /dev/null
+++ b/assets/fonts/Spectral-Bold.ttf
Binary file
--- /dev/null
+++ b/assets/fonts/Spectral-Italic.ttf
Binary file
--- /dev/null
+++ b/assets/fonts/Spectral-BoldItalic.ttf
Binary file
--- a/smali/com/faultexception/reader/fonts/Fonts.smali
+++ b/smali/com/faultexception/reader/fonts/Fonts.smali
@@ -124,6 +124,12 @@
 
     move-result-object v0
 
+    new-instance v1, Ljava/util/ArrayList;
+    invoke-direct {v1, v0}, Ljava/util/ArrayList;-><init>(Ljava/util/Collection;)V
+    move-object v0, v1
+
+    invoke-static {v0}, Lcom/faultexception/reader/fonts/Fonts;->initCustomFonts(Ljava/util/ArrayList;)V
+
     sput-object v0, Lcom/faultexception/reader/fonts/Fonts;->FONTS:Ljava/util/List;
 
     .line 34
@@ -219,1474 +225,98 @@
 .end method
 
 .method public static getCompatibleFonts(Ljava/lang/String;)Ljava/util/List;
-    .locals 6
-    .annotation system Ldalvik/annotation/Signature;
-        value = {
-            "(",
-            "Ljava/lang/String;",
-            ")",
-            "Ljava/util/List<",
-            "Lcom/faultexception/reader/fonts/Font;",
-            ">;"
-        }
-    .end annotation
 
-    const-string v0, "-"
+    .locals 5
 
-    .line 56
+    const-string v0, "-"
     invoke-virtual {p0, v0}, Ljava/lang/String;->split(Ljava/lang/String;)[Ljava/lang/String;
-
     move-result-object p0
 
-    const/4 v0, 0x0
-
+    const v0, 0
     aget-object p0, p0, v0
-
     invoke-virtual {p0}, Ljava/lang/String;->toLowerCase()Ljava/lang/String;
-
     move-result-object p0
 
-    .line 58
-    invoke-virtual {p0}, Ljava/lang/String;->hashCode()I
 
-    invoke-virtual {p0}, Ljava/lang/String;->hashCode()I
 
-    move-result v1
-
-    const/4 v2, 0x4
-
-    const/4 v3, 0x2
-
-    const/4 v4, 0x1
-
-    const/4 v5, -0x1
-
-    sparse-switch v1, :sswitch_data_0
-
-    :goto_0
-    const/4 v0, -0x1
-
-    goto/16 :goto_1
-
-    :sswitch_0
-    const-string v0, "zul"
-
+    const-string v0, "eng"
     invoke-virtual {p0, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
-
-    move-result p0
-
-    if-nez p0, :cond_0
-
-    goto :goto_0
-
-    :cond_0
-    const/16 v0, 0x4a
-
-    goto/16 :goto_1
-
-    :sswitch_1
-    const-string v0, "vie"
-
+    move-result v0
+    const/16 v4, 0x1 # Latin
+    if-nez v0, :filter
+    const-string v0, "en"
     invoke-virtual {p0, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
+    move-result v0
+    const/16 v4, 0x1 # Latin
+    if-nez v0, :filter
 
-    move-result p0
-
-    if-nez p0, :cond_1
-
-    goto :goto_0
-
-    :cond_1
-    const/16 v0, 0x49
-
-    goto/16 :goto_1
-
-    :sswitch_2
-    const-string v0, "tur"
-
-    invoke-virtual {p0, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
-
-    move-result p0
-
-    if-nez p0, :cond_2
-
-    goto :goto_0
-
-    :cond_2
-    const/16 v0, 0x48
-
-    goto/16 :goto_1
-
-    :sswitch_3
-    const-string v0, "swe"
-
-    invoke-virtual {p0, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
-
-    move-result p0
-
-    if-nez p0, :cond_3
-
-    goto :goto_0
-
-    :cond_3
-    const/16 v0, 0x47
-
-    goto/16 :goto_1
-
-    :sswitch_4
-    const-string v0, "swa"
-
-    invoke-virtual {p0, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
-
-    move-result p0
-
-    if-nez p0, :cond_4
-
-    goto :goto_0
-
-    :cond_4
-    const/16 v0, 0x46
-
-    goto/16 :goto_1
-
-    :sswitch_5
-    const-string v0, "sqi"
-
-    invoke-virtual {p0, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
-
-    move-result p0
-
-    if-nez p0, :cond_5
-
-    goto :goto_0
-
-    :cond_5
-    const/16 v0, 0x45
-
-    goto/16 :goto_1
-
-    :sswitch_6
-    const-string v0, "spa"
-
-    invoke-virtual {p0, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
-
-    move-result p0
-
-    if-nez p0, :cond_6
-
-    goto :goto_0
-
-    :cond_6
-    const/16 v0, 0x44
-
-    goto/16 :goto_1
-
-    :sswitch_7
-    const-string v0, "slv"
-
-    invoke-virtual {p0, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
-
-    move-result p0
-
-    if-nez p0, :cond_7
-
-    goto :goto_0
-
-    :cond_7
-    const/16 v0, 0x43
-
-    goto/16 :goto_1
-
-    :sswitch_8
     const-string v0, "rus"
-
     invoke-virtual {p0, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
-
-    move-result p0
-
-    if-nez p0, :cond_8
-
-    goto :goto_0
-
-    :cond_8
-    const/16 v0, 0x42
-
-    goto/16 :goto_1
-
-    :sswitch_9
-    const-string v0, "rum"
-
+    move-result v0
+    const/16 v4, 0x2 # Cyrillic
+    if-nez v0, :filter
+    const-string v0, "ru"
     invoke-virtual {p0, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
+    move-result v0
+    const/16 v4, 0x2 # Cyrillic
+    if-nez v0, :filter
 
-    move-result p0
-
-    if-nez p0, :cond_9
-
-    goto/16 :goto_0
-
-    :cond_9
-    const/16 v0, 0x41
-
-    goto/16 :goto_1
-
-    :sswitch_a
-    const-string v0, "ron"
-
-    invoke-virtual {p0, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
-
-    move-result p0
-
-    if-nez p0, :cond_a
-
-    goto/16 :goto_0
-
-    :cond_a
-    const/16 v0, 0x40
-
-    goto/16 :goto_1
-
-    :sswitch_b
-    const-string v0, "por"
-
-    invoke-virtual {p0, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
-
-    move-result p0
-
-    if-nez p0, :cond_b
-
-    goto/16 :goto_0
-
-    :cond_b
-    const/16 v0, 0x3f
-
-    goto/16 :goto_1
-
-    :sswitch_c
-    const-string v0, "pol"
-
-    invoke-virtual {p0, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
-
-    move-result p0
-
-    if-nez p0, :cond_c
-
-    goto/16 :goto_0
-
-    :cond_c
-    const/16 v0, 0x3e
-
-    goto/16 :goto_1
-
-    :sswitch_d
-    const-string v0, "nld"
-
-    invoke-virtual {p0, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
-
-    move-result p0
-
-    if-nez p0, :cond_d
-
-    goto/16 :goto_0
-
-    :cond_d
-    const/16 v0, 0x3d
-
-    goto/16 :goto_1
-
-    :sswitch_e
-    const-string v0, "msa"
-
-    invoke-virtual {p0, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
-
-    move-result p0
-
-    if-nez p0, :cond_e
-
-    goto/16 :goto_0
-
-    :cond_e
-    const/16 v0, 0x3c
-
-    goto/16 :goto_1
-
-    :sswitch_f
-    const-string v0, "may"
-
-    invoke-virtual {p0, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
-
-    move-result p0
-
-    if-nez p0, :cond_f
-
-    goto/16 :goto_0
-
-    :cond_f
-    const/16 v0, 0x3b
-
-    goto/16 :goto_1
-
-    :sswitch_10
-    const-string v0, "ltz"
-
-    invoke-virtual {p0, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
-
-    move-result p0
-
-    if-nez p0, :cond_10
-
-    goto/16 :goto_0
-
-    :cond_10
-    const/16 v0, 0x3a
-
-    goto/16 :goto_1
-
-    :sswitch_11
-    const-string v0, "lav"
-
-    invoke-virtual {p0, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
-
-    move-result p0
-
-    if-nez p0, :cond_11
-
-    goto/16 :goto_0
-
-    :cond_11
-    const/16 v0, 0x39
-
-    goto/16 :goto_1
-
-    :sswitch_12
-    const-string v0, "lat"
-
-    invoke-virtual {p0, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
-
-    move-result p0
-
-    if-nez p0, :cond_12
-
-    goto/16 :goto_0
-
-    :cond_12
-    const/16 v0, 0x38
-
-    goto/16 :goto_1
-
-    :sswitch_13
-    const-string v0, "ita"
-
-    invoke-virtual {p0, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
-
-    move-result p0
-
-    if-nez p0, :cond_13
-
-    goto/16 :goto_0
-
-    :cond_13
-    const/16 v0, 0x37
-
-    goto/16 :goto_1
-
-    :sswitch_14
-    const-string v0, "isl"
-
-    invoke-virtual {p0, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
-
-    move-result p0
-
-    if-nez p0, :cond_14
-
-    goto/16 :goto_0
-
-    :cond_14
-    const/16 v0, 0x36
-
-    goto/16 :goto_1
-
-    :sswitch_15
-    const-string v0, "ind"
-
-    invoke-virtual {p0, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
-
-    move-result p0
-
-    if-nez p0, :cond_15
-
-    goto/16 :goto_0
-
-    :cond_15
-    const/16 v0, 0x35
-
-    goto/16 :goto_1
-
-    :sswitch_16
-    const-string v0, "ice"
-
-    invoke-virtual {p0, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
-
-    move-result p0
-
-    if-nez p0, :cond_16
-
-    goto/16 :goto_0
-
-    :cond_16
-    const/16 v0, 0x34
-
-    goto/16 :goto_1
-
-    :sswitch_17
-    const-string v0, "hrv"
-
-    invoke-virtual {p0, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
-
-    move-result p0
-
-    if-nez p0, :cond_17
-
-    goto/16 :goto_0
-
-    :cond_17
-    const/16 v0, 0x33
-
-    goto/16 :goto_1
-
-    :sswitch_18
-    const-string v0, "hat"
-
-    invoke-virtual {p0, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
-
-    move-result p0
-
-    if-nez p0, :cond_18
-
-    goto/16 :goto_0
-
-    :cond_18
-    const/16 v0, 0x32
-
-    goto/16 :goto_1
-
-    :sswitch_19
     const-string v0, "gre"
-
     invoke-virtual {p0, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
-
-    move-result p0
-
-    if-nez p0, :cond_19
-
-    goto/16 :goto_0
-
-    :cond_19
-    const/16 v0, 0x31
-
-    goto/16 :goto_1
-
-    :sswitch_1a
-    const-string v0, "gle"
-
-    invoke-virtual {p0, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
-
-    move-result p0
-
-    if-nez p0, :cond_1a
-
-    goto/16 :goto_0
-
-    :cond_1a
-    const/16 v0, 0x30
-
-    goto/16 :goto_1
-
-    :sswitch_1b
-    const-string v0, "gla"
-
-    invoke-virtual {p0, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
-
-    move-result p0
-
-    if-nez p0, :cond_1b
-
-    goto/16 :goto_0
-
-    :cond_1b
-    const/16 v0, 0x2f
-
-    goto/16 :goto_1
-
-    :sswitch_1c
-    const-string v0, "ger"
-
-    invoke-virtual {p0, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
-
-    move-result p0
-
-    if-nez p0, :cond_1c
-
-    goto/16 :goto_0
-
-    :cond_1c
-    const/16 v0, 0x2e
-
-    goto/16 :goto_1
-
-    :sswitch_1d
-    const-string v0, "fre"
-
-    invoke-virtual {p0, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
-
-    move-result p0
-
-    if-nez p0, :cond_1d
-
-    goto/16 :goto_0
-
-    :cond_1d
-    const/16 v0, 0x2d
-
-    goto/16 :goto_1
-
-    :sswitch_1e
-    const-string v0, "fra"
-
-    invoke-virtual {p0, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
-
-    move-result p0
-
-    if-nez p0, :cond_1e
-
-    goto/16 :goto_0
-
-    :cond_1e
-    const/16 v0, 0x2c
-
-    goto/16 :goto_1
-
-    :sswitch_1f
-    const-string v0, "fin"
-
-    invoke-virtual {p0, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
-
-    move-result p0
-
-    if-nez p0, :cond_1f
-
-    goto/16 :goto_0
-
-    :cond_1f
-    const/16 v0, 0x2b
-
-    goto/16 :goto_1
-
-    :sswitch_20
-    const-string v0, "est"
-
-    invoke-virtual {p0, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
-
-    move-result p0
-
-    if-nez p0, :cond_20
-
-    goto/16 :goto_0
-
-    :cond_20
-    const/16 v0, 0x2a
-
-    goto/16 :goto_1
-
-    :sswitch_21
-    const-string v0, "eng"
-
-    invoke-virtual {p0, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
-
-    move-result p0
-
-    if-nez p0, :cond_21
-
-    goto/16 :goto_0
-
-    :cond_21
-    const/16 v0, 0x29
-
-    goto/16 :goto_1
-
-    :sswitch_22
+    move-result v0
+    const/16 v4, 0x4 # Greek
+    if-nez v0, :filter
     const-string v0, "ell"
-
     invoke-virtual {p0, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
-
-    move-result p0
-
-    if-nez p0, :cond_22
-
-    goto/16 :goto_0
-
-    :cond_22
-    const/16 v0, 0x28
-
-    goto/16 :goto_1
-
-    :sswitch_23
-    const-string v0, "dut"
-
-    invoke-virtual {p0, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
-
-    move-result p0
-
-    if-nez p0, :cond_23
-
-    goto/16 :goto_0
-
-    :cond_23
-    const/16 v0, 0x27
-
-    goto/16 :goto_1
-
-    :sswitch_24
-    const-string v0, "deu"
-
-    invoke-virtual {p0, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
-
-    move-result p0
-
-    if-nez p0, :cond_24
-
-    goto/16 :goto_0
-
-    :cond_24
-    const/16 v0, 0x26
-
-    goto/16 :goto_1
-
-    :sswitch_25
-    const-string v0, "cze"
-
-    invoke-virtual {p0, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
-
-    move-result p0
-
-    if-nez p0, :cond_25
-
-    goto/16 :goto_0
-
-    :cond_25
-    const/16 v0, 0x25
-
-    goto/16 :goto_1
-
-    :sswitch_26
-    const-string v0, "cre"
-
-    invoke-virtual {p0, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
-
-    move-result p0
-
-    if-nez p0, :cond_26
-
-    goto/16 :goto_0
-
-    :cond_26
-    const/16 v0, 0x24
-
-    goto/16 :goto_1
-
-    :sswitch_27
-    const-string v0, "ces"
-
-    invoke-virtual {p0, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
-
-    move-result p0
-
-    if-nez p0, :cond_27
-
-    goto/16 :goto_0
-
-    :cond_27
-    const/16 v0, 0x23
-
-    goto/16 :goto_1
-
-    :sswitch_28
-    const-string v0, "alb"
-
-    invoke-virtual {p0, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
-
-    move-result p0
-
-    if-nez p0, :cond_28
-
-    goto/16 :goto_0
-
-    :cond_28
-    const/16 v0, 0x22
-
-    goto/16 :goto_1
-
-    :sswitch_29
-    const-string v0, "afr"
-
-    invoke-virtual {p0, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
-
-    move-result p0
-
-    if-nez p0, :cond_29
-
-    goto/16 :goto_0
-
-    :cond_29
-    const/16 v0, 0x21
-
-    goto/16 :goto_1
-
-    :sswitch_2a
-    const-string v0, "zu"
-
-    invoke-virtual {p0, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
-
-    move-result p0
-
-    if-nez p0, :cond_2a
-
-    goto/16 :goto_0
-
-    :cond_2a
-    const/16 v0, 0x20
-
-    goto/16 :goto_1
-
-    :sswitch_2b
-    const-string v0, "vi"
-
-    invoke-virtual {p0, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
-
-    move-result p0
-
-    if-nez p0, :cond_2b
-
-    goto/16 :goto_0
-
-    :cond_2b
-    const/16 v0, 0x1f
-
-    goto/16 :goto_1
-
-    :sswitch_2c
-    const-string v0, "tr"
-
-    invoke-virtual {p0, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
-
-    move-result p0
-
-    if-nez p0, :cond_2c
-
-    goto/16 :goto_0
-
-    :cond_2c
-    const/16 v0, 0x1e
-
-    goto/16 :goto_1
-
-    :sswitch_2d
-    const-string v0, "sw"
-
-    invoke-virtual {p0, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
-
-    move-result p0
-
-    if-nez p0, :cond_2d
-
-    goto/16 :goto_0
-
-    :cond_2d
-    const/16 v0, 0x1d
-
-    goto/16 :goto_1
-
-    :sswitch_2e
-    const-string v0, "sv"
-
-    invoke-virtual {p0, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
-
-    move-result p0
-
-    if-nez p0, :cond_2e
-
-    goto/16 :goto_0
-
-    :cond_2e
-    const/16 v0, 0x1c
-
-    goto/16 :goto_1
-
-    :sswitch_2f
-    const-string v0, "sq"
-
-    invoke-virtual {p0, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
-
-    move-result p0
-
-    if-nez p0, :cond_2f
-
-    goto/16 :goto_0
-
-    :cond_2f
-    const/16 v0, 0x1b
-
-    goto/16 :goto_1
-
-    :sswitch_30
-    const-string v0, "sl"
-
-    invoke-virtual {p0, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
-
-    move-result p0
-
-    if-nez p0, :cond_30
-
-    goto/16 :goto_0
-
-    :cond_30
-    const/16 v0, 0x1a
-
-    goto/16 :goto_1
-
-    :sswitch_31
-    const-string v0, "ru"
-
-    invoke-virtual {p0, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
-
-    move-result p0
-
-    if-nez p0, :cond_31
-
-    goto/16 :goto_0
-
-    :cond_31
-    const/16 v0, 0x19
-
-    goto/16 :goto_1
-
-    :sswitch_32
-    const-string v0, "ro"
-
-    invoke-virtual {p0, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
-
-    move-result p0
-
-    if-nez p0, :cond_32
-
-    goto/16 :goto_0
-
-    :cond_32
-    const/16 v0, 0x18
-
-    goto/16 :goto_1
-
-    :sswitch_33
-    const-string v0, "pt"
-
-    invoke-virtual {p0, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
-
-    move-result p0
-
-    if-nez p0, :cond_33
-
-    goto/16 :goto_0
-
-    :cond_33
-    const/16 v0, 0x17
-
-    goto/16 :goto_1
-
-    :sswitch_34
-    const-string v0, "pl"
-
-    invoke-virtual {p0, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
-
-    move-result p0
-
-    if-nez p0, :cond_34
-
-    goto/16 :goto_0
-
-    :cond_34
-    const/16 v0, 0x16
-
-    goto/16 :goto_1
-
-    :sswitch_35
-    const-string v0, "nl"
-
-    invoke-virtual {p0, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
-
-    move-result p0
-
-    if-nez p0, :cond_35
-
-    goto/16 :goto_0
-
-    :cond_35
-    const/16 v0, 0x15
-
-    goto/16 :goto_1
-
-    :sswitch_36
-    const-string v0, "ms"
-
-    invoke-virtual {p0, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
-
-    move-result p0
-
-    if-nez p0, :cond_36
-
-    goto/16 :goto_0
-
-    :cond_36
-    const/16 v0, 0x14
-
-    goto/16 :goto_1
-
-    :sswitch_37
-    const-string v0, "lv"
-
-    invoke-virtual {p0, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
-
-    move-result p0
-
-    if-nez p0, :cond_37
-
-    goto/16 :goto_0
-
-    :cond_37
-    const/16 v0, 0x13
-
-    goto/16 :goto_1
-
-    :sswitch_38
-    const-string v0, "lb"
-
-    invoke-virtual {p0, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
-
-    move-result p0
-
-    if-nez p0, :cond_38
-
-    goto/16 :goto_0
-
-    :cond_38
-    const/16 v0, 0x12
-
-    goto/16 :goto_1
-
-    :sswitch_39
-    const-string v0, "la"
-
-    invoke-virtual {p0, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
-
-    move-result p0
-
-    if-nez p0, :cond_39
-
-    goto/16 :goto_0
-
-    :cond_39
-    const/16 v0, 0x11
-
-    goto/16 :goto_1
-
-    :sswitch_3a
-    const-string v0, "it"
-
-    invoke-virtual {p0, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
-
-    move-result p0
-
-    if-nez p0, :cond_3a
-
-    goto/16 :goto_0
-
-    :cond_3a
-    const/16 v0, 0x10
-
-    goto/16 :goto_1
-
-    :sswitch_3b
-    const-string v0, "is"
-
-    invoke-virtual {p0, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
-
-    move-result p0
-
-    if-nez p0, :cond_3b
-
-    goto/16 :goto_0
-
-    :cond_3b
-    const/16 v0, 0xf
-
-    goto/16 :goto_1
-
-    :sswitch_3c
-    const-string v0, "id"
-
-    invoke-virtual {p0, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
-
-    move-result p0
-
-    if-nez p0, :cond_3c
-
-    goto/16 :goto_0
-
-    :cond_3c
-    const/16 v0, 0xe
-
-    goto/16 :goto_1
-
-    :sswitch_3d
-    const-string v0, "ht"
-
-    invoke-virtual {p0, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
-
-    move-result p0
-
-    if-nez p0, :cond_3d
-
-    goto/16 :goto_0
-
-    :cond_3d
-    const/16 v0, 0xd
-
-    goto/16 :goto_1
-
-    :sswitch_3e
-    const-string v0, "hr"
-
-    invoke-virtual {p0, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
-
-    move-result p0
-
-    if-nez p0, :cond_3e
-
-    goto/16 :goto_0
-
-    :cond_3e
-    const/16 v0, 0xc
-
-    goto/16 :goto_1
-
-    :sswitch_3f
-    const-string v0, "gd"
-
-    invoke-virtual {p0, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
-
-    move-result p0
-
-    if-nez p0, :cond_3f
-
-    goto/16 :goto_0
-
-    :cond_3f
-    const/16 v0, 0xb
-
-    goto/16 :goto_1
-
-    :sswitch_40
-    const-string v0, "ga"
-
-    invoke-virtual {p0, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
-
-    move-result p0
-
-    if-nez p0, :cond_40
-
-    goto/16 :goto_0
-
-    :cond_40
-    const/16 v0, 0xa
-
-    goto/16 :goto_1
-
-    :sswitch_41
-    const-string v0, "fr"
-
-    invoke-virtual {p0, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
-
-    move-result p0
-
-    if-nez p0, :cond_41
-
-    goto/16 :goto_0
-
-    :cond_41
-    const/16 v0, 0x9
-
-    goto/16 :goto_1
-
-    :sswitch_42
-    const-string v0, "fi"
-
-    invoke-virtual {p0, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
-
-    move-result p0
-
-    if-nez p0, :cond_42
-
-    goto/16 :goto_0
-
-    :cond_42
-    const/16 v0, 0x8
-
-    goto :goto_1
-
-    :sswitch_43
-    const-string v0, "et"
-
-    invoke-virtual {p0, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
-
-    move-result p0
-
-    if-nez p0, :cond_43
-
-    goto/16 :goto_0
-
-    :cond_43
-    const/4 v0, 0x7
-
-    goto :goto_1
-
-    :sswitch_44
-    const-string v0, "es"
-
-    invoke-virtual {p0, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
-
-    move-result p0
-
-    if-nez p0, :cond_44
-
-    goto/16 :goto_0
-
-    :cond_44
-    const/4 v0, 0x6
-
-    goto :goto_1
-
-    :sswitch_45
-    const-string v0, "en"
-
-    invoke-virtual {p0, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
-
-    move-result p0
-
-    if-nez p0, :cond_45
-
-    goto/16 :goto_0
-
-    :cond_45
-    const/4 v0, 0x5
-
-    goto :goto_1
-
-    :sswitch_46
+    move-result v0
+    const/16 v4, 0x4 # Greek
+    if-nez v0, :filter
     const-string v0, "el"
-
     invoke-virtual {p0, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
+    move-result v0
+    const/16 v4, 0x4 # Greek
+    if-nez v0, :filter
 
-    move-result p0
-
-    if-nez p0, :cond_46
-
-    goto/16 :goto_0
-
-    :cond_46
-    const/4 v0, 0x4
-
-    goto :goto_1
-
-    :sswitch_47
-    const-string v0, "de"
-
+    const-string v0, "tha"
     invoke-virtual {p0, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
-
-    move-result p0
-
-    if-nez p0, :cond_47
-
-    goto/16 :goto_0
-
-    :cond_47
-    const/4 v0, 0x3
-
-    goto :goto_1
-
-    :sswitch_48
-    const-string v0, "cs"
-
+    move-result v0
+    const/16 v4, 0x8 # Thai
+    if-nez v0, :filter
+    const-string v0, "th"
     invoke-virtual {p0, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
+    move-result v0
+    const/16 v4, 0x8 # Thai
+    if-nez v0, :filter
 
-    move-result p0
+    const/16 v4, 0 # any (default)
 
-    if-nez p0, :cond_48
-
-    goto/16 :goto_0
-
-    :cond_48
-    const/4 v0, 0x2
-
-    goto :goto_1
-
-    :sswitch_49
-    const-string v0, "cr"
-
-    invoke-virtual {p0, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
-
-    move-result p0
-
-    if-nez p0, :cond_49
-
-    goto/16 :goto_0
-
-    :cond_49
-    const/4 v0, 0x1
-
-    goto :goto_1
-
-    :sswitch_4a
-    const-string v1, "af"
-
-    invoke-virtual {p0, v1}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
-
-    move-result p0
-
-    if-nez p0, :cond_4a
-
-    goto/16 :goto_0
-
-    :cond_4a
-    :goto_1
-    packed-switch v0, :pswitch_data_0
-
-    .line 141
-    new-instance p0, Ljava/util/ArrayList;
-
-    invoke-direct {p0}, Ljava/util/ArrayList;-><init>()V
-
-    return-object p0
-
-    :pswitch_0
-    const/4 v2, 0x2
-
-    goto :goto_2
-
-    :pswitch_1
-    const/4 v2, 0x1
-
-    .line 144
-    :goto_2
-    :pswitch_2
-    invoke-static {}, Lcom/faultexception/reader/fonts/Fonts;->getFonts()Ljava/util/List;
-
-    move-result-object p0
-
-    .line 145
+    :filter
     new-instance v0, Ljava/util/ArrayList;
-
     invoke-direct {v0}, Ljava/util/ArrayList;-><init>()V
 
-    .line 146
-    invoke-interface {p0}, Ljava/util/List;->iterator()Ljava/util/Iterator;
-
-    move-result-object p0
-
-    :cond_4b
-    :goto_3
-    invoke-interface {p0}, Ljava/util/Iterator;->hasNext()Z
-
-    move-result v1
-
-    if-eqz v1, :cond_4c
-
-    invoke-interface {p0}, Ljava/util/Iterator;->next()Ljava/lang/Object;
-
+    invoke-static {}, Lcom/faultexception/reader/fonts/Fonts;->getFonts()Ljava/util/List;
     move-result-object v1
+    invoke-interface {v1}, Ljava/util/List;->iterator()Ljava/util/Iterator;
+    move-result-object v1
 
-    check-cast v1, Lcom/faultexception/reader/fonts/Font;
+    :filter_next
+    invoke-interface {v1}, Ljava/util/Iterator;->hasNext()Z
+    move-result v2
+    if-eqz v2, :filter_done
 
-    .line 147
-    iget v3, v1, Lcom/faultexception/reader/fonts/Font;->scripts:I
+    invoke-interface {v1}, Ljava/util/Iterator;->next()Ljava/lang/Object;
+    move-result-object v2
+    check-cast v2, Lcom/faultexception/reader/fonts/Font;
 
-    and-int/2addr v3, v2
+    iget v3, v2, Lcom/faultexception/reader/fonts/Font;->scripts:I
+    and-int/2addr v3, v4
+    if-ne v3, v4, :filter_next
 
-    if-ne v3, v2, :cond_4b
+    invoke-interface {v0, v2}, Ljava/util/List;->add(Ljava/lang/Object;)Z
+    goto :filter_next
 
-    .line 148
-    invoke-interface {v0, v1}, Ljava/util/List;->add(Ljava/lang/Object;)Z
-
-    goto :goto_3
-
-    :cond_4c
+    :filter_done
     return-object v0
-
-    nop
-
-    :sswitch_data_0
-    .sparse-switch
-        0xc25 -> :sswitch_4a
-        0xc6f -> :sswitch_49
-        0xc70 -> :sswitch_48
-        0xc81 -> :sswitch_47
-        0xca7 -> :sswitch_46
-        0xca9 -> :sswitch_45
-        0xcae -> :sswitch_44
-        0xcaf -> :sswitch_43
-        0xcc3 -> :sswitch_42
-        0xccc -> :sswitch_41
-        0xcda -> :sswitch_40
-        0xcdd -> :sswitch_3f
-        0xd0a -> :sswitch_3e
-        0xd0c -> :sswitch_3d
-        0xd1b -> :sswitch_3c
-        0xd2a -> :sswitch_3b
-        0xd2b -> :sswitch_3a
-        0xd75 -> :sswitch_39
-        0xd76 -> :sswitch_38
-        0xd8a -> :sswitch_37
-        0xda6 -> :sswitch_36
-        0xdbe -> :sswitch_35
-        0xdfc -> :sswitch_34
-        0xe04 -> :sswitch_33
-        0xe3d -> :sswitch_32
-        0xe43 -> :sswitch_31
-        0xe59 -> :sswitch_30
-        0xe5e -> :sswitch_2f
-        0xe63 -> :sswitch_2e
-        0xe64 -> :sswitch_2d
-        0xe7e -> :sswitch_2c
-        0xeb3 -> :sswitch_2b
-        0xf3b -> :sswitch_2a
-        0x178ed -> :sswitch_29
-        0x17997 -> :sswitch_28
-        0x18051 -> :sswitch_27
-        0x181d6 -> :sswitch_26
-        0x182ce -> :sswitch_25
-        0x18414 -> :sswitch_24
-        0x18603 -> :sswitch_23
-        0x188a5 -> :sswitch_22
-        0x188de -> :sswitch_21
-        0x18986 -> :sswitch_20
-        0x18c0b -> :sswitch_1f
-        0x18d15 -> :sswitch_1e
-        0x18d19 -> :sswitch_1d
-        0x18f54 -> :sswitch_1c
-        0x1901c -> :sswitch_1b
-        0x19020 -> :sswitch_1a
-        0x190da -> :sswitch_19
-        0x1929b -> :sswitch_18
-        0x194ac -> :sswitch_17
-        0x1968b -> :sswitch_16
-        0x197df -> :sswitch_15
-        0x19882 -> :sswitch_14
-        0x19896 -> :sswitch_13
-        0x1a19f -> :sswitch_12
-        0x1a1a1 -> :sswitch_11
-        0x1a3f2 -> :sswitch_10
-        0x1a565 -> :sswitch_f
-        0x1a77b -> :sswitch_e
-        0x1aa66 -> :sswitch_d
-        0x1b24d -> :sswitch_c
-        0x1b253 -> :sswitch_b
-        0x1b9d1 -> :sswitch_a
-        0x1ba8a -> :sswitch_9
-        0x1ba90 -> :sswitch_8
-        0x1bd3d -> :sswitch_7
-        0x1bda4 -> :sswitch_6
-        0x1bdcb -> :sswitch_5
-        0x1be7d -> :sswitch_4
-        0x1be81 -> :sswitch_3
-        0x1c211 -> :sswitch_2
-        0x1c812 -> :sswitch_1
-        0x1d891 -> :sswitch_0
-    .end sparse-switch
-
-    :pswitch_data_0
-    .packed-switch 0x0
-        :pswitch_1
-        :pswitch_1
-        :pswitch_1
-        :pswitch_1
-        :pswitch_2
-        :pswitch_1
-        :pswitch_1
-        :pswitch_1
-        :pswitch_1
-        :pswitch_1
-        :pswitch_1
-        :pswitch_1
-        :pswitch_1
-        :pswitch_1
-        :pswitch_1
-        :pswitch_1
-        :pswitch_1
-        :pswitch_1
-        :pswitch_1
-        :pswitch_1
-        :pswitch_1
-        :pswitch_1
-        :pswitch_1
-        :pswitch_1
-        :pswitch_1
-        :pswitch_0
-        :pswitch_1
-        :pswitch_1
-        :pswitch_1
-        :pswitch_1
-        :pswitch_1
-        :pswitch_1
-        :pswitch_1
-        :pswitch_1
-        :pswitch_1
-        :pswitch_1
-        :pswitch_1
-        :pswitch_1
-        :pswitch_1
-        :pswitch_1
-        :pswitch_2
-        :pswitch_1
-        :pswitch_1
-        :pswitch_1
-        :pswitch_1
-        :pswitch_1
-        :pswitch_1
-        :pswitch_1
-        :pswitch_1
-        :pswitch_2
-        :pswitch_1
-        :pswitch_1
-        :pswitch_1
-        :pswitch_1
-        :pswitch_1
-        :pswitch_1
-        :pswitch_1
-        :pswitch_1
-        :pswitch_1
-        :pswitch_1
-        :pswitch_1
-        :pswitch_1
-        :pswitch_1
-        :pswitch_1
-        :pswitch_1
-        :pswitch_1
-        :pswitch_0
-        :pswitch_1
-        :pswitch_1
-        :pswitch_1
-        :pswitch_1
-        :pswitch_1
-        :pswitch_1
-        :pswitch_1
-        :pswitch_1
-    .end packed-switch
 .end method
 
 .method public static getFontByName(Ljava/lang/String;)Lcom/faultexception/reader/fonts/Font;
@@ -1799,3 +390,119 @@
     :cond_0
     return-object v0
 .end method
+
+.method private static initCustomFonts(Ljava/util/ArrayList;)V
+    .locals 7
+
+    const-string v1, "Caladea"
+    const-string v2, "Caladea-Regular.ttf"
+    const-string v3, "Caladea-Bold.ttf"
+    const-string v4, "Caladea-Italic.ttf"
+    const-string v5, "Caladea-BoldItalic.ttf"
+    const/16 v6, 0x1 # Latin
+
+    new-instance v0, Lcom/faultexception/reader/fonts/Font;
+    invoke-direct/range {v0 .. v6}, Lcom/faultexception/reader/fonts/Font;-><init>(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;I)V
+    invoke-virtual {p0, v0}, Ljava/util/ArrayList;->add(Ljava/lang/Object;)Z
+
+    const-string v1, "Charis SIL"
+    const-string v2, "CharisSIL-Regular.ttf"
+    const-string v3, "CharisSIL-Bold.ttf"
+    const-string v4, "CharisSIL-Italic.ttf"
+    const-string v5, "CharisSIL-BoldItalic.ttf"
+    const/16 v6, 0x3 # Latin|Cyrillic
+
+    new-instance v0, Lcom/faultexception/reader/fonts/Font;
+    invoke-direct/range {v0 .. v6}, Lcom/faultexception/reader/fonts/Font;-><init>(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;I)V
+    invoke-virtual {p0, v0}, Ljava/util/ArrayList;->add(Ljava/lang/Object;)Z
+
+    const-string v1, "Gentium"
+    const-string v2, "Gentium-Regular.ttf"
+    const-string v3, "Gentium-Bold.ttf"
+    const-string v4, "Gentium-Italic.ttf"
+    const-string v5, "Gentium-BoldItalic.ttf"
+    const/16 v6, 0x7 # Latin|Cyrillic|Greek
+
+    new-instance v0, Lcom/faultexception/reader/fonts/Font;
+    invoke-direct/range {v0 .. v6}, Lcom/faultexception/reader/fonts/Font;-><init>(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;I)V
+    invoke-virtual {p0, v0}, Ljava/util/ArrayList;->add(Ljava/lang/Object;)Z
+
+    const-string v1, "Gentium Book"
+    const-string v2, "GentiumBook-Regular.ttf"
+    const-string v3, "GentiumBook-Bold.ttf"
+    const-string v4, "GentiumBook-Italic.ttf"
+    const-string v5, "GentiumBook-BoldItalic.ttf"
+    const/16 v6, 0x7 # Latin|Cyrillic|Greek
+
+    new-instance v0, Lcom/faultexception/reader/fonts/Font;
+    invoke-direct/range {v0 .. v6}, Lcom/faultexception/reader/fonts/Font;-><init>(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;I)V
+    invoke-virtual {p0, v0}, Ljava/util/ArrayList;->add(Ljava/lang/Object;)Z
+
+    const-string v1, "Kanit"
+    const-string v2, "Kanit-Regular.ttf"
+    const-string v3, "Kanit-Bold.ttf"
+    const-string v4, "Kanit-Italic.ttf"
+    const-string v5, "Kanit-BoldItalic.ttf"
+    const/16 v6, 0x8 # Thai
+
+    new-instance v0, Lcom/faultexception/reader/fonts/Font;
+    invoke-direct/range {v0 .. v6}, Lcom/faultexception/reader/fonts/Font;-><init>(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;I)V
+    invoke-virtual {p0, v0}, Ljava/util/ArrayList;->add(Ljava/lang/Object;)Z
+
+    const-string v1, "Literata"
+    const-string v2, "Literata-Regular.ttf"
+    const-string v3, "Literata-Bold.ttf"
+    const-string v4, "Literata-Italic.ttf"
+    const-string v5, "Literata-BoldItalic.ttf"
+    const/16 v6, 0x7 # Latin|Cyrillic|Greek
+
+    new-instance v0, Lcom/faultexception/reader/fonts/Font;
+    invoke-direct/range {v0 .. v6}, Lcom/faultexception/reader/fonts/Font;-><init>(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;I)V
+    invoke-virtual {p0, v0}, Ljava/util/ArrayList;->add(Ljava/lang/Object;)Z
+
+    const-string v1, "Noto Sans Thai"
+    const-string v2, "NotoSansThai-Regular.ttf"
+    const-string v3, "NotoSansThai-Bold.ttf"
+    const/4 v4, 0x0
+    const/4 v5, 0x0
+    const/16 v6, 0x8 # Thai
+
+    new-instance v0, Lcom/faultexception/reader/fonts/Font;
+    invoke-direct/range {v0 .. v6}, Lcom/faultexception/reader/fonts/Font;-><init>(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;I)V
+    invoke-virtual {p0, v0}, Ljava/util/ArrayList;->add(Ljava/lang/Object;)Z
+
+    const-string v1, "Sarabun"
+    const-string v2, "Sarabun-Regular.ttf"
+    const-string v3, "Sarabun-Bold.ttf"
+    const-string v4, "Sarabun-Italic.ttf"
+    const-string v5, "Sarabun-BoldItalic.ttf"
+    const/16 v6, 0x8 # Thai
+
+    new-instance v0, Lcom/faultexception/reader/fonts/Font;
+    invoke-direct/range {v0 .. v6}, Lcom/faultexception/reader/fonts/Font;-><init>(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;I)V
+    invoke-virtual {p0, v0}, Ljava/util/ArrayList;->add(Ljava/lang/Object;)Z
+
+    const-string v1, "Source Serif 4"
+    const-string v2, "SourceSerif-Regular.ttf"
+    const-string v3, "SourceSerif-Bold.ttf"
+    const-string v4, "SourceSerif-Italic.ttf"
+    const-string v5, "SourceSerif-BoldItalic.ttf"
+    const/16 v6, 0x7 # Latin|Cyrillic|Greek
+
+    new-instance v0, Lcom/faultexception/reader/fonts/Font;
+    invoke-direct/range {v0 .. v6}, Lcom/faultexception/reader/fonts/Font;-><init>(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;I)V
+    invoke-virtual {p0, v0}, Ljava/util/ArrayList;->add(Ljava/lang/Object;)Z
+
+    const-string v1, "Spectral"
+    const-string v2, "Spectral-Regular.ttf"
+    const-string v3, "Spectral-Bold.ttf"
+    const-string v4, "Spectral-Italic.ttf"
+    const-string v5, "Spectral-BoldItalic.ttf"
+    const/16 v6, 0x3 # Latin|Cyrillic
+
+    new-instance v0, Lcom/faultexception/reader/fonts/Font;
+    invoke-direct/range {v0 .. v6}, Lcom/faultexception/reader/fonts/Font;-><init>(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;I)V
+    invoke-virtual {p0, v0}, Ljava/util/ArrayList;->add(Ljava/lang/Object;)Z
+
+    return-void
+.end method
--- a/smali/com/faultexception/reader/db/ThemesTable.smali
+++ b/smali/com/faultexception/reader/db/ThemesTable.smali
@@ -70,30 +70,40 @@
 
     move-result-object v0
 
-    const/4 v1, 0x3
-
+    const v1, 8
     new-array v1, v1, [Ljava/lang/String;
-
-    const/4 v2, 0x0
-
+    const v2, 0
     const-string v3, "04fd477e-bdbb-4dea-8f38-6bead547a00b"
-
     aput-object v3, v1, v2
-
-    const/4 v2, 0x1
-
+    invoke-virtual {v0, v1}, Lcom/faultexception/reader/sync/SyncDataDefinition;->setFixedSyncIds([Ljava/lang/String;)Lcom/faultexception/reader/sync/SyncDataDefinition;
+    const v2, 1
     const-string v3, "f9715217-d3bb-41e3-974c-71e0ffaeee0b"
-
     aput-object v3, v1, v2
-
-    const/4 v2, 0x2
-
+    invoke-virtual {v0, v1}, Lcom/faultexception/reader/sync/SyncDataDefinition;->setFixedSyncIds([Ljava/lang/String;)Lcom/faultexception/reader/sync/SyncDataDefinition;
+    const v2, 2
     const-string v3, "4948c360-f7cb-42b7-af6a-cf3431145f41"
-
     aput-object v3, v1, v2
-
-    .line 37
     invoke-virtual {v0, v1}, Lcom/faultexception/reader/sync/SyncDataDefinition;->setFixedSyncIds([Ljava/lang/String;)Lcom/faultexception/reader/sync/SyncDataDefinition;
+    const v2, 3
+    const-string v3, "60c8419a-ca5a-427f-b92a-79e69b2745bb"
+    aput-object v3, v1, v2
+    invoke-virtual {v0, v1}, Lcom/faultexception/reader/sync/SyncDataDefinition;->setFixedSyncIds([Ljava/lang/String;)Lcom/faultexception/reader/sync/SyncDataDefinition;
+    const v2, 4
+    const-string v3, "f20ec453-c903-4dcd-a61c-d06a1567c37b"
+    aput-object v3, v1, v2
+    invoke-virtual {v0, v1}, Lcom/faultexception/reader/sync/SyncDataDefinition;->setFixedSyncIds([Ljava/lang/String;)Lcom/faultexception/reader/sync/SyncDataDefinition;
+    const v2, 5
+    const-string v3, "397903d7-b301-45c3-8064-fed7a2618e25"
+    aput-object v3, v1, v2
+    invoke-virtual {v0, v1}, Lcom/faultexception/reader/sync/SyncDataDefinition;->setFixedSyncIds([Ljava/lang/String;)Lcom/faultexception/reader/sync/SyncDataDefinition;
+    const v2, 6
+    const-string v3, "298fb36c-b91e-4e73-9ef5-3a23b0300666"
+    aput-object v3, v1, v2
+    invoke-virtual {v0, v1}, Lcom/faultexception/reader/sync/SyncDataDefinition;->setFixedSyncIds([Ljava/lang/String;)Lcom/faultexception/reader/sync/SyncDataDefinition;
+    const v2, 7
+    const-string v3, "3ef38676-5531-4351-b20a-a83359e8b546"
+    aput-object v3, v1, v2
+    invoke-virtual {v0, v1}, Lcom/faultexception/reader/sync/SyncDataDefinition;->setFixedSyncIds([Ljava/lang/String;)Lcom/faultexception/reader/sync/SyncDataDefinition;
 
     move-result-object v0
 
--- a/smali/com/faultexception/reader/themes/ThemeManager.smali
+++ b/smali/com/faultexception/reader/themes/ThemeManager.smali
@@ -992,163 +992,22 @@
 .end method
 
 .method public static removeDuplicatedBuiltinThemes(Landroid/database/sqlite/SQLiteDatabase;)V
-    .locals 11
 
-    const-string v0, "SELECT _id,_sync_id FROM themes WHERE builtin=1 ORDER BY _id ASC"
-
-    const/4 v1, 0x0
-
-    .line 360
-    invoke-virtual {p0, v0, v1}, Landroid/database/sqlite/SQLiteDatabase;->rawQuery(Ljava/lang/String;[Ljava/lang/String;)Landroid/database/Cursor;
-
-    move-result-object v0
-
-    .line 363
-    invoke-interface {v0}, Landroid/database/Cursor;->getCount()I
-
-    move-result v1
-
-    const/4 v2, 0x3
-
-    if-ne v1, v2, :cond_0
-
-    .line 364
-    invoke-interface {v0}, Landroid/database/Cursor;->close()V
-
+    .locals 2
+    move-object v0, p0
+    invoke-virtual {v0}, Landroid/database/sqlite/SQLiteDatabase;->beginTransaction()V
+    :try1_try
+    const-string v1, "DELETE FROM themes WHERE builtin = 1 AND _sync_id IS NOT NULL AND _sync_id != '' AND _id NOT IN (SELECT min(_id) FROM themes WHERE builtin = 1 AND _sync_id IS NOT NULL AND _sync_id != '' GROUP BY _sync_id);"
+    invoke-virtual {v0, v1}, Landroid/database/sqlite/SQLiteDatabase;->execSQL(Ljava/lang/String;)V
+    invoke-virtual {v0}, Landroid/database/sqlite/SQLiteDatabase;->setTransactionSuccessful()V
+    :try1_end
+    .catchall {:try1_try .. :try1_end} :try1_catch
+    invoke-virtual {v0}, Landroid/database/sqlite/SQLiteDatabase;->endTransaction()V
     return-void
-
-    :cond_0
-    const/4 v1, 0x0
-
-    const/4 v2, 0x0
-
-    const/4 v3, 0x0
-
-    const/4 v4, 0x0
-
-    .line 371
-    :goto_0
-    invoke-interface {v0}, Landroid/database/Cursor;->moveToNext()Z
-
-    move-result v5
-
-    if-eqz v5, :cond_5
-
-    .line 372
-    invoke-interface {v0, v1}, Landroid/database/Cursor;->getLong(I)J
-
-    move-result-wide v5
-
-    const/4 v7, 0x1
-
-    .line 373
-    invoke-interface {v0, v7}, Landroid/database/Cursor;->getString(I)Ljava/lang/String;
-
-    move-result-object v8
-
-    const-string v9, "f9715217-d3bb-41e3-974c-71e0ffaeee0b"
-
-    .line 375
-    invoke-virtual {v9, v8}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
-
-    move-result v9
-
-    if-eqz v9, :cond_1
-
-    move v8, v4
-
-    move v4, v3
-
-    const/4 v3, 0x1
-
-    goto :goto_1
-
-    :cond_1
-    const-string v9, "04fd477e-bdbb-4dea-8f38-6bead547a00b"
-
-    .line 380
-    invoke-virtual {v9, v8}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
-
-    move-result v9
-
-    if-eqz v9, :cond_2
-
-    move v8, v4
-
-    const/4 v4, 0x1
-
-    move v10, v3
-
-    move v3, v2
-
-    move v2, v10
-
-    goto :goto_1
-
-    :cond_2
-    const-string v9, "4948c360-f7cb-42b7-af6a-cf3431145f41"
-
-    .line 385
-    invoke-virtual {v9, v8}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
-
-    move-result v8
-
-    if-eqz v8, :cond_3
-
-    const/4 v8, 0x1
-
-    move v10, v3
-
-    move v3, v2
-
-    move v2, v4
-
-    move v4, v10
-
-    goto :goto_1
-
-    :cond_3
-    move v8, v4
-
-    move v4, v3
-
-    move v3, v2
-
-    const/4 v2, 0x0
-
-    :goto_1
-    if-eqz v2, :cond_4
-
-    new-array v2, v7, [Ljava/lang/String;
-
-    .line 394
-    invoke-static {v5, v6}, Ljava/lang/String;->valueOf(J)Ljava/lang/String;
-
-    move-result-object v5
-
-    aput-object v5, v2, v1
-
-    const-string v5, "themes"
-
-    const-string v6, "_id=?"
-
-    .line 393
-    invoke-virtual {p0, v5, v6, v2}, Landroid/database/sqlite/SQLiteDatabase;->delete(Ljava/lang/String;Ljava/lang/String;[Ljava/lang/String;)I
-
-    :cond_4
-    move v2, v3
-
-    move v3, v4
-
-    move v4, v8
-
-    goto :goto_0
-
-    .line 397
-    :cond_5
-    invoke-interface {v0}, Landroid/database/Cursor;->close()V
-
-    return-void
+    :try1_catch
+    move-exception v1
+    invoke-virtual {v0}, Landroid/database/sqlite/SQLiteDatabase;->endTransaction()V
+    throw v1
 .end method
 
 
--- a/smali/com/faultexception/reader/themes/ThemeManager.smali
+++ b/smali/com/faultexception/reader/themes/ThemeManager.smali
@@ -737,7 +737,7 @@
 
     .line 336
     invoke-virtual/range {p0 .. p0}, Landroid/database/sqlite/SQLiteDatabase;->endTransaction()V
-
+    invoke-static/range {p0 .. p0}, Lcom/faultexception/reader/themes/ThemeManager;->updateCustomBuiltinThemes(Landroid/database/sqlite/SQLiteDatabase;)V
     return-void
 
     :catchall_0
--- a/smali/com/faultexception/reader/themes/ThemeManager.smali
+++ b/smali/com/faultexception/reader/themes/ThemeManager.smali
@@ -660,6 +660,59 @@
     return-void
 .end method
 
+.method public static updateCustomBuiltinThemes(Landroid/database/sqlite/SQLiteDatabase;)V
+    .locals 6
+    move-object v0, p0
+    invoke-virtual {v0}, Landroid/database/sqlite/SQLiteDatabase;->beginTransaction()V
+    :try1_try
+    invoke-static {}, Ljava/lang/System;->currentTimeMillis()J
+    move-result-wide v3
+    invoke-static {v3, v4}, Ljava/lang/String;->valueOf(J)Ljava/lang/String;
+    move-result-object v3
+    const-string v2, "NOW"
+    const-string v1, "INSERT INTO themes (_sync_id, name, builtin, hidden, position, created_date, modified_date, bg_color_timestamp, text_color_timestamp, link_color_timestamp, use_dark_chrome_timestamp) SELECT '60c8419a-ca5a-427f-b92a-79e69b2745bb', 'Sepia Dark', 1, 0, 3, NOW, NOW, NOW, NOW, NOW, NOW WHERE NOT EXISTS (SELECT _sync_id FROM themes WHERE _sync_id = '60c8419a-ca5a-427f-b92a-79e69b2745bb')"
+    invoke-virtual {v1, v2, v3}, Ljava/lang/String;->replace(Ljava/lang/CharSequence;Ljava/lang/CharSequence;)Ljava/lang/String;
+    move-result-object v1
+    invoke-virtual {v0, v1}, Landroid/database/sqlite/SQLiteDatabase;->execSQL(Ljava/lang/String;)V
+    const-string v1, "INSERT INTO themes (_sync_id, name, builtin, hidden, position, created_date, modified_date, bg_color_timestamp, text_color_timestamp, link_color_timestamp, use_dark_chrome_timestamp) SELECT 'f20ec453-c903-4dcd-a61c-d06a1567c37b', 'Sepia Dark Dimmed', 1, 0, 4, NOW, NOW, NOW, NOW, NOW, NOW WHERE NOT EXISTS (SELECT _sync_id FROM themes WHERE _sync_id = 'f20ec453-c903-4dcd-a61c-d06a1567c37b')"
+    invoke-virtual {v1, v2, v3}, Ljava/lang/String;->replace(Ljava/lang/CharSequence;Ljava/lang/CharSequence;)Ljava/lang/String;
+    move-result-object v1
+    invoke-virtual {v0, v1}, Landroid/database/sqlite/SQLiteDatabase;->execSQL(Ljava/lang/String;)V
+    const-string v1, "INSERT INTO themes (_sync_id, name, builtin, hidden, position, created_date, modified_date, bg_color_timestamp, text_color_timestamp, link_color_timestamp, use_dark_chrome_timestamp) SELECT '397903d7-b301-45c3-8064-fed7a2618e25', 'Ash', 1, 0, 5, NOW, NOW, NOW, NOW, NOW, NOW WHERE NOT EXISTS (SELECT _sync_id FROM themes WHERE _sync_id = '397903d7-b301-45c3-8064-fed7a2618e25')"
+    invoke-virtual {v1, v2, v3}, Ljava/lang/String;->replace(Ljava/lang/CharSequence;Ljava/lang/CharSequence;)Ljava/lang/String;
+    move-result-object v1
+    invoke-virtual {v0, v1}, Landroid/database/sqlite/SQLiteDatabase;->execSQL(Ljava/lang/String;)V
+    const-string v1, "INSERT INTO themes (_sync_id, name, builtin, hidden, position, created_date, modified_date, bg_color_timestamp, text_color_timestamp, link_color_timestamp, use_dark_chrome_timestamp) SELECT '298fb36c-b91e-4e73-9ef5-3a23b0300666', 'Ocean', 1, 0, 6, NOW, NOW, NOW, NOW, NOW, NOW WHERE NOT EXISTS (SELECT _sync_id FROM themes WHERE _sync_id = '298fb36c-b91e-4e73-9ef5-3a23b0300666')"
+    invoke-virtual {v1, v2, v3}, Ljava/lang/String;->replace(Ljava/lang/CharSequence;Ljava/lang/CharSequence;)Ljava/lang/String;
+    move-result-object v1
+    invoke-virtual {v0, v1}, Landroid/database/sqlite/SQLiteDatabase;->execSQL(Ljava/lang/String;)V
+    const-string v1, "INSERT INTO themes (_sync_id, name, builtin, hidden, position, created_date, modified_date, bg_color_timestamp, text_color_timestamp, link_color_timestamp, use_dark_chrome_timestamp) SELECT '3ef38676-5531-4351-b20a-a83359e8b546', 'Ice', 1, 0, 7, NOW, NOW, NOW, NOW, NOW, NOW WHERE NOT EXISTS (SELECT _sync_id FROM themes WHERE _sync_id = '3ef38676-5531-4351-b20a-a83359e8b546')"
+    invoke-virtual {v1, v2, v3}, Ljava/lang/String;->replace(Ljava/lang/CharSequence;Ljava/lang/CharSequence;)Ljava/lang/String;
+    move-result-object v1
+    invoke-virtual {v0, v1}, Landroid/database/sqlite/SQLiteDatabase;->execSQL(Ljava/lang/String;)V
+    const-string v1, "UPDATE themes SET position = 3, bg_color = 0, text_color = 12689981, link_color = 15785577, use_dark_chrome = 1 WHERE _sync_id = '60c8419a-ca5a-427f-b92a-79e69b2745bb' AND created_date = bg_color_timestamp AND created_date = text_color_timestamp AND created_date = link_color_timestamp AND created_date = use_dark_chrome_timestamp;"
+    invoke-virtual {v0, v1}, Landroid/database/sqlite/SQLiteDatabase;->execSQL(Ljava/lang/String;)V
+    const-string v1, "UPDATE themes SET position = 4, bg_color = 0, text_color = 7560723, link_color = 8220961, use_dark_chrome = 1 WHERE _sync_id = 'f20ec453-c903-4dcd-a61c-d06a1567c37b' AND created_date = bg_color_timestamp AND created_date = text_color_timestamp AND created_date = link_color_timestamp AND created_date = use_dark_chrome_timestamp;"
+    invoke-virtual {v0, v1}, Landroid/database/sqlite/SQLiteDatabase;->execSQL(Ljava/lang/String;)V
+    const-string v1, "UPDATE themes SET position = 5, bg_color = 1908769, text_color = 15457202, link_color = 16740445, use_dark_chrome = 1 WHERE _sync_id = '397903d7-b301-45c3-8064-fed7a2618e25' AND created_date = bg_color_timestamp AND created_date = text_color_timestamp AND created_date = link_color_timestamp AND created_date = use_dark_chrome_timestamp;"
+    invoke-virtual {v0, v1}, Landroid/database/sqlite/SQLiteDatabase;->execSQL(Ljava/lang/String;)V
+    const-string v1, "UPDATE themes SET position = 6, bg_color = 78161, text_color = 14811120, link_color = 9891945, use_dark_chrome = 1 WHERE _sync_id = '298fb36c-b91e-4e73-9ef5-3a23b0300666' AND created_date = bg_color_timestamp AND created_date = text_color_timestamp AND created_date = link_color_timestamp AND created_date = use_dark_chrome_timestamp;"
+    invoke-virtual {v0, v1}, Landroid/database/sqlite/SQLiteDatabase;->execSQL(Ljava/lang/String;)V
+    const-string v1, "UPDATE themes SET position = 7, bg_color = 14545919, text_color = 12691, link_color = 2981887, use_dark_chrome = 1 WHERE _sync_id = '3ef38676-5531-4351-b20a-a83359e8b546' AND created_date = bg_color_timestamp AND created_date = text_color_timestamp AND created_date = link_color_timestamp AND created_date = use_dark_chrome_timestamp;"
+    invoke-virtual {v0, v1}, Landroid/database/sqlite/SQLiteDatabase;->execSQL(Ljava/lang/String;)V
+    const-string v1, "DELETE FROM themes WHERE builtin = 1 AND _sync_id NOT IN ('04fd477e-bdbb-4dea-8f38-6bead547a00b','f9715217-d3bb-41e3-974c-71e0ffaeee0b','4948c360-f7cb-42b7-af6a-cf3431145f41','60c8419a-ca5a-427f-b92a-79e69b2745bb','f20ec453-c903-4dcd-a61c-d06a1567c37b','397903d7-b301-45c3-8064-fed7a2618e25','298fb36c-b91e-4e73-9ef5-3a23b0300666','3ef38676-5531-4351-b20a-a83359e8b546');"
+    invoke-virtual {v0, v1}, Landroid/database/sqlite/SQLiteDatabase;->execSQL(Ljava/lang/String;)V
+    invoke-virtual {v0}, Landroid/database/sqlite/SQLiteDatabase;->setTransactionSuccessful()V
+    :try1_end
+    .catchall {:try1_try .. :try1_end} :try1_catch
+    invoke-virtual {v0}, Landroid/database/sqlite/SQLiteDatabase;->endTransaction()V
+    return-void
+    :try1_catch
+    move-exception v1
+    invoke-virtual {v0}, Landroid/database/sqlite/SQLiteDatabase;->endTransaction()V
+    throw v1
+.end method
+
 .method public static createBuiltinThemes(Landroid/database/sqlite/SQLiteDatabase;Z)V
     .locals 18
 
@@ -1305,6 +1358,8 @@
     .line 58
     iget-object v0, p0, Lcom/faultexception/reader/themes/ThemeManager;->mDb:Landroid/database/sqlite/SQLiteDatabase;
 
+    invoke-static {v0}, Lcom/faultexception/reader/themes/ThemeManager;->updateCustomBuiltinThemes(Landroid/database/sqlite/SQLiteDatabase;)V
+
     sget-object v2, Lcom/faultexception/reader/themes/ThemeManager;->SELECTION:[Ljava/lang/String;
 
     const-string v1, "themes"
--- a/res/xml/preferences.xml
+++ b/res/xml/preferences.xml
@@ -3,6 +3,7 @@
   xmlns:android="http://schemas.android.com/apk/res/android">
     <SwitchPreferenceCompat android:title="@string/pref_keep_screen_on_title" android:key="keep_screen_on" android:defaultValue="true" />
     <SwitchPreferenceCompat android:title="@string/pref_fullscreen_title" android:key="fullscreen" android:defaultValue="true" />
+    <SwitchPreferenceCompat android:title="Fullscreen reading full-bleed" android:key="fullscreen_bleed" android:defaultValue="true" />
     <ListPreference android:persistent="false" android:title="@string/pref_app_theme_title" android:key="app_theme" android:summary="%s" android:negativeButtonText="@null" />
     <Preference android:title="@string/pref_backups" android:key="backups" />
     <Preference android:title="@string/pref_sync" android:key="sync" android:summary="@string/pref_sync_off" />
--- a/smali/com/faultexception/reader/ReaderActivity.smali
+++ b/smali/com/faultexception/reader/ReaderActivity.smali
@@ -5043,6 +5043,8 @@
     invoke-interface {v2}, Landroid/database/Cursor;->close()V
 
     return-void
+
+
 .end method
 
 .method public onCreateOptionsMenu(Landroid/view/Menu;)Z
@@ -6406,6 +6408,45 @@
     return-void
 .end method
 
+.method private maybeSetDisplayCutoutBackground(I)V
+    .locals 3
+
+    # only if fullscreen active
+    iget-boolean v0, p0, Lcom/faultexception/reader/ReaderActivity;->mFullscreenEnabled:Z
+    if-eqz v0, :end
+
+    # only if fullscreen full-bleed enabled
+    invoke-static {p0}, Landroid/preference/PreferenceManager;->getDefaultSharedPreferences(Landroid/content/Context;)Landroid/content/SharedPreferences;
+    move-result-object v0
+    const-string v1, "fullscreen_bleed"
+    const/4 v2, 0x0
+    invoke-interface {v0, v1, v2}, Landroid/content/SharedPreferences;->getBoolean(Ljava/lang/String;Z)Z
+    move-result v0
+    if-eqz v0, :end
+
+    # reader content cutout frame
+    sget v0, Lcom/faultexception/reader/R$id;->content_high_cutout_frame:I
+    invoke-virtual {p0, v0}, Lcom/faultexception/reader/ReaderActivity;->findViewById(I)Landroid/view/View;
+    move-result-object v0
+    check-cast v0, Lcom/faultexception/reader/widget/DisplayCutoutFrameLayout;
+    invoke-virtual {v0, p1}, Lcom/faultexception/reader/widget/DisplayCutoutFrameLayout;->setInsetCutoutColor(I)V
+
+    # reader content frame
+    sget v0, Lcom/faultexception/reader/R$id;->content_high_frame:I
+    invoke-virtual {p0, v0}, Lcom/faultexception/reader/ReaderActivity;->findViewById(I)Landroid/view/View;
+    move-result-object v0
+    check-cast v0, Lcom/faultexception/reader/widget/SystemBarsFrame;
+    invoke-virtual {v0, p1}, Lcom/faultexception/reader/widget/SystemBarsFrame;->setSystemBarsBackgroundColor(I)V
+
+    # reader content loading
+    iget-object v0, p0, Lcom/faultexception/reader/ReaderActivity;->mBookContainerView:Lcom/faultexception/reader/widget/DisplayCutoutFrameLayout;
+    if-eqz v0, :end
+    invoke-virtual {v0, p1}, Lcom/faultexception/reader/widget/DisplayCutoutFrameLayout;->setInsetCutoutColor(I)V
+
+    :end
+    return-void
+.end method
+
 .method public setTheme(Lcom/faultexception/reader/themes/Theme;)V
     .locals 5
 
@@ -6425,6 +6466,8 @@
 
     .line 1330
     :goto_0
+
+    invoke-direct {p0, v1}, Lcom/faultexception/reader/ReaderActivity;->maybeSetDisplayCutoutBackground(I)V
     iget-object v2, p0, Lcom/faultexception/reader/ReaderActivity;->mBookView:Lcom/faultexception/reader/content/BookView;
 
     if-eqz v2, :cond_1
--- a/smali/com/faultexception/reader/widget/DisplayCutoutFrameLayout.smali
+++ b/smali/com/faultexception/reader/widget/DisplayCutoutFrameLayout.smali
@@ -261,6 +261,20 @@
     return-void
 .end method
 
+.method public setInsetCutoutColor(I)V
+    .locals 1
+
+    iget-boolean v0, p0, Lcom/faultexception/reader/widget/DisplayCutoutFrameLayout;->mPaintCutout:Z
+    if-eqz v0, :end
+
+    new-instance v0, Landroid/graphics/drawable/ColorDrawable;
+    invoke-direct {v0, p1}, Landroid/graphics/drawable/ColorDrawable;-><init>(I)V
+    iput-object v0, p0, Lcom/faultexception/reader/widget/DisplayCutoutFrameLayout;->mColor:Landroid/graphics/drawable/ColorDrawable;
+
+    :end
+    return-void
+.end method
+
 .method public setInsetCutout(I)V
     .locals 4
 
--- a/res/xml/preferences.xml
+++ b/res/xml/preferences.xml
@@ -26,6 +26,7 @@
     </PreferenceCategory>
 
     <PreferenceCategory android:title="@string/pref_category_advanced">
+        <SwitchPreferenceCompat android:title="Hide footer slider (reader)" android:key="hide_reader_footer" android:defaultValue="false" />
         <SwitchPreferenceCompat android:title="Hide footer (grid view)" android:key="only_covers" android:defaultValue="false" />
         <com.faultexception.reader.library.LibraryFolderPreference android:title="@string/pref_library_folder_title" android:key="library_folder" />
         <SwitchPreferenceCompat android:title="@string/pref_folders_in_drawer_title" android:key="folders_in_drawer" android:defaultValue="false" />
--- a/smali/com/faultexception/reader/ReaderActivity.smali
+++ b/smali/com/faultexception/reader/ReaderActivity.smali
@@ -4121,6 +4121,26 @@
     return-void
 .end method
 
+                .method private applyHideFooterSlider()V
+                    .locals 3
+                    const/4 v2, 0x0
+                    iget-object v0, p0, Lcom/faultexception/reader/ReaderActivity;->mPrefs:Landroid/content/SharedPreferences;
+                    const-string v1, "hide_reader_footer"
+                    invoke-interface {v0, v1, v2}, Landroid/content/SharedPreferences;->getBoolean(Ljava/lang/String;Z)Z
+                    move-result v2
+                    if-eqz v2, :lith_patch_hfs_show
+                    iget-object v0, p0, Lcom/faultexception/reader/ReaderActivity;->mPageSeekView:Landroid/widget/SeekBar;
+                    const/16 v1, 0x8
+                    invoke-virtual {v0, v1}, Landroid/view/View;->setVisibility(I)V
+                    return-void
+                    :lith_patch_hfs_show
+                    iget-object v0, p0, Lcom/faultexception/reader/ReaderActivity;->mPageSeekView:Landroid/widget/SeekBar;
+                    const/4 v1, 0x0
+                    invoke-virtual {v0, v1}, Landroid/view/View;->setVisibility(I)V
+                    return-void
+                .end method
+                
+
 .method protected onCreate(Landroid/os/Bundle;)V
     .locals 17
 
@@ -4706,6 +4726,8 @@
     .line 373
     invoke-virtual {v2, v0}, Landroid/widget/SeekBar;->setOnSeekBarChangeListener(Landroid/widget/SeekBar$OnSeekBarChangeListener;)V
 
+    invoke-direct {v0}, Lcom/faultexception/reader/ReaderActivity;->applyHideFooterSlider()V
+
     const v2, 0x7f090187
 
     .line 375
@@ -5939,6 +5961,9 @@
     .line 731
     invoke-super {p0}, Lcom/faultexception/reader/BaseActivity;->onResume()V
 
+                        invoke-direct {p0}, Lcom/faultexception/reader/ReaderActivity;->applyHideFooterSlider()V
+                    
+
     .line 733
     iget-boolean v0, p0, Lcom/faultexception/reader/ReaderActivity;->mBackupWasRestored:Z
 
--- a/assets/js/epub.js
+++ b/assets/js/epub.js
@@ -24,6 +24,7 @@
     var pageProperties = {};
     var marginPercent = 0;
     var lineSpacing = void 0;
+    var hyphenation = void 0;
     var textAlign = void 0;
     var showcasedImageElement = void 0;
     var currentFont = void 0;
@@ -598,6 +599,12 @@
         reflowIfNecessary();
     }
 
+    function setHyphenation(hyp) {
+        hyphenation = hyp;
+        updateStyleElement();
+        reflowIfNecessary();
+    }
+
     function setTextAlign(align) {
         textAlign = align;
         updateStyleElement();
@@ -616,6 +623,7 @@
                 style += 'text-align: justify !important;';
                 break;
         }
+        style += hyphenation ? '-webkit-hyphens: auto; -webkit-hyphenate-limit-chars: 6 3 3; -webkit-hyphenate-limit-last: always; hyphens: auto; hyphenate-limit-chars: 6 3 3; hyphenate-limit-last: always; hyphenate-limit-zone: 8%; hyphenate-limit-lines: 2;' : '-webkit-hyphens: none; hyphens: none;';
         styleElement.innerText = specificitySelector + ' * { ' + style + ' }';
     }
 
@@ -792,6 +800,7 @@
         setMargin: setMargin,
         setFont: setFont,
         setLineSpacing: setLineSpacing,
+        setHyphenation: setHyphenation,
         setTextAlign: setTextAlign
     };
 }();
--- a/smali/com/faultexception/reader/content/BookView.smali
+++ b/smali/com/faultexception/reader/content/BookView.smali
@@ -277,6 +277,12 @@
     return-void
 .end method
 
+.method public setHyphenation(Z)V
+    .locals 0
+
+    return-void
+.end method
+
 .method public setTextAlign(I)V
     .locals 0
 
--- a/smali/com/faultexception/reader/content/ContentView.smali
+++ b/smali/com/faultexception/reader/content/ContentView.smali
@@ -184,6 +184,12 @@
     return-void
 .end method
 
+.method public setHyphenation(Z)V
+    .locals 0
+
+    return-void
+.end method
+
 .method public setTextAlign(I)V
     .locals 0
 
--- a/smali/com/faultexception/reader/content/HtmlContentView.smali
+++ b/smali/com/faultexception/reader/content/HtmlContentView.smali
@@ -350,6 +350,16 @@
     return-void
 .end method
 
+.method public setHyphenation(Z)V
+    .locals 1
+
+    iget-object v0, p0, Lcom/faultexception/reader/content/HtmlContentView;->mContentWebView:Lcom/faultexception/reader/content/HtmlContentWebView;
+
+    invoke-virtual {v0, p1}, Lcom/faultexception/reader/content/HtmlContentWebView;->setHyphenation(Z)V
+
+    return-void
+.end method
+
 .method public setTextAlign(I)V
     .locals 1
 
--- a/smali/com/faultexception/reader/content/EPubBookView.smali
+++ b/smali/com/faultexception/reader/content/EPubBookView.smali
@@ -62,6 +62,7 @@
 
 .field private mRendition:Lcom/faultexception/reader/book/Rendition;
 
+.field private mHyphenation:Z
 .field private mTextAlign:I
 
 .field private mTextSize:I
@@ -2286,6 +2287,16 @@
     return-void
 .end method
 
+.method public setHyphenation(Z)V
+    .locals 1
+    iput-boolean p1, p0, Lcom/faultexception/reader/content/EPubBookView;->mHyphenation:Z
+    iget-object v0, p0, Lcom/faultexception/reader/content/EPubBookView;->mContentView:Lcom/faultexception/reader/content/ContentView;
+    if-eqz v0, :cond_0
+    invoke-virtual {v0, p1}, Lcom/faultexception/reader/content/ContentView;->setHyphenation(Z)V
+    :cond_0
+    return-void
+.end method
+
 .method public setTextAlign(I)V
     .locals 1
 
--- a/smali/com/faultexception/reader/content/HtmlContentWebView.smali
+++ b/smali/com/faultexception/reader/content/HtmlContentWebView.smali
@@ -113,6 +113,7 @@
 
 .field private mScrollYAnimator:Landroid/animation/ObjectAnimator;
 
+.field private mHyphenation:Z
 .field private mTextAlign:I
 
 .field private mTextSize:I
@@ -1685,6 +1686,11 @@
 
     invoke-virtual {v5, v3}, Ljava/lang/StringBuilder;->append(F)Ljava/lang/StringBuilder;
 
+    const-string v3, ");   LithiumJs.setHyphenation("
+    invoke-virtual {v5, v3}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
+    iget-boolean v3, p0, Lcom/faultexception/reader/content/HtmlContentWebView;->mHyphenation:Z
+    invoke-virtual {v5, v3}, Ljava/lang/StringBuilder;->append(Z)Ljava/lang/StringBuilder;
+
     const-string v3, ");   LithiumJs.setTextAlign("
 
     invoke-virtual {v5, v3}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
@@ -4020,6 +4026,27 @@
     return-void
 .end method
 
+.method public setHyphenation(Z)V
+    .locals 2
+    iput-boolean p1, p0, Lcom/faultexception/reader/content/HtmlContentWebView;->mHyphenation:Z
+    iget-object v0, p0, Lcom/faultexception/reader/content/HtmlContentWebView;->mUrl:Ljava/lang/String;
+    if-eqz v0, :cond_0
+    iget-boolean v0, p0, Lcom/faultexception/reader/content/HtmlContentWebView;->mDisplaySettingsInjected:Z
+    if-eqz v0, :cond_0
+    new-instance v0, Ljava/lang/StringBuilder;
+    invoke-direct {v0}, Ljava/lang/StringBuilder;-><init>()V
+    const-string v1, "LithiumJs.setHyphenation("
+    invoke-virtual {v0, v1}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
+    invoke-virtual {v0, p1}, Ljava/lang/StringBuilder;->append(Z)Ljava/lang/StringBuilder;
+    const-string p1, ")"
+    invoke-virtual {v0, p1}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
+    invoke-virtual {v0}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;
+    move-result-object p1
+    invoke-virtual {p0, p1}, Lcom/faultexception/reader/content/HtmlContentWebView;->executeJavascript(Ljava/lang/String;)V
+    :cond_0
+    return-void
+.end method
+
 .method public setTextAlign(I)V
     .locals 2
 
--- a/smali/com/faultexception/reader/ReaderActivity.smali
+++ b/smali/com/faultexception/reader/ReaderActivity.smali
@@ -3002,6 +3002,14 @@
 .method private updateFeaturesForBookView()V
     .locals 6
 
+    iget-object v0, p0, Lcom/faultexception/reader/ReaderActivity;->mPrefs:Landroid/content/SharedPreferences;
+    const/16 v2, 0x1
+    const-string v3, "hyphenation"
+    invoke-interface {v0, v3, v2}, Landroid/content/SharedPreferences;->getBoolean(Ljava/lang/String;Z)Z
+    move-result v0
+    iget-object v2, p0, Lcom/faultexception/reader/ReaderActivity;->mBookView:Lcom/faultexception/reader/content/BookView;
+    invoke-virtual {v2, v0}, Lcom/faultexception/reader/content/BookView;->setHyphenation(Z)V
+
     .line 619
     iget-object v0, p0, Lcom/faultexception/reader/ReaderActivity;->mBookView:Lcom/faultexception/reader/content/BookView;
 
--- a/res/xml/preferences.xml
+++ b/res/xml/preferences.xml
@@ -26,6 +26,7 @@
     </PreferenceCategory>
 
     <PreferenceCategory android:title="@string/pref_category_advanced">
+        <SwitchPreferenceCompat android:title="Use hyphenation" android:key="hyphenation" android:defaultValue="true" />
         <SwitchPreferenceCompat android:title="Hide footer slider (reader)" android:key="hide_reader_footer" android:defaultValue="false" />
         <SwitchPreferenceCompat android:title="Hide footer (grid view)" android:key="only_covers" android:defaultValue="false" />
         <com.faultexception.reader.library.LibraryFolderPreference android:title="@string/pref_library_folder_title" android:key="library_folder" />
--- /dev/null
+++ b/res/drawable/ic_image_24dp.xml
@@ -1 +1,3 @@
+    <vector xmlns:android="http://schemas.android.com/apk/res/android" android:width="24dp" android:height="24dp" android:viewportWidth="24" android:viewportHeight="24">
+        <path android:fillColor="#ff000000" android:pathData="M21,19V5c0,-1.1 -0.9,-2 -2,-2H5c-1.1,0 -2,0.9 -2,2v14c0,1.1 0.9,2 2,2h14c1.1,0 2,-0.9 2,-2zM8.5,13.5l2.5,3.01L14.5,12l4.5,6H5l3.5,-4.5z"/>
+    </vector>
--- a/res/values/public.xml
+++ b/res/values/public.xml
@@ -3556,4 +3556,5 @@
     <public type="xml" name="sync" id="0x7f130007" />
     <public type="drawable" name="ic_launcher_monochrome" id="0x7f0800fc" />
     <public type="array" name="dict_names" id="0x7f030004" />
+    <public type="drawable" name="ic_image_24dp" id="0x7f0800fd" />
 </resources>
\ No newline at end of file
--- a/smali/com/faultexception/reader/R$drawable.smali
+++ b/smali/com/faultexception/reader/R$drawable.smali
@@ -518,3 +518,6 @@
 
 
 .field public static final ic_launcher_monochrome:I = 0x7f0800fc
+
+
+.field public static final ic_image_24dp:I = 0x7f0800fd
--- /dev/null
+++ b/res/drawable/ic_article_24dp.xml
@@ -1 +1,3 @@
+    <vector xmlns:android="http://schemas.android.com/apk/res/android" android:width="24dp" android:height="24dp" android:viewportWidth="24" android:viewportHeight="24">
+        <path android:fillColor="#ff000000" android:pathData="M19,3L5,3c-1.1,0 -2,0.9 -2,2v14c0,1.1 0.9,2 2,2h14c1.1,0 2,-0.9 2,-2L21,5c0,-1.1 -0.9,-2 -2,-2zM14,17L7,17v-2h7v2zM17,13L7,13v-2h10v2zM17,9L7,9L7,7h10v2z"/>
+    </vector>
--- a/res/values/public.xml
+++ b/res/values/public.xml
@@ -3557,4 +3557,5 @@
     <public type="drawable" name="ic_launcher_monochrome" id="0x7f0800fc" />
     <public type="array" name="dict_names" id="0x7f030004" />
     <public type="drawable" name="ic_image_24dp" id="0x7f0800fd" />
+    <public type="drawable" name="ic_article_24dp" id="0x7f0800fe" />
 </resources>
\ No newline at end of file
--- a/smali/com/faultexception/reader/R$drawable.smali
+++ b/smali/com/faultexception/reader/R$drawable.smali
@@ -521,3 +521,6 @@
 
 
 .field public static final ic_image_24dp:I = 0x7f0800fd
+
+
+.field public static final ic_article_24dp:I = 0x7f0800fe
--- a/res/layout/fragment_display_settings.xml
+++ b/res/layout/fragment_display_settings.xml
@@ -38,6 +38,14 @@
             <ImageButton android:id="@id/text_align_start" android:background="@drawable/action_ripple" android:padding="16.0dip" android:layout_width="wrap_content" android:layout_height="wrap_content" android:src="@drawable/ic_align_start" android:contentDescription="@string/display_settings_text_align_start" app:tint="@color/display_settings_control_color_selector" />
             <ImageButton android:id="@id/text_align_justify" android:background="@drawable/action_ripple" android:padding="16.0dip" android:layout_width="wrap_content" android:layout_height="wrap_content" android:src="@drawable/ic_align_justify" android:contentDescription="@string/display_settings_text_align_justify" app:tint="@color/display_settings_control_color_selector" />
         </LinearLayout>
+        <LinearLayout android:gravity="center_vertical" android:orientation="horizontal" android:id="@id/content_invert" android:paddingLeft="24.0dip" android:paddingRight="8.0dip" android:layout_width="fill_parent" android:layout_height="wrap_content">
+            <LinearLayout android:gravity="center_vertical" android:orientation="vertical" android:layout_width="0.0dip" android:layout_height="wrap_content" android:layout_weight="1.0">
+                <TextView android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="Invert" style="@style/DisplaySettingsHeader" />
+                <TextView android:id="@id/content_invert_value" android:layout_width="wrap_content" android:layout_height="wrap_content" style="@style/DisplaySettingsValue" />
+            </LinearLayout>
+            <ImageButton android:id="@id/content_invert_image" android:background="@drawable/action_ripple" android:padding="16.0dip" android:layout_width="wrap_content" android:layout_height="wrap_content" android:src="@drawable/ic_image_24dp" android:contentDescription="Images" app:tint="@color/display_settings_control_color_selector" />
+            <ImageButton android:id="@id/content_invert_page" android:background="@drawable/action_ripple" android:padding="16.0dip" android:layout_width="wrap_content" android:layout_height="wrap_content" android:src="@drawable/ic_article_24dp" android:contentDescription="Page" app:tint="@color/display_settings_control_color_selector" />
+        </LinearLayout>
         <Space android:id="@id/end_padding" android:visibility="invisible" android:layout_width="fill_parent" android:layout_height="8.0dip" />
         <ImageButton android:id="@id/expand_more" android:visibility="gone" android:background="@drawable/action_ripple_20dp" android:padding="16.0dip" android:layout_width="fill_parent" android:layout_height="wrap_content" android:src="@drawable/ic_expand_more" android:contentDescription="@null" app:tint="?android:textColorPrimary" />
         <LinearLayout android:orientation="vertical" android:id="@id/more_section" android:paddingBottom="8.0dip" android:visibility="visible" android:layout_width="fill_parent" android:layout_height="wrap_content">
--- a/res/layout-v17/fragment_display_settings.xml
+++ b/res/layout-v17/fragment_display_settings.xml
@@ -38,6 +38,14 @@
             <ImageButton android:id="@id/text_align_start" android:background="@drawable/action_ripple" android:padding="16.0dip" android:layout_width="wrap_content" android:layout_height="wrap_content" android:src="@drawable/ic_align_start" android:contentDescription="@string/display_settings_text_align_start" app:tint="@color/display_settings_control_color_selector" />
             <ImageButton android:id="@id/text_align_justify" android:background="@drawable/action_ripple" android:padding="16.0dip" android:layout_width="wrap_content" android:layout_height="wrap_content" android:src="@drawable/ic_align_justify" android:contentDescription="@string/display_settings_text_align_justify" app:tint="@color/display_settings_control_color_selector" />
         </LinearLayout>
+        <LinearLayout android:gravity="center_vertical" android:orientation="horizontal" android:id="@id/content_invert" android:paddingLeft="24.0dip" android:paddingRight="8.0dip" android:layout_width="fill_parent" android:layout_height="wrap_content">
+            <LinearLayout android:gravity="center_vertical" android:orientation="vertical" android:layout_width="0.0dip" android:layout_height="wrap_content" android:layout_weight="1.0">
+                <TextView android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="Invert" style="@style/DisplaySettingsHeader" />
+                <TextView android:id="@id/content_invert_value" android:layout_width="wrap_content" android:layout_height="wrap_content" style="@style/DisplaySettingsValue" />
+            </LinearLayout>
+            <ImageButton android:id="@id/content_invert_image" android:background="@drawable/action_ripple" android:padding="16.0dip" android:layout_width="wrap_content" android:layout_height="wrap_content" android:src="@drawable/ic_image_24dp" android:contentDescription="Images" app:tint="@color/display_settings_control_color_selector" />
+            <ImageButton android:id="@id/content_invert_page" android:background="@drawable/action_ripple" android:padding="16.0dip" android:layout_width="wrap_content" android:layout_height="wrap_content" android:src="@drawable/ic_article_24dp" android:contentDescription="Page" app:tint="@color/display_settings_control_color_selector" />
+        </LinearLayout>
         <Space android:id="@id/end_padding" android:visibility="invisible" android:layout_width="fill_parent" android:layout_height="8.0dip" />
         <ImageButton android:id="@id/expand_more" android:visibility="gone" android:background="@drawable/action_ripple_20dp" android:padding="16.0dip" android:layout_width="fill_parent" android:layout_height="wrap_content" android:src="@drawable/ic_expand_more" android:contentDescription="@null" app:tint="?android:textColorPrimary" />
         <LinearLayout android:orientation="vertical" android:id="@id/more_section" android:paddingBottom="8.0dip" android:visibility="visible" android:layout_width="fill_parent" android:layout_height="wrap_content">
--- a/res/values/public.xml
+++ b/res/values/public.xml
@@ -3558,4 +3558,5 @@
     <public type="array" name="dict_names" id="0x7f030004" />
     <public type="drawable" name="ic_image_24dp" id="0x7f0800fd" />
     <public type="drawable" name="ic_article_24dp" id="0x7f0800fe" />
+    <public type="id" name="content_invert" id="0x7f0901f2" />
 </resources>
\ No newline at end of file
--- a/smali/com/faultexception/reader/R$id.smali
+++ b/smali/com/faultexception/reader/R$id.smali
@@ -1019,3 +1019,6 @@
 
     return-void
 .end method
+
+
+.field public static final content_invert:I = 0x7f0901f2
--- a/res/values/public.xml
+++ b/res/values/public.xml
@@ -3559,4 +3559,5 @@
     <public type="drawable" name="ic_image_24dp" id="0x7f0800fd" />
     <public type="drawable" name="ic_article_24dp" id="0x7f0800fe" />
     <public type="id" name="content_invert" id="0x7f0901f2" />
+    <public type="id" name="content_invert_value" id="0x7f0901f3" />
 </resources>
\ No newline at end of file
--- a/smali/com/faultexception/reader/R$id.smali
+++ b/smali/com/faultexception/reader/R$id.smali
@@ -1022,3 +1022,6 @@
 
 
 .field public static final content_invert:I = 0x7f0901f2
+
+
+.field public static final content_invert_value:I = 0x7f0901f3
--- a/res/values/public.xml
+++ b/res/values/public.xml
@@ -3560,4 +3560,5 @@
     <public type="drawable" name="ic_article_24dp" id="0x7f0800fe" />
     <public type="id" name="content_invert" id="0x7f0901f2" />
     <public type="id" name="content_invert_value" id="0x7f0901f3" />
+    <public type="id" name="content_invert_image" id="0x7f0901f4" />
 </resources>
\ No newline at end of file
--- a/smali/com/faultexception/reader/R$id.smali
+++ b/smali/com/faultexception/reader/R$id.smali
@@ -1025,3 +1025,6 @@
 
 
 .field public static final content_invert_value:I = 0x7f0901f3
+
+
+.field public static final content_invert_image:I = 0x7f0901f4
--- a/res/values/public.xml
+++ b/res/values/public.xml
@@ -3561,4 +3561,5 @@
     <public type="id" name="content_invert" id="0x7f0901f2" />
     <public type="id" name="content_invert_value" id="0x7f0901f3" />
     <public type="id" name="content_invert_image" id="0x7f0901f4" />
+    <public type="id" name="content_invert_page" id="0x7f0901f5" />
 </resources>
\ No newline at end of file
--- a/smali/com/faultexception/reader/R$id.smali
+++ b/smali/com/faultexception/reader/R$id.smali
@@ -1028,3 +1028,6 @@
 
 
 .field public static final content_invert_image:I = 0x7f0901f4
+
+
+.field public static final content_invert_page:I = 0x7f0901f5
--- a/res/values/ids.xml
+++ b/res/values/ids.xml
@@ -398,4 +398,5 @@
     <item type="id" name="voice" />
     <item type="id" name="web_search" />
     <item type="id" name="web_view" />
+    <item type="id" name="content_invert" />
 </resources>
--- a/res/values/ids.xml
+++ b/res/values/ids.xml
@@ -399,4 +399,5 @@
     <item type="id" name="web_search" />
     <item type="id" name="web_view" />
     <item type="id" name="content_invert" />
+    <item type="id" name="content_invert_value" />
 </resources>
--- a/res/values/ids.xml
+++ b/res/values/ids.xml
@@ -400,4 +400,5 @@
     <item type="id" name="web_view" />
     <item type="id" name="content_invert" />
     <item type="id" name="content_invert_value" />
+    <item type="id" name="content_invert_image" />
 </resources>
--- a/res/values/ids.xml
+++ b/res/values/ids.xml
@@ -401,4 +401,5 @@
     <item type="id" name="content_invert" />
     <item type="id" name="content_invert_value" />
     <item type="id" name="content_invert_image" />
+    <item type="id" name="content_invert_page" />
 </resources>
--- a/smali/com/faultexception/reader/ReaderActivity.smali
+++ b/smali/com/faultexception/reader/ReaderActivity.smali
@@ -3087,7 +3087,24 @@
     move-result v2
 
     invoke-virtual {v0, v2}, Lcom/faultexception/reader/content/BookView;->setMargin(I)V
+    iget-object v0, p0, Lcom/faultexception/reader/ReaderActivity;->mBookView:Lcom/faultexception/reader/content/BookView;
+    iget-object v2, p0, Lcom/faultexception/reader/ReaderActivity;->mPrefs:Landroid/content/SharedPreferences;
 
+    iget-object v3, p0, Lcom/faultexception/reader/ReaderActivity;->mBookView:Lcom/faultexception/reader/content/BookView;
+    invoke-virtual {v3}, Lcom/faultexception/reader/content/BookView;->isFixedLayout()Z
+    move-result v3
+    if-nez v3, :content_invert_fxl
+    const-string v3, "content_invert"
+    goto :content_invert_not_fxl
+    :content_invert_fxl
+    const-string v3, "content_invert_fxl"
+    :content_invert_not_fxl
+
+    const-string v4, "None"
+    invoke-interface {v2, v3, v4}, Landroid/content/SharedPreferences;->getString(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;
+    move-result-object v2
+    invoke-virtual {v0, v2}, Lcom/faultexception/reader/content/BookView;->setContentInvert(Ljava/lang/String;)V
+
     .line 630
     iget-object v0, p0, Lcom/faultexception/reader/ReaderActivity;->mTheme:Lcom/faultexception/reader/themes/Theme;
 
--- a/smali/com/faultexception/reader/DisplaySettingsFragment.smali
+++ b/smali/com/faultexception/reader/DisplaySettingsFragment.smali
@@ -101,6 +101,10 @@
 .field private mTextAlignValueView:Landroid/widget/TextView;
 
 .field private mTextAlignView:Landroid/view/View;
+.field private mContentInvertImageButton:Landroid/widget/ImageButton;
+.field private mContentInvertPageButton:Landroid/widget/ImageButton;
+.field private mContentInvertValueView:Landroid/widget/TextView;
+.field private mContentInvertView:Landroid/view/View;
 
 .field private mTextSizeDecButton:Landroid/widget/ImageButton;
 
@@ -373,6 +377,39 @@
     return-void
 .end method
 
+.method private updateContentInvert()V
+    .locals 3
+
+    iget-boolean v1, p0, Lcom/faultexception/reader/DisplaySettingsFragment;->mFixedLayout:Z
+    if-nez v1, :content_invert_fxl
+    const-string v1, "content_invert"
+    goto :content_invert_not_fxl
+    :content_invert_fxl
+    const-string v1, "content_invert_fxl"
+    :content_invert_not_fxl
+
+    const-string v2, "None"
+    iget-object v0, p0, Lcom/faultexception/reader/DisplaySettingsFragment;->mPrefs:Landroid/content/SharedPreferences;
+    invoke-interface {v0, v1, v2}, Landroid/content/SharedPreferences;->getString(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;
+    move-result-object v2
+
+    iget-object v0, p0, Lcom/faultexception/reader/DisplaySettingsFragment;->mContentInvertValueView:Landroid/widget/TextView;
+    invoke-virtual {v0, v2}, Landroid/widget/TextView;->setText(Ljava/lang/CharSequence;)V
+
+    iget-object v0, p0, Lcom/faultexception/reader/DisplaySettingsFragment;->mContentInvertImageButton:Landroid/widget/ImageButton;
+    const-string v1, "Images"
+    invoke-virtual {v1, v2}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
+    move-result v1
+    invoke-virtual {v0, v1}, Landroid/widget/ImageButton;->setActivated(Z)V
+
+    iget-object v0, p0, Lcom/faultexception/reader/DisplaySettingsFragment;->mContentInvertPageButton:Landroid/widget/ImageButton;
+    const-string v1, "Page"
+    invoke-virtual {v1, v2}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
+    move-result v1
+    invoke-virtual {v0, v1}, Landroid/widget/ImageButton;->setActivated(Z)V
+
+    return-void
+.end method
 .method private updateTextAlign()V
     .locals 6
 
@@ -458,8 +495,68 @@
     return-void
 .end method
 
+.method private onClickContentInvert(Landroid/view/View;)V
+    .locals 7
+
+    iget-object v0, p0, Lcom/faultexception/reader/DisplaySettingsFragment;->mContentInvertImageButton:Landroid/widget/ImageButton;
+    iget-object v1, p0, Lcom/faultexception/reader/DisplaySettingsFragment;->mContentInvertPageButton:Landroid/widget/ImageButton;
+
+    if-eq p1, v0, :get_current
+    if-eq p1, v1, :get_current
+    return-void
+
+    :get_current
+    iget-boolean v2, p0, Lcom/faultexception/reader/DisplaySettingsFragment;->mFixedLayout:Z
+    if-nez v2, :content_invert_fxl
+    const-string v2, "content_invert"
+    goto :content_invert_not_fxl
+    :content_invert_fxl
+    const-string v2, "content_invert_fxl"
+    :content_invert_not_fxl
+
+    iget-object v6, p0, Lcom/faultexception/reader/DisplaySettingsFragment;->mPrefs:Landroid/content/SharedPreferences;
+
+    const-string v3, "None"
+    invoke-interface {v6, v2, v3}, Landroid/content/SharedPreferences;->getString(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;
+    move-result-object v5
+
+    if-eq p1, v0, :check_image
+    if-eq p1, v1, :check_page
+    return-void
+
+    :check_image
+    const-string v4, "Images"
+    invoke-virtual {v4, v5}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
+    move-result v5
+    goto :toggle
+
+    :check_page
+    const-string v4, "Page"
+    invoke-virtual {v4, v5}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
+    move-result v5
+    goto :toggle
+
+    :toggle
+    if-nez v5, :save
+    move-object v3, v4
+    goto :save
+
+    :save
+    invoke-interface {v6}, Landroid/content/SharedPreferences;->edit()Landroid/content/SharedPreferences$Editor;
+    move-result-object v6
+    invoke-interface {v6, v2, v3}, Landroid/content/SharedPreferences$Editor;->putString(Ljava/lang/String;Ljava/lang/String;)Landroid/content/SharedPreferences$Editor;
+    move-result-object v6
+    invoke-interface {v6}, Landroid/content/SharedPreferences$Editor;->apply()V
+
+    invoke-direct {p0}, Lcom/faultexception/reader/DisplaySettingsFragment;->updateContentInvert()V
+    iget-object v6, p0, Lcom/faultexception/reader/DisplaySettingsFragment;->mOnSettingChangedListener:Lcom/faultexception/reader/DisplaySettingsFragment$OnSettingChangedListener;
+    invoke-interface {v6, v3}, Lcom/faultexception/reader/DisplaySettingsFragment$OnSettingChangedListener;->onContentInvertChanged(Ljava/lang/String;)V
+
+    return-void
+.end method
 .method public onClick(Landroid/view/View;)V
     .locals 8
+    invoke-direct {p0, p1}, Lcom/faultexception/reader/DisplaySettingsFragment;->onClickContentInvert(Landroid/view/View;)V
 
     .line 440
     iget-object v0, p0, Lcom/faultexception/reader/DisplaySettingsFragment;->mTextSizeIncButton:Landroid/widget/ImageButton;
@@ -1413,7 +1508,49 @@
     move-result-object v0
 
     iput-object v0, p0, Lcom/faultexception/reader/DisplaySettingsFragment;->mTextAlignView:Landroid/view/View;
+    sget v0, Lcom/faultexception/reader/R$id;->content_invert:I
+    invoke-virtual {p2, v0}, Lcom/faultexception/reader/widget/ExpansionScrollView;->findViewById(I)Landroid/view/View;
+    move-result-object v0
+    iput-object v0, p0, Lcom/faultexception/reader/DisplaySettingsFragment;->mContentInvertView:Landroid/view/View;
 
+    sget v0, Lcom/faultexception/reader/R$id;->content_invert_value:I
+    invoke-virtual {p2, v0}, Lcom/faultexception/reader/widget/ExpansionScrollView;->findViewById(I)Landroid/view/View;
+    move-result-object v0
+    check-cast v0, Landroid/widget/TextView;
+    iput-object v0, p0, Lcom/faultexception/reader/DisplaySettingsFragment;->mContentInvertValueView:Landroid/widget/TextView;
+
+    sget v0, Lcom/faultexception/reader/R$id;->content_invert_image:I
+    invoke-virtual {p2, v0}, Lcom/faultexception/reader/widget/ExpansionScrollView;->findViewById(I)Landroid/view/View;
+    move-result-object v0
+    check-cast v0, Landroid/widget/ImageButton;
+    iput-object v0, p0, Lcom/faultexception/reader/DisplaySettingsFragment;->mContentInvertImageButton:Landroid/widget/ImageButton;
+    invoke-virtual {v0, p0}, Landroid/widget/ImageButton;->setOnClickListener(Landroid/view/View$OnClickListener;)V
+
+    iget-object v0, p0, Lcom/faultexception/reader/DisplaySettingsFragment;->mContentInvertImageButton:Landroid/widget/ImageButton;
+    invoke-virtual {v0}, Landroid/widget/ImageButton;->getDrawable()Landroid/graphics/drawable/Drawable;
+    move-result-object v2
+    invoke-virtual {v2}, Landroid/graphics/drawable/Drawable;->mutate()Landroid/graphics/drawable/Drawable;
+    move-result-object v2
+    invoke-static {v2}, Landroidx/core/graphics/drawable/DrawableCompat;->wrap(Landroid/graphics/drawable/Drawable;)Landroid/graphics/drawable/Drawable;
+    move-result-object v2
+    invoke-virtual {v0, v2}, Landroid/widget/ImageButton;->setImageDrawable(Landroid/graphics/drawable/Drawable;)V
+
+    sget v0, Lcom/faultexception/reader/R$id;->content_invert_page:I
+    invoke-virtual {p2, v0}, Lcom/faultexception/reader/widget/ExpansionScrollView;->findViewById(I)Landroid/view/View;
+    move-result-object v0
+    check-cast v0, Landroid/widget/ImageButton;
+    iput-object v0, p0, Lcom/faultexception/reader/DisplaySettingsFragment;->mContentInvertPageButton:Landroid/widget/ImageButton;
+    invoke-virtual {v0, p0}, Landroid/widget/ImageButton;->setOnClickListener(Landroid/view/View$OnClickListener;)V
+
+    iget-object v0, p0, Lcom/faultexception/reader/DisplaySettingsFragment;->mContentInvertPageButton:Landroid/widget/ImageButton;
+    invoke-virtual {v0}, Landroid/widget/ImageButton;->getDrawable()Landroid/graphics/drawable/Drawable;
+    move-result-object v2
+    invoke-virtual {v2}, Landroid/graphics/drawable/Drawable;->mutate()Landroid/graphics/drawable/Drawable;
+    move-result-object v2
+    invoke-static {v2}, Landroidx/core/graphics/drawable/DrawableCompat;->wrap(Landroid/graphics/drawable/Drawable;)Landroid/graphics/drawable/Drawable;
+    move-result-object v2
+    invoke-virtual {v0, v2}, Landroid/widget/ImageButton;->setImageDrawable(Landroid/graphics/drawable/Drawable;)V
+
     const v0, 0x7f0901c3
 
     .line 173
@@ -1967,6 +2103,7 @@
 
     :cond_1
     return-object p2
+
 .end method
 
 .method public onItemSelected(Landroid/widget/AdapterView;Landroid/view/View;IJ)V
@@ -2492,6 +2629,9 @@
     invoke-direct {p0, v0, v4}, Lcom/faultexception/reader/DisplaySettingsFragment;->setVisibilityForFeature(Landroid/view/View;I)V
 
     .line 312
+    iget-object v0, p0, Lcom/faultexception/reader/DisplaySettingsFragment;->mContentInvertView:Landroid/view/View;
+    const/16 v4, 0 # VISIBLE
+    invoke-virtual {v0, v4}, Landroid/view/View;->setVisibility(I)V
     iget-object v0, p0, Lcom/faultexception/reader/DisplaySettingsFragment;->mTextAlignView:Landroid/view/View;
 
     const/16 v4, 0x10
@@ -2720,6 +2860,7 @@
 
     .line 334
     invoke-direct {p0}, Lcom/faultexception/reader/DisplaySettingsFragment;->updateTextAlign()V
+    invoke-direct {p0}, Lcom/faultexception/reader/DisplaySettingsFragment;->updateContentInvert()V
 
     .line 335
     invoke-direct {p0}, Lcom/faultexception/reader/DisplaySettingsFragment;->updateExpandButton()V
--- a/smali/com/faultexception/reader/DisplaySettingsFragment$OnSettingChangedListener.smali
+++ b/smali/com/faultexception/reader/DisplaySettingsFragment$OnSettingChangedListener.smali
@@ -35,6 +35,8 @@
 
 .method public abstract onTextAlignChanged(I)V
 .end method
+.method public abstract onContentInvertChanged(Ljava/lang/String;)V
+.end method
 
 .method public abstract onTextSizeChanged(I)V
 .end method
--- a/smali/com/faultexception/reader/ReaderActivity$7.smali
+++ b/smali/com/faultexception/reader/ReaderActivity$7.smali
@@ -295,7 +295,23 @@
     :cond_0
     return-void
 .end method
+.method public onContentInvertChanged(Ljava/lang/String;)V
+    .locals 1
 
+    iget-object v0, p0, Lcom/faultexception/reader/ReaderActivity$7;->this$0:Lcom/faultexception/reader/ReaderActivity;
+    invoke-static {v0}, Lcom/faultexception/reader/ReaderActivity;->access$1100(Lcom/faultexception/reader/ReaderActivity;)Lcom/faultexception/reader/content/BookView;
+    move-result-object v0
+    if-eqz v0, :cond_0
+
+    iget-object v0, p0, Lcom/faultexception/reader/ReaderActivity$7;->this$0:Lcom/faultexception/reader/ReaderActivity;
+    invoke-static {v0}, Lcom/faultexception/reader/ReaderActivity;->access$1100(Lcom/faultexception/reader/ReaderActivity;)Lcom/faultexception/reader/content/BookView;
+    move-result-object v0
+    invoke-virtual {v0, p1}, Lcom/faultexception/reader/content/BookView;->setContentInvert(Ljava/lang/String;)V
+
+    :cond_0
+    return-void
+.end method
+
 .method public onTextSizeChanged(I)V
     .locals 4
 
--- a/smali/com/faultexception/reader/content/BookView.smali
+++ b/smali/com/faultexception/reader/content/BookView.smali
@@ -288,6 +288,10 @@
 
     return-void
 .end method
+.method public setContentInvert(Ljava/lang/String;)V
+    .locals 0
+    return-void
+.end method
 
 .method public setTextSize(I)V
     .locals 0
--- a/smali/com/faultexception/reader/content/EPubBookView.smali
+++ b/smali/com/faultexception/reader/content/EPubBookView.smali
@@ -64,6 +64,7 @@
 
 .field private mHyphenation:Z
 .field private mTextAlign:I
+.field private mContentInvert:Ljava/lang/String;
 
 .field private mTextSize:I
 
@@ -2314,7 +2315,20 @@
     :cond_0
     return-void
 .end method
+.method public setContentInvert(Ljava/lang/String;)V
+    .locals 1
 
+    iput-object p1, p0, Lcom/faultexception/reader/content/EPubBookView;->mContentInvert:Ljava/lang/String;
+
+    iget-object v0, p0, Lcom/faultexception/reader/content/EPubBookView;->mContentView:Lcom/faultexception/reader/content/ContentView;
+    if-eqz v0, :cond_0
+
+    invoke-virtual {v0, p1}, Lcom/faultexception/reader/content/ContentView;->setContentInvert(Ljava/lang/String;)V
+
+    :cond_0
+    return-void
+.end method
+
 .method public setTextSize(I)V
     .locals 1
 
--- a/smali/com/faultexception/reader/content/ContentView.smali
+++ b/smali/com/faultexception/reader/content/ContentView.smali
@@ -195,6 +195,10 @@
 
     return-void
 .end method
+.method public setContentInvert(Ljava/lang/String;)V
+    .locals 0
+    return-void
+.end method
 
 .method public setTextSize(I)V
     .locals 0
--- a/smali/com/faultexception/reader/content/HtmlContentView.smali
+++ b/smali/com/faultexception/reader/content/HtmlContentView.smali
@@ -370,6 +370,12 @@
 
     return-void
 .end method
+.method public setContentInvert(Ljava/lang/String;)V
+    .locals 1
+    iget-object v0, p0, Lcom/faultexception/reader/content/HtmlContentView;->mContentWebView:Lcom/faultexception/reader/content/HtmlContentWebView;
+    invoke-virtual {v0, p1}, Lcom/faultexception/reader/content/HtmlContentWebView;->setContentInvert(Ljava/lang/String;)V
+    return-void
+.end method
 
 .method public setTextSize(I)V
     .locals 1
--- a/smali/com/faultexception/reader/content/HtmlContentWebView.smali
+++ b/smali/com/faultexception/reader/content/HtmlContentWebView.smali
@@ -115,6 +115,7 @@
 
 .field private mHyphenation:Z
 .field private mTextAlign:I
+.field private mContentInvert:Ljava/lang/String;
 
 .field private mTextSize:I
 
@@ -1715,6 +1716,12 @@
 
     invoke-virtual {v5, v3}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
 
+    const-string v3, "document.addEventListener('DOMContentLoaded', function() { LithiumJs.setContentInvert('"
+    invoke-virtual {v5, v3}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
+    iget-object v3, p0, Lcom/faultexception/reader/content/HtmlContentWebView;->mContentInvert:Ljava/lang/String;
+    invoke-virtual {v5, v3}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
+    const-string v3, "');});"
+    invoke-virtual {v5, v3}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
     const-string v3, "</script><style type=\'text/css\' id=\'__LithiumThemeStyle\'></style>"
 
     invoke-virtual {v5, v3}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
@@ -4086,7 +4093,31 @@
     :cond_0
     return-void
 .end method
+.method public setContentInvert(Ljava/lang/String;)V
+    .locals 2
+    iput-object p1, p0, Lcom/faultexception/reader/content/HtmlContentWebView;->mContentInvert:Ljava/lang/String;
 
+    iget-object v0, p0, Lcom/faultexception/reader/content/HtmlContentWebView;->mUrl:Ljava/lang/String;
+    if-eqz v0, :cond_0
+
+    iget-boolean v0, p0, Lcom/faultexception/reader/content/HtmlContentWebView;->mDisplaySettingsInjected:Z
+    if-eqz v0, :cond_0
+
+    new-instance v0, Ljava/lang/StringBuilder;
+    invoke-direct {v0}, Ljava/lang/StringBuilder;-><init>()V
+    const-string v1, "LithiumJs.setContentInvert('"
+    invoke-virtual {v0, v1}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
+    invoke-virtual {v0, p1}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
+    const-string p1, "')"
+    invoke-virtual {v0, p1}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
+    invoke-virtual {v0}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;
+    move-result-object p1
+    invoke-virtual {p0, p1}, Lcom/faultexception/reader/content/HtmlContentWebView;->executeJavascript(Ljava/lang/String;)V
+
+    :cond_0
+    return-void
+.end method
+
 .method public setTextSize(I)V
     .locals 2
 
--- a/assets/js/epub.js
+++ b/assets/js/epub.js
@@ -33,6 +33,7 @@
 
     var typefacesStyleElement = void 0;
     var fontStyleElement = void 0;
+    var invertStyleElement = void 0;
     var styleElement = void 0;
 
     // List of fonts we have added CSS for.
@@ -83,6 +84,9 @@
         fontStyleElement.setAttribute('type', 'text/css');
         document.head.appendChild(fontStyleElement);
 
+        invertStyleElement = document.createElement('style');
+        invertStyleElement.setAttribute('type', 'text/css');
+        document.head.appendChild(invertStyleElement);
         styleElement = document.createElement('style');
         styleElement.setAttribute('type', 'text/css');
         document.head.appendChild(styleElement);
@@ -610,6 +614,20 @@
         updateStyleElement();
         reflowIfNecessary();
     }
+    function setContentInvert(target) {
+        var css = ' { filter: invert(1) hue-rotate(180deg) brightness(0.9) }';
+        switch (target) {
+        case 'Page':
+            invertStyleElement.innerText = 'html' + css;
+            break;
+        case 'Images':
+            invertStyleElement.innerText = 'img, svg' + css;
+            break;
+        default:
+            invertStyleElement.innerText = '';
+            break;
+        }
+    }
 
     function updateStyleElement() {
         var style = 'line-height: ' + lineSpacing + " !important;";
@@ -801,6 +819,7 @@
         setFont: setFont,
         setLineSpacing: setLineSpacing,
         setHyphenation: setHyphenation,
+        setContentInvert: setContentInvert,
         setTextAlign: setTextAlign
     };
 }();
--- /dev/null
+++ b/res/drawable-anydpi-v21/ic_rotate_alt.xml
@@ -1 +1,4 @@
+<?xml version="1.0" encoding="utf-8"?>
+<vector xmlns:android="http://schemas.android.com/apk/res/android" android:height="24dp" android:width="24dp" android:viewportWidth="24" android:viewportHeight="24">
+    <path android:fillColor="#ffffffff" android:pathData="M4,7.59l5-5c0.78-0.78,2.05-0.78,2.83,0L20.24,11h-2.83L10.4,4L5.41,9H8v2H2V5h2V7.59z M20,19h2v-6h-6v2h2.59l-4.99,5 l-7.01-7H3.76l8.41,8.41c0.78,0.78,2.05,0.78,2.83,0l5-5V19z" />
+</vector>
--- a/res/values/public.xml
+++ b/res/values/public.xml
@@ -3562,4 +3562,5 @@
     <public type="id" name="content_invert_value" id="0x7f0901f3" />
     <public type="id" name="content_invert_image" id="0x7f0901f4" />
     <public type="id" name="content_invert_page" id="0x7f0901f5" />
+    <public type="drawable" name="ic_rotate_alt" id="0x7f0800ff" />
 </resources>
\ No newline at end of file
--- a/smali/com/faultexception/reader/R$drawable.smali
+++ b/smali/com/faultexception/reader/R$drawable.smali
@@ -524,3 +524,6 @@
 
 
 .field public static final ic_article_24dp:I = 0x7f0800fe
+
+
+.field public static final ic_rotate_alt:I = 0x7f0800ff
--- a/res/values/ids.xml
+++ b/res/values/ids.xml
@@ -402,4 +402,5 @@
     <item type="id" name="content_invert_value" />
     <item type="id" name="content_invert_image" />
     <item type="id" name="content_invert_page" />
+    <item type="id" name="invert_rotation" />
 </resources>
--- a/res/values/public.xml
+++ b/res/values/public.xml
@@ -3563,4 +3563,5 @@
     <public type="id" name="content_invert_image" id="0x7f0901f4" />
     <public type="id" name="content_invert_page" id="0x7f0901f5" />
     <public type="drawable" name="ic_rotate_alt" id="0x7f0800ff" />
+    <public type="id" name="invert_rotation" id="0x7f0901f6" />
 </resources>
\ No newline at end of file
--- a/smali/com/faultexception/reader/R$id.smali
+++ b/smali/com/faultexception/reader/R$id.smali
@@ -1031,3 +1031,6 @@
 
 
 .field public static final content_invert_page:I = 0x7f0901f5
+
+
+.field public static final invert_rotation:I = 0x7f0901f6
--- a/res/menu/reader.xml
+++ b/res/menu/reader.xml
@@ -6,6 +6,7 @@
     <item android:icon="@drawable/ic_action_add_bookmark" android:id="@id/bookmark" android:title="@string/action_add_bookmark" app:showAsAction="ifRoom" />
     <item android:icon="@drawable/ic_action_toc" android:id="@id/toc" android:title="@string/action_toc" app:showAsAction="ifRoom" />
     <item android:id="@id/goto_paper_page" android:title="@string/action_goto_paper_page" app:showAsAction="never" />
+    <item android:icon="@drawable/ic_rotate_alt" android:id="@id/invert_rotation" android:title="Invert Rotation" app:showAsAction="ifRoom" />
     <item android:id="@id/settings" android:title="@string/action_settings" app:showAsAction="never" />
     <item android:id="@id/feedback" android:title="@string/action_feedback" app:showAsAction="never" />
 </menu>
\ No newline at end of file
--- a/smali/com/faultexception/reader/ReaderActivity.smali
+++ b/smali/com/faultexception/reader/ReaderActivity.smali
@@ -5463,6 +5463,65 @@
     return p1
 .end method
 
+.method private invertRotation()V
+    .locals 1
+
+    # attempt to get the last requested orientation
+    invoke-virtual {p0}, Lcom/faultexception/reader/ReaderActivity;->getRequestedOrientation()I
+    move-result v0
+    sparse-switch v0, :screen_orientation
+
+    # unknown or none, so attempt to do it based on if we're currently using portrait or landscape resources
+    invoke-virtual {p0}, Lcom/faultexception/reader/ReaderActivity;->getResources()Landroid/content/res/Resources;
+    move-result-object v0
+    invoke-virtual {v0}, Landroid/content/res/Resources;->getConfiguration()Landroid/content/res/Configuration;
+    move-result-object v0
+    iget v0, v0, Landroid/content/res/Configuration;->orientation:I
+    sparse-switch v0, :resources_orientation
+
+    :orientation_rp
+    const v0, 9 # SCREEN_ORIENTATION_REVERSE_PORTRAIT
+    goto :try0s
+
+    :orientation_rl
+    const v0, 8 # SCREEN_ORIENTATION_REVERSE_LANDSCAPE
+    goto :try0s
+
+    :orientation_np
+    const v0, 1 # SCREEN_ORIENTATION_PORTRAIT
+    goto :try0s
+
+    :orientation_nl
+    const v0, 0 # SCREEN_ORIENTATION_LANDSCAPE
+    goto :try0s
+
+    :try0s
+    invoke-virtual {p0, v0}, Lcom/faultexception/reader/ReaderActivity;->setRequestedOrientation(I)V
+    :try0e
+    .catch Ljava/lang/IllegalStateException; {:try0s .. :try0e} :try0c
+    :try0c
+
+    return-void
+
+    :screen_orientation
+    .sparse-switch
+        0  -> :orientation_rl # SCREEN_ORIENTATION_LANDSCAPE
+        1  -> :orientation_rp # SCREEN_ORIENTATION_PORTRAIT
+        6  -> :orientation_rl # SCREEN_ORIENTATION_SENSOR_LANDSCAPE
+        7  -> :orientation_rp # SCREEN_ORIENTATION_SENSOR_PORTRAIT
+        8  -> :orientation_nl # SCREEN_ORIENTATION_REVERSE_LANDSCAPE
+        9  -> :orientation_np # SCREEN_ORIENTATION_REVERSE_PORTRAIT
+        11 -> :orientation_rl # SCREEN_ORIENTATION_USER_LANDSCAPE
+        12 -> :orientation_rp # SCREEN_ORIENTATION_USER_PORTRAIT
+    .end sparse-switch
+
+    :resources_orientation
+    .sparse-switch
+        1 -> :orientation_rp # ORIENTATION_PORTRAIT
+        2 -> :orientation_rl # ORIENTATION_LANDSCAPE
+    .end sparse-switch
+.end method
+
 .method public onOptionsItemSelected(Landroid/view/MenuItem;)Z
     .locals 9
 
@@ -5473,6 +5532,11 @@
 
     const/4 v1, 0x0
 
+    sget v2, Lcom/faultexception/reader/R$id;->invert_rotation:I
+    if-ne v0, v2, :not_invert_rotation
+    invoke-direct {p0}, Lcom/faultexception/reader/ReaderActivity;->invertRotation()V
+    :not_invert_rotation
+
     const/4 v2, 0x1
 
     sparse-switch v0, :sswitch_data_0
--- a/apktool.yml
+++ b/apktool.yml
@@ -57,7 +57,7 @@
   renameManifestPackage: null
 resourcesAreCompressed: false
 sdkInfo:
-  minSdkVersion: '16'
+  minSdkVersion: '26'
   targetSdkVersion: '31'
 sharedLibrary: false
 sparseResources: true
--- a/smali/com/faultexception/reader/DisplaySettingsFragment.smali
+++ b/smali/com/faultexception/reader/DisplaySettingsFragment.smali
@@ -36,7 +36,7 @@
 
 .field private static final TEXT_SIZE_MAX:I = 0x104
 
-.field private static final TEXT_SIZE_MIN:I = 0x50
+.field private static final TEXT_SIZE_MIN:I = 0x3c
 
 
 # instance fields
@@ -1099,7 +1099,7 @@
 
     move-result v0
 
-    const/16 v2, 0x50
+    const/16 v2, 0x3c
 
     invoke-static {v2, v0}, Ljava/lang/Math;->max(II)I
 
@@ -2655,7 +2655,7 @@
     .line 315
     iget-object v4, p0, Lcom/faultexception/reader/DisplaySettingsFragment;->mTextSizeDecButton:Landroid/widget/ImageButton;
 
-    const/16 v5, 0x50
+    const/16 v5, 0x3c
 
     if-le v0, v5, :cond_2
 
--- a/res/menu/reader.xml
+++ b/res/menu/reader.xml
@@ -1,9 +1,9 @@
 <?xml version="1.0" encoding="utf-8"?>
 <menu
   xmlns:android="http://schemas.android.com/apk/res/android" xmlns:app="http://schemas.android.com/apk/res-auto">
-    <item android:icon="@drawable/ic_action_search" android:id="@id/search" android:title="@string/action_search" app:showAsAction="ifRoom" />
+    <item android:icon="@drawable/ic_action_search" android:id="@id/search" android:title="@string/action_search" app:showAsAction="always" />
     <item android:icon="@drawable/ic_action_display_settings" android:id="@id/displaySettings" android:title="@string/action_display_settings" app:showAsAction="always" />
-    <item android:icon="@drawable/ic_action_add_bookmark" android:id="@id/bookmark" android:title="@string/action_add_bookmark" app:showAsAction="ifRoom" />
+    <item android:icon="@drawable/ic_action_add_bookmark" android:id="@id/bookmark" android:title="@string/action_add_bookmark" app:showAsAction="always" />
     <item android:icon="@drawable/ic_action_toc" android:id="@id/toc" android:title="@string/action_toc" app:showAsAction="ifRoom" />
     <item android:id="@id/goto_paper_page" android:title="@string/action_goto_paper_page" app:showAsAction="never" />
     <item android:icon="@drawable/ic_rotate_alt" android:id="@id/invert_rotation" android:title="Invert Rotation" app:showAsAction="ifRoom" />
--- a/res/menu/reader.xml
+++ b/res/menu/reader.xml
@@ -8,5 +8,5 @@
     <item android:id="@id/goto_paper_page" android:title="@string/action_goto_paper_page" app:showAsAction="never" />
     <item android:icon="@drawable/ic_rotate_alt" android:id="@id/invert_rotation" android:title="Invert Rotation" app:showAsAction="ifRoom" />
     <item android:id="@id/settings" android:title="@string/action_settings" app:showAsAction="never" />
-    <item android:id="@id/feedback" android:title="@string/action_feedback" app:showAsAction="never" />
+    <item android:id="@id/feedback" android:title="@string/action_feedback" app:showAsAction="never" android:visible="false" />
 </menu>
\ No newline at end of file
--- a/smali/com/faultexception/reader/util/adapters/DrawerFooterAdapter.smali
+++ b/smali/com/faultexception/reader/util/adapters/DrawerFooterAdapter.smali
@@ -65,13 +65,16 @@
 
 # virtual methods
 .method public getCount()I
-    .locals 1
+    .locals 2
 
     .line 41
     iget-object v0, p0, Lcom/faultexception/reader/util/adapters/DrawerFooterAdapter;->TITLE_RES_IDS:[I
 
     array-length v0, v0
 
+    const/4 v1, 0x1
+    sub-int v0, v0, v1
+
     return v0
 .end method
 
--- a/res/xml/sync.xml
+++ b/res/xml/sync.xml
@@ -6,5 +6,5 @@
     <Preference android:persistent="false" android:title="@string/pref_sync_account_title" android:key="account" />
     <com.faultexception.reader.sync.SyncNowPreference android:persistent="false" android:title="@string/pref_sync_sync_now_title" android:key="sync_now" />
     <PreferenceCategory android:title="@string/pref_sync_devices_title" android:key="devices" />
-    <com.faultexception.reader.prefs.InfoPreference android:key="sync_summary" android:summary="@string/pref_sync_summary" />
+    <com.faultexception.reader.prefs.InfoPreference android:key="sync_summary" android:summary="Sync requires the patched Lithium APK to be signed with a custom key, which must be registered with the Google Drive API. See https://github.com/pgaskin/lithiumpatch for more information." />
 </PreferenceScreen>
\ No newline at end of file
--- a/smali/com/faultexception/reader/sync/SyncSettingsFragment.smali
+++ b/smali/com/faultexception/reader/sync/SyncSettingsFragment.smali
@@ -1207,6 +1207,10 @@
 
     invoke-virtual {p1, v2}, Landroidx/preference/Preference;->setVisible(Z)V
 
+    iget-object p1, p0, Lcom/faultexception/reader/sync/SyncSettingsFragment;->mEnabledPref:Landroidx/preference/SwitchPreferenceCompat;
+
+    invoke-virtual {p1, v2}, Landroidx/preference/SwitchPreferenceCompat;->setEnabled(Z)V
+
     :goto_0
     const-string p1, "account"
 
--- a/res/values/strings.xml
+++ b/res/values/strings.xml
@@ -303,7 +303,7 @@
     <string name="no_such_book_error_message">"This book couldn't be loaded because it doesn't exist in your library anymore."</string>
     <string name="no_such_book_error_ok">OK</string>
     <string name="no_voice_input_app">No app installed to handle voice input.</string>
-    <string name="page_number_label">%1$d/%2$d</string>
+    <string name="page_number_label">%3$d%% chapter&#160;&#160;|&#160;&#160;%1$d/%2$d %4$d%%</string>
     <string name="paper_page_number_label">(pp. %1$d)</string>
     <string name="password_toggle_content_description">Show password</string>
     <string name="path_password_eye">M12,4.5C7,4.5 2.73,7.61 1,12c1.73,4.39 6,7.5 11,7.5s9.27,-3.11 11,-7.5c-1.73,-4.39 -6,-7.5 -11,-7.5zM12,17c-2.76,0 -5,-2.24 -5,-5s2.24,-5 5,-5 5,2.24 5,5 -2.24,5 -5,5zM12,9c-1.66,0 -3,1.34 -3,3s1.34,3 3,3 3,-1.34 3,-3 -1.34,-3 -3,-3z</string>
--- a/smali/com/faultexception/reader/ReaderActivity.smali
+++ b/smali/com/faultexception/reader/ReaderActivity.smali
@@ -3252,7 +3252,7 @@
 .end method
 
 .method private updateReadingProgress()V
-    .locals 9
+    .locals 11
 
     .line 1401
     iget-object v0, p0, Lcom/faultexception/reader/ReaderActivity;->mBookView:Lcom/faultexception/reader/content/BookView;
@@ -3384,7 +3384,8 @@
 
     const v7, 0x7f100125
 
-    new-array v2, v2, [Ljava/lang/Object;
+    const/4 v9, 0x4
+    new-array v2, v9, [Ljava/lang/Object;
 
     add-int/lit8 v8, v0, 0x1
 
@@ -3401,6 +3402,41 @@
 
     aput-object v8, v2, v4
 
+    iget-object v9, p0, Lcom/faultexception/reader/ReaderActivity;->mBookView:Lcom/faultexception/reader/content/BookView;
+    invoke-virtual {v9}, Lcom/faultexception/reader/content/BookView;->getScrollPosition()F
+    move-result v9
+    const/high16 v10, 0x42c80000     # 100.0f
+    mul-float/2addr v9, v10
+    invoke-static {v9}, Ljava/lang/Math;->round(F)I
+    move-result v9
+    invoke-static {v9}, Ljava/lang/Integer;->valueOf(I)Ljava/lang/Integer;
+    move-result-object v9
+    const/4 v10, 0x2
+    aput-object v9, v2, v10
+
+    const/4 v9, 0x0
+    const/4 v10, 0x1
+    aget-object v9, v2, v9
+    aget-object v10, v2, v10
+    check-cast v9, Ljava/lang/Integer;
+    check-cast v10, Ljava/lang/Integer;
+    invoke-virtual {v9}, Ljava/lang/Integer;->intValue()I
+    move-result v9
+    invoke-virtual {v10}, Ljava/lang/Integer;->intValue()I
+    move-result v10
+    int-to-float v9, v9 # current page (from earlier, arr[0])
+    int-to-float v10, v10 # total pages (from earlier, arr[1])
+
+    div-float/2addr v9, v10
+    const/high16 v10, 0x42c80000 # 100.0f
+    mul-float/2addr v9, v10
+    invoke-static {v9}, Ljava/lang/Math;->round(F)I
+    move-result v9
+    invoke-static {v9}, Ljava/lang/Integer;->valueOf(I)Ljava/lang/Integer;
+    move-result-object v9
+    const/4 v10, 0x3
+    aput-object v9, v2, v10
+
     .line 1410
     invoke-virtual {p0, v7, v2}, Lcom/faultexception/reader/ReaderActivity;->getString(I[Ljava/lang/Object;)Ljava/lang/String;
 
--- a/smali/com/faultexception/reader/model/ProManager.smali
+++ b/smali/com/faultexception/reader/model/ProManager.smali
@@ -297,59 +297,18 @@
 .end method
 
 .method private static setUnlockedState(Landroid/app/Activity;Z)V
-    .locals 4
+        .locals 3
+        invoke-static {p0}, Landroid/preference/PreferenceManager;->getDefaultSharedPreferences(Landroid/content/Context;)Landroid/content/SharedPreferences;
+        move-result-object v0
 
-    .line 95
-    invoke-static {p0}, Landroid/preference/PreferenceManager;->getDefaultSharedPreferences(Landroid/content/Context;)Landroid/content/SharedPreferences;
+        const-string v1, "pro_unlocked"
+        invoke-interface {v0}, Landroid/content/SharedPreferences;->edit()Landroid/content/SharedPreferences$Editor;
+        move-result-object v0
 
-    move-result-object v0
+        const/4 v2, 0x1
+        invoke-interface {v0, v1, v2}, Landroid/content/SharedPreferences$Editor;->putBoolean(Ljava/lang/String;Z)Landroid/content/SharedPreferences$Editor;
+        move-result-object v0
 
-    const-string v1, "pro_unlocked"
-
-    .line 96
-    invoke-interface {v0, v1}, Landroid/content/SharedPreferences;->contains(Ljava/lang/String;)Z
-
-    move-result v2
-
-    const/4 v3, 0x0
-
-    .line 97
-    invoke-interface {v0, v1, v3}, Landroid/content/SharedPreferences;->getBoolean(Ljava/lang/String;Z)Z
-
-    move-result v3
-
-    if-eqz v2, :cond_0
-
-    if-ne v3, p1, :cond_0
-
-    return-void
-
-    .line 101
-    :cond_0
-    invoke-interface {v0}, Landroid/content/SharedPreferences;->edit()Landroid/content/SharedPreferences$Editor;
-
-    move-result-object v0
-
-    invoke-interface {v0, v1, p1}, Landroid/content/SharedPreferences$Editor;->putBoolean(Ljava/lang/String;Z)Landroid/content/SharedPreferences$Editor;
-
-    move-result-object v0
-
-    invoke-interface {v0}, Landroid/content/SharedPreferences$Editor;->apply()V
-
-    if-eqz v2, :cond_2
-
-    if-eqz p1, :cond_1
-
-    .line 105
-    invoke-static {p0}, Lcom/faultexception/reader/model/ProManager;->handleProActivate(Landroid/app/Activity;)V
-
-    goto :goto_0
-
-    .line 107
-    :cond_1
-    invoke-static {p0}, Lcom/faultexception/reader/model/ProManager;->handleProDeactivate(Landroid/content/Context;)V
-
-    :cond_2
-    :goto_0
-    return-void
+        invoke-interface {v0}, Landroid/content/SharedPreferences$Editor;->apply()V
+        return-void
 .end method
--- /dev/null
+++ b/res/values-night-v31/colors.xml
@@ -1 +1,32 @@
+<?xml version="1.0" encoding="utf-8"?>
+<resources>
+    <color name="app_primary">@android:color/system_accent1_200</color>
+    <color name="app_primary_dark">@color/color_surface</color>
+    <color name="app_secondary">@android:color/system_accent2_200</color>
+    <color name="navigation_bar_color">@android:color/system_neutral1_900</color>
+    <color name="color_surface">@android:color/system_neutral1_900</color>
+    <color name="surface_status_bar_color">@color/color_surface</color>
+    <color name="launch_toolbar_color">@color/color_surface</color>
+    <color name="book_list_background_color">@android:color/system_neutral1_900</color>
+    <color name="book_item_background_color">@android:color/system_neutral1_800</color>
+    <color name="book_item_no_cover_tint">@android:color/system_neutral1_600</color>
+    <color name="book_item_selected_check_color">@android:color/system_accent1_800</color>
+    <color name="book_item_selected_scrim_color">#77ffffff</color>
+    <color name="drawer_background_color">@android:color/system_neutral1_900</color>
+    <color name="drawer_item_selected_bg_color">@android:color/system_neutral1_800</color>
+    <color name="drawer_scrim_color">#55000000</color>
+    <color name="search_status_bar_color">@color/color_surface</color>
+    <color name="search_toolbar_color">@color/color_surface</color>
+    <color name="reader_search_bg_color">@color/book_list_background_color</color>
+    <color name="reader_drawer_tabs_background">@color/color_surface</color>
+    <!--<color name="reader_dark_chrome_color">@android:color/system_neutral2_900</color>-->
+
+    <!--<color name="color_circle_stroke_overlay">#32ffffff</color>-->
+    <!--<color name="display_settings_disabled_icon_color">#42ffffff</color>-->
+    <!--<color name="divider">#1fffffff</color>-->
+    <!--<color name="ripple_fallback_color">#1fffffff</color>-->
+    <!--<color name="search_recent_icon_tint">#40ffffff</color>-->
+    <!--<color name="selection_notes_none_color">#ffb9b9b9</color>-->
+    <!--<color name="text_hint">#61ffffff</color>-->
+    <!--<color name="themes_new_circle_color">#ff525252</color>-->
+</resources>
--- a/res/layout/books_list_item.xml
+++ b/res/layout/books_list_item.xml
@@ -1,5 +1,5 @@
 <?xml version="1.0" encoding="utf-8"?>
-<androidx.cardview.widget.CardView android:layout_width="fill_parent" android:layout_height="wrap_content" android:layout_margin="5.0dip" android:foreground="?android:selectableItemBackground" app:cardCornerRadius="4.0dip"
+<androidx.cardview.widget.CardView android:layout_width="fill_parent" android:layout_height="wrap_content" android:layout_margin="8.0dip" android:foreground="?android:selectableItemBackground" app:cardCornerRadius="12.0dip" app:cardElevation="0dp"
   xmlns:android="http://schemas.android.com/apk/res/android" xmlns:app="http://schemas.android.com/apk/res-auto">
     <LinearLayout android:orientation="horizontal" android:layout_width="fill_parent" android:layout_height="fill_parent">
         <FrameLayout android:id="@id/cover_container" android:layout_width="48.0dip" android:layout_height="fill_parent">
--- a/res/layout/books_grid_item.xml
+++ b/res/layout/books_grid_item.xml
@@ -1,5 +1,5 @@
 <?xml version="1.0" encoding="utf-8"?>
-<androidx.cardview.widget.CardView android:layout_width="fill_parent" android:layout_height="wrap_content" android:layout_margin="5.0dip" android:foreground="?android:selectableItemBackground" app:cardCornerRadius="4.0dip"
+<androidx.cardview.widget.CardView android:layout_width="fill_parent" android:layout_height="wrap_content" android:layout_margin="8.0dip" android:foreground="?android:selectableItemBackground" app:cardCornerRadius="12.0dip" app:cardElevation="0dp"
   xmlns:android="http://schemas.android.com/apk/res/android" xmlns:app="http://schemas.android.com/apk/res-auto">
     <LinearLayout android:orientation="vertical" android:layout_width="fill_parent" android:layout_height="fill_parent">
         <com.faultexception.reader.widget.CoverFrameLayout android:id="@id/cover_container" android:layout_width="fill_parent" android:layout_height="wrap_content">
--- a/smali/com/faultexception/reader/BooksFragment.smali
+++ b/smali/com/faultexception/reader/BooksFragment.smali
@@ -2417,7 +2417,7 @@
     .line 165
     iget-object p1, p0, Lcom/faultexception/reader/BooksFragment;->mContext:Landroid/content/Context;
 
-    const/16 v0, 0xa
+    const/16 v0, 16
 
     invoke-static {p1, v0}, Lcom/faultexception/reader/util/Utils;->dpToPx(Landroid/content/Context;I)I
 
@@ -3615,3 +3615,5 @@
     return-void
 .end method
 
+
+
--- a/smali/com/faultexception/reader/ReaderActivity.smali
+++ b/smali/com/faultexception/reader/ReaderActivity.smali
@@ -805,22 +805,8 @@
 
     float-to-int v3, v3
 
-    .line 512
-    invoke-static {v0}, Landroid/graphics/Color;->blue(I)I
+    move v1, v0
 
-    move-result v4
-
-    int-to-float v4, v4
-
-    mul-float v4, v4, v2
-
-    float-to-int v2, v4
-
-    .line 510
-    invoke-static {v1, v3, v2}, Landroid/graphics/Color;->rgb(III)I
-
-    move-result v1
-
     iput v1, p0, Lcom/faultexception/reader/ReaderActivity;->mStatusBarColor:I
 
     .line 513
--- a/smali/com/faultexception/reader/content/HtmlContentWebView.smali
+++ b/smali/com/faultexception/reader/content/HtmlContentWebView.smali
@@ -40,7 +40,7 @@
 
 .field private mContentScaleY:F
 
-.field private mContext:Landroid/content/Context;
+.field public mContext:Landroid/content/Context;
 
 .field private mCurrentTocEntry:Lcom/faultexception/reader/book/TocEntry;
 
--- /dev/null
+++ b/smali/com/faultexception/reader/ReadingTimer.smali
@@ -1 +1,55 @@
+
+.class public Lcom/faultexception/reader/ReadingTimer;
+.super Ljava/lang/Object;
+
+.field private static handler:Landroid/os/Handler;
+.field private static runnable:Ljava/lang/Runnable;
+.field private static started:Z
+
+.method public constructor <init>()V
+	.locals 0
+	invoke-direct {p0}, Ljava/lang/Object;-><init>()V
+	return-void
+.end method
+
+.method public static start(Landroid/content/Context;)V
+	.locals 4
+	sget-boolean v0, Lcom/faultexception/reader/ReadingTimer;->started:Z
+	if-nez v0, :done
+
+	const/4 v0, 0x1
+	sput-boolean v0, Lcom/faultexception/reader/ReadingTimer;->started:Z
+
+	new-instance v0, Landroid/os/Handler;
+	invoke-direct {v0}, Landroid/os/Handler;-><init>()V
+	sput-object v0, Lcom/faultexception/reader/ReadingTimer;->handler:Landroid/os/Handler;
+
+	new-instance v0, Lcom/faultexception/reader/ReadingTimer$1;
+	invoke-direct {v0, p0}, Lcom/faultexception/reader/ReadingTimer$1;-><init>(Landroid/content/Context;)V
+	sput-object v0, Lcom/faultexception/reader/ReadingTimer;->runnable:Ljava/lang/Runnable;
+
+	sget-object v0, Lcom/faultexception/reader/ReadingTimer;->handler:Landroid/os/Handler;
+	sget-object v1, Lcom/faultexception/reader/ReadingTimer;->runnable:Ljava/lang/Runnable;
+	const-wide/32 v2, 600000
+	invoke-virtual {v0, v1, v2, v3}, Landroid/os/Handler;->postDelayed(Ljava/lang/Runnable;J)Z
+	move-result v0
+
+	:done
+	return-void
+.end method
+
+.method public static stop()V
+	.locals 2
+	sget-object v0, Lcom/faultexception/reader/ReadingTimer;->handler:Landroid/os/Handler;
+	if-eqz v0, :done
+	sget-object v1, Lcom/faultexception/reader/ReadingTimer;->runnable:Ljava/lang/Runnable;
+	invoke-virtual {v0, v1}, Landroid/os/Handler;->removeCallbacks(Ljava/lang/Runnable;)V
+
+	const/4 v0, 0x0
+	sput-object v0, Lcom/faultexception/reader/ReadingTimer;->handler:Landroid/os/Handler;
+	sput-object v0, Lcom/faultexception/reader/ReadingTimer;->runnable:Ljava/lang/Runnable;
+	sput-boolean v0, Lcom/faultexception/reader/ReadingTimer;->started:Z
+
+	:done
+	return-void
+.end method
--- /dev/null
+++ b/smali_classes2/com/faultexception/reader/ReadingTimer.smali
@@ -1 +1,55 @@
+
+.class public Lcom/faultexception/reader/ReadingTimer;
+.super Ljava/lang/Object;
+
+.field private static handler:Landroid/os/Handler;
+.field private static runnable:Ljava/lang/Runnable;
+.field private static started:Z
+
+.method public constructor <init>()V
+	.locals 0
+	invoke-direct {p0}, Ljava/lang/Object;-><init>()V
+	return-void
+.end method
+
+.method public static start(Landroid/content/Context;)V
+	.locals 4
+	sget-boolean v0, Lcom/faultexception/reader/ReadingTimer;->started:Z
+	if-nez v0, :done
+
+	const/4 v0, 0x1
+	sput-boolean v0, Lcom/faultexception/reader/ReadingTimer;->started:Z
+
+	new-instance v0, Landroid/os/Handler;
+	invoke-direct {v0}, Landroid/os/Handler;-><init>()V
+	sput-object v0, Lcom/faultexception/reader/ReadingTimer;->handler:Landroid/os/Handler;
+
+	new-instance v0, Lcom/faultexception/reader/ReadingTimer$1;
+	invoke-direct {v0, p0}, Lcom/faultexception/reader/ReadingTimer$1;-><init>(Landroid/content/Context;)V
+	sput-object v0, Lcom/faultexception/reader/ReadingTimer;->runnable:Ljava/lang/Runnable;
+
+	sget-object v0, Lcom/faultexception/reader/ReadingTimer;->handler:Landroid/os/Handler;
+	sget-object v1, Lcom/faultexception/reader/ReadingTimer;->runnable:Ljava/lang/Runnable;
+	const-wide/32 v2, 600000
+	invoke-virtual {v0, v1, v2, v3}, Landroid/os/Handler;->postDelayed(Ljava/lang/Runnable;J)Z
+	move-result v0
+
+	:done
+	return-void
+.end method
+
+.method public static stop()V
+	.locals 2
+	sget-object v0, Lcom/faultexception/reader/ReadingTimer;->handler:Landroid/os/Handler;
+	if-eqz v0, :done
+	sget-object v1, Lcom/faultexception/reader/ReadingTimer;->runnable:Ljava/lang/Runnable;
+	invoke-virtual {v0, v1}, Landroid/os/Handler;->removeCallbacks(Ljava/lang/Runnable;)V
+
+	const/4 v0, 0x0
+	sput-object v0, Lcom/faultexception/reader/ReadingTimer;->handler:Landroid/os/Handler;
+	sput-object v0, Lcom/faultexception/reader/ReadingTimer;->runnable:Ljava/lang/Runnable;
+	sput-boolean v0, Lcom/faultexception/reader/ReadingTimer;->started:Z
+
+	:done
+	return-void
+.end method
--- /dev/null
+++ b/smali/com/faultexception/reader/ReadingTimer$1.smali
@@ -1 +1,24 @@
+
+.class final Lcom/faultexception/reader/ReadingTimer$1;
+.super Ljava/lang/Object;
+.implements Ljava/lang/Runnable;
+
+.field private final val$context:Landroid/content/Context;
+
+.method public constructor <init>(Landroid/content/Context;)V
+	.locals 0
+	invoke-direct {p0}, Ljava/lang/Object;-><init>()V
+	iput-object p1, p0, Lcom/faultexception/reader/ReadingTimer$1;->val$context:Landroid/content/Context;
+	return-void
+.end method
+
+.method public run()V
+	.locals 3
+	iget-object v0, p0, Lcom/faultexception/reader/ReadingTimer$1;->val$context:Landroid/content/Context;
+	const-string v1, "You have reached your reading goal for today!"
+	const/4 v2, 0x1
+	invoke-static {v0, v1, v2}, Landroid/widget/Toast;->makeText(Landroid/content/Context;Ljava/lang/CharSequence;I)Landroid/widget/Toast;
+	move-result-object v0
+	invoke-virtual {v0}, Landroid/widget/Toast;->show()V
+	return-void
+.end method
--- a/smali/com/faultexception/reader/content/HtmlContentWebView.smali
+++ b/smali/com/faultexception/reader/content/HtmlContentWebView.smali
@@ -4234,3 +4234,19 @@
 
     return-object p1
 .end method
+
+.method protected onAttachedToWindow()V
+    .locals 1
+    invoke-super {p0}, Landroid/webkit/WebView;->onAttachedToWindow()V
+    invoke-virtual {p0}, Landroid/view/View;->getContext()Landroid/content/Context;
+    move-result-object v0
+    invoke-static {v0}, Lcom/faultexception/reader/ReadingTimer;->start(Landroid/content/Context;)V
+    return-void
+.end method
+
+.method protected onDetachedFromWindow()V
+    .locals 1
+    invoke-super {p0}, Landroid/webkit/WebView;->onDetachedFromWindow()V
+    invoke-static {}, Lcom/faultexception/reader/ReadingTimer;->stop()V
+    return-void
+.end method
--- a/res/xml/preferences.xml
+++ b/res/xml/preferences.xml
@@ -26,6 +26,7 @@
     </PreferenceCategory>
 
     <PreferenceCategory android:title="@string/pref_category_advanced">
+        <SwitchPreferenceCompat android:title="Show series in drawer" android:key="series_in_drawer" android:defaultValue="false" />
         <SwitchPreferenceCompat android:title="Use hyphenation" android:key="hyphenation" android:defaultValue="true" />
         <SwitchPreferenceCompat android:title="Hide footer slider (reader)" android:key="hide_reader_footer" android:defaultValue="false" />
         <SwitchPreferenceCompat android:title="Hide footer (grid view)" android:key="only_covers" android:defaultValue="false" />
--- /dev/null
+++ b/res/layout/empty_series.xml
@@ -1 +1,6 @@
+<?xml version="1.0" encoding="utf-8"?>
+<LinearLayout android:gravity="center" android:orientation="vertical" android:padding="20.0dip" android:clipToPadding="false" android:layout_width="fill_parent" android:layout_height="wrap_content" android:layout_marginBottom="?actionBarSize" xmlns:android="http://schemas.android.com/apk/res/android" xmlns:app="http://schemas.android.com/apk/res-auto">
+    <ImageView android:id="@id/empty_image" android:layout_width="wrap_content" android:layout_height="wrap_content" android:src="@drawable/ic_library_empty" android:contentDescription="@null" app:tint="?android:textColorPrimary" />
+    <TextView android:textSize="20.0sp" android:textColor="?android:textColorPrimary" android:gravity="center" android:id="@id/empty_title" android:layout_width="300.0dip" android:layout_height="wrap_content" android:text="No books in series" android:fontFamily="sans-serif-condensed" />
+    <Button android:id="@id/empty_goto_all" android:paddingLeft="24.0dip" android:paddingRight="24.0dip" android:layout_width="wrap_content" android:layout_height="wrap_content" android:layout_marginTop="24.0dip" android:text="@string/no_books_goto_all" />
+</LinearLayout>
--- a/res/values/public.xml
+++ b/res/values/public.xml
@@ -3564,4 +3564,5 @@
     <public type="id" name="content_invert_page" id="0x7f0901f5" />
     <public type="drawable" name="ic_rotate_alt" id="0x7f0800ff" />
     <public type="id" name="invert_rotation" id="0x7f0901f6" />
+    <public type="layout" name="empty_series" id="0x7f0c00c3" />
 </resources>
\ No newline at end of file
--- a/smali/com/faultexception/reader/R$layout.smali
+++ b/smali/com/faultexception/reader/R$layout.smali
@@ -413,3 +413,6 @@
 
     return-void
 .end method
+
+
+.field public static final empty_series:I = 0x7f0c00c3
--- a/smali/com/faultexception/reader/BooksFragment.smali
+++ b/smali/com/faultexception/reader/BooksFragment.smali
@@ -25,6 +25,7 @@
 .field public static final EXTRA_CATEGORY_ID:Ljava/lang/String; = "categoryId"
 
 .field public static final EXTRA_FOLDER:Ljava/lang/String; = "folder"
+.field public static final EXTRA_SERIES:Ljava/lang/String; = "series"
 
 .field public static final FILTER_CATEGORY:I = 0x1
 
@@ -972,8 +973,29 @@
 
     if-eq v0, v1, :cond_0
 
+    const v1, 3
+
+    if-eq v0, v1, :cond_0a
+
     goto :goto_0
 
+    :cond_0a
+
+    sget v0, Lcom/faultexception/reader/R$layout;->empty_series:I
+    invoke-virtual {p1, v0, p2}, Landroid/view/LayoutInflater;->inflate(ILandroid/view/ViewGroup;)Landroid/view/View;
+    move-result-object p1
+
+    sget v2, Lcom/faultexception/reader/R$id;->empty_goto_all:I
+    invoke-virtual {p1, v2}, Landroid/view/View;->findViewById(I)Landroid/view/View;
+    move-result-object p1
+
+    check-cast p1, Landroid/widget/Button;
+    iput-object p1, p0, Lcom/faultexception/reader/BooksFragment;->mEmptyGotoAllButton:Landroid/widget/Button;
+
+    invoke-virtual {p1, p0}, Landroid/widget/Button;->setOnClickListener(Landroid/view/View$OnClickListener;)V
+
+    goto :goto_0
+
     :cond_0
     const v0, 0x7f0c005a
 
@@ -1042,6 +1062,8 @@
 
     :goto_0
     return-void
+
+
 .end method
 
 .method static synthetic lambda$showRenameCategoryDialog$6(Landroidx/appcompat/app/AlertDialog;Landroid/widget/TextView;ILandroid/view/KeyEvent;)Z
@@ -1197,6 +1219,16 @@
     return-void
 .end method
 
+
+.method private loadSeries(Ljava/lang/String;)V
+    .locals 1
+
+    const/4 v0, 3
+    iput v0, p0, Lcom/faultexception/reader/BooksFragment;->mFilter:I
+    iput-object p1, p0, Lcom/faultexception/reader/BooksFragment;->mTitle:Ljava/lang/String;
+
+    return-void
+.end method
 .method private loadNone()V
     .locals 1
 
@@ -1260,6 +1292,22 @@
     return-object v0
 .end method
 
+
+.method public static newSeriesInstance(Ljava/lang/String;)Landroidx/fragment/app/Fragment;
+    .locals 3
+
+    new-instance v0, Lcom/faultexception/reader/BooksFragment;
+    invoke-direct {v0}, Lcom/faultexception/reader/BooksFragment;-><init>()V
+
+    new-instance v1, Landroid/os/Bundle;
+    invoke-direct {v1}, Landroid/os/Bundle;-><init>()V
+
+    sget-object v2, Lcom/faultexception/reader/BooksFragment;->EXTRA_SERIES:Ljava/lang/String;
+    invoke-virtual {v1, v2, p0}, Landroid/os/Bundle;->putString(Ljava/lang/String;Ljava/lang/String;)V
+    invoke-virtual {v0, v1}, Lcom/faultexception/reader/BooksFragment;->setArguments(Landroid/os/Bundle;)V
+
+    return-object v0
+.end method
 .method public static newInstance()Landroidx/fragment/app/Fragment;
     .locals 1
 
@@ -1925,6 +1973,15 @@
 
     if-ne p1, v4, :cond_1
 
+    sget-object p1, Lcom/faultexception/reader/BooksFragment;->EXTRA_SERIES:Ljava/lang/String;
+    invoke-virtual {v0, p1}, Landroid/os/Bundle;->getString(Ljava/lang/String;)Ljava/lang/String;
+    move-result-object v4
+    invoke-virtual {v1, p1}, Landroid/os/Bundle;->getString(Ljava/lang/String;)Ljava/lang/String;
+    move-result-object p1
+    invoke-static {v4, p1}, Landroid/text/TextUtils;->equals(Ljava/lang/CharSequence;Ljava/lang/CharSequence;)Z
+    move-result p1
+    if-eqz p1, :cond_1
+
     const-string p1, "categoryId"
 
     .line 891
@@ -1976,6 +2033,8 @@
 
     :goto_2
     return v2
+
+
 .end method
 
 .method public getFilter()I
@@ -2007,6 +2066,16 @@
     return v0
 
     :cond_1
+
+    sget-object v2, Lcom/faultexception/reader/BooksFragment;->EXTRA_SERIES:Ljava/lang/String;
+    invoke-virtual {v0, v2}, Landroid/os/Bundle;->containsKey(Ljava/lang/String;)Z
+    move-result v2
+    if-eqz v2, :cond_1a
+
+    const/4 v2, 3
+    return v2
+
+    :cond_1a
     const-string v2, "folder"
 
     .line 415
@@ -2022,6 +2091,7 @@
 
     :cond_2
     return v1
+
 .end method
 
 .method public synthetic lambda$addToCategory$3$BooksFragment(Ljava/util/List;ZLandroidx/appcompat/view/ActionMode;J)V
@@ -2275,6 +2345,18 @@
 
     .line 129
     :cond_1
+
+    sget-object v0, Lcom/faultexception/reader/BooksFragment;->EXTRA_SERIES:Ljava/lang/String;
+    invoke-virtual {p1, v0}, Landroid/os/Bundle;->containsKey(Ljava/lang/String;)Z
+    move-result v1
+    if-eqz v1, :cond_1a
+
+    invoke-virtual {p1, v0}, Landroid/os/Bundle;->getString(Ljava/lang/String;)Ljava/lang/String;
+    move-result-object p1
+    invoke-direct {p0, p1}, Lcom/faultexception/reader/BooksFragment;->loadSeries(Ljava/lang/String;)V
+    goto :goto_0
+
+    :cond_1a
     invoke-direct {p0}, Lcom/faultexception/reader/BooksFragment;->loadNone()V
 
     goto :goto_0
@@ -2285,6 +2367,9 @@
 
     :goto_0
     return-void
+
+
+
 .end method
 
 .method public onCreateOptionsMenu(Landroid/view/Menu;Landroid/view/MenuInflater;)V
@@ -3081,8 +3166,33 @@
     return-void
 .end method
 
+.method private static runQuery_seriesHelper(Landroid/database/sqlite/SQLiteDatabase;Ljava/lang/String;[Ljava/lang/String;Ljava/lang/String;[Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Lcom/faultexception/reader/BooksFragment;)Landroid/database/Cursor;
+    .locals 3
+
+    const v0, 3
+    iget v1, p8, Lcom/faultexception/reader/BooksFragment;->mFilter:I
+    if-ne v0, v1, :done
+
+    const-string v0, "series=?"
+    invoke-static {p3, v0}, Landroid/database/DatabaseUtils;->concatenateWhere(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;
+    move-result-object p3
+
+    const v1, 1
+    new-array v0, v1, [Ljava/lang/String;
+    iget-object v2, p8, Lcom/faultexception/reader/BooksFragment;->mTitle:Ljava/lang/String;
+    const v1, 0
+    aput-object v2, v0, v1
+    invoke-static {p4, v0}, Landroid/database/DatabaseUtils;->appendSelectionArgs([Ljava/lang/String;[Ljava/lang/String;)[Ljava/lang/String;
+    move-result-object p4
+
+    :done
+    invoke-virtual/range {p0 .. p7}, Landroid/database/sqlite/SQLiteDatabase;->query(Ljava/lang/String;[Ljava/lang/String;Ljava/lang/String;[Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Landroid/database/Cursor;
+    move-result-object p0
+    return-object p0
+.end method
+
 .method public runQuery(Z)V
-    .locals 23
+    .locals 24
 
     move-object/from16 v0, p0
 
@@ -3491,7 +3600,8 @@
 
     const-string v16, "books"
 
-    invoke-virtual/range {v15 .. v22}, Landroid/database/sqlite/SQLiteDatabase;->query(Ljava/lang/String;[Ljava/lang/String;Ljava/lang/String;[Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Landroid/database/Cursor;
+    move-object/from16 v23, p0
+    invoke-static/range {v15 .. v23}, Lcom/faultexception/reader/BooksFragment;->runQuery_seriesHelper(Landroid/database/sqlite/SQLiteDatabase;Ljava/lang/String;[Ljava/lang/String;Ljava/lang/String;[Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Lcom/faultexception/reader/BooksFragment;)Landroid/database/Cursor;
 
     move-result-object v3
 
@@ -3617,3 +3727,5 @@
 
 
 
+
+
--- /dev/null
+++ b/res/drawable-anydpi-v21/ic_drawer_collection.xml
@@ -1 +1,5 @@
+<?xml version="1.0" encoding="utf-8"?>
+<vector xmlns:android="http://schemas.android.com/apk/res/android" android:height="24dp" android:width="24dp" android:viewportWidth="24" android:viewportHeight="24">
+    <path android:fillColor="#ff000000" android:pathData="M4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6z" />
+    <path android:fillColor="#ff000000" android:pathData="M20 2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 10l-2.5-1.5L15 12V4h5v8z" />
+</vector>
--- a/res/values/public.xml
+++ b/res/values/public.xml
@@ -3565,4 +3565,5 @@
     <public type="drawable" name="ic_rotate_alt" id="0x7f0800ff" />
     <public type="id" name="invert_rotation" id="0x7f0901f6" />
     <public type="layout" name="empty_series" id="0x7f0c00c3" />
+    <public type="drawable" name="ic_drawer_collection" id="0x7f080100" />
 </resources>
\ No newline at end of file
--- a/smali/com/faultexception/reader/R$drawable.smali
+++ b/smali/com/faultexception/reader/R$drawable.smali
@@ -527,3 +527,6 @@
 
 
 .field public static final ic_rotate_alt:I = 0x7f0800ff
+
+
+.field public static final ic_drawer_collection:I = 0x7f080100
--- /dev/null
+++ b/smali/com/faultexception/reader/MainDrawerFragment$SeriesAdapter.smali
@@ -1 +1,92 @@
+.class Lcom/faultexception/reader/MainDrawerFragment$SeriesAdapter;
+.super Landroid/widget/CursorAdapter;
+
+.annotation system Ldalvik/annotation/EnclosingClass;
+    value = Lcom/faultexception/reader/MainDrawerFragment;
+.end annotation
+
+.annotation system Ldalvik/annotation/InnerClass;
+    accessFlags = 0x2
+    name = "SeriesAdapter"
+.end annotation
+
+.field final synthetic this$0:Lcom/faultexception/reader/MainDrawerFragment;
+
+.method public constructor <init>(Lcom/faultexception/reader/MainDrawerFragment;Landroid/content/Context;)V
+    .locals 1
+
+    iput-object p1, p0, Lcom/faultexception/reader/MainDrawerFragment$SeriesAdapter;->this$0:Lcom/faultexception/reader/MainDrawerFragment;
+    const/4 p1, 0x0
+    const/4 v0, 0x0
+    invoke-direct {p0, p2, p1, v0}, Landroid/widget/CursorAdapter;-><init>(Landroid/content/Context;Landroid/database/Cursor;I)V
+
+    return-void
+.end method
+
+.method public bindView(Landroid/view/View;Landroid/content/Context;Landroid/database/Cursor;)V
+    .locals 5
+
+    const v0, 1
+    invoke-interface {p3, v0}, Landroid/database/Cursor;->getString(I)Ljava/lang/String;
+    move-result-object v0
+
+    iget-object v1, p0, Lcom/faultexception/reader/MainDrawerFragment$SeriesAdapter;->this$0:Lcom/faultexception/reader/MainDrawerFragment;
+    invoke-static {v1}, Lcom/faultexception/reader/MainDrawerFragment;->access$300(Lcom/faultexception/reader/MainDrawerFragment;)Landroidx/fragment/app/Fragment;
+    move-result-object v1
+    instance-of v2, v1, Lcom/faultexception/reader/BooksFragment;
+    if-eqz v2, :nomatch
+
+    check-cast v1, Lcom/faultexception/reader/BooksFragment;
+    invoke-virtual {v1}, Lcom/faultexception/reader/BooksFragment;->getFilter()I
+    move-result v2
+    const v3, 3
+    if-ne v3, v2, :nomatch
+
+    invoke-virtual {v1}, Lcom/faultexception/reader/BooksFragment;->getArguments()Landroid/os/Bundle;
+    move-result-object v1
+    sget-object v2, Lcom/faultexception/reader/BooksFragment;->EXTRA_SERIES:Ljava/lang/String;
+    invoke-virtual {v1, v2}, Landroid/os/Bundle;->getString(Ljava/lang/String;)Ljava/lang/String;
+    move-result-object v2
+    invoke-static {v0, v2}, Landroid/text/TextUtils;->equals(Ljava/lang/CharSequence;Ljava/lang/CharSequence;)Z
+    move-result v2
+    if-eqz v2, :nomatch
+
+    const v1, 1
+    goto :match
+    :nomatch
+    const v1, 0
+    :match
+
+    sget v2, Lcom/faultexception/reader/R$drawable;->ic_drawer_collection:I
+    invoke-static {p2, p1, v2, v0, v1}, Lcom/faultexception/reader/util/DrawerAdapterHelper;->bindView(Landroid/content/Context;Landroid/view/View;ILjava/lang/String;Z)V
+
+    return-void
+.end method
+
+.method public newView(Landroid/content/Context;Landroid/database/Cursor;Landroid/view/ViewGroup;)Landroid/view/View;
+    .locals 0
+    invoke-static {p1, p3}, Lcom/faultexception/reader/util/DrawerAdapterHelper;->inflateView(Landroid/content/Context;Landroid/view/ViewGroup;)Landroid/view/View;
+    move-result-object p1
+    return-object p1
+.end method
+
+.method public getSeriesAtIndex(I)Ljava/lang/String;
+    .locals 1
+
+    invoke-virtual {p0}, Lcom/faultexception/reader/MainDrawerFragment$SeriesAdapter;->getCursor()Landroid/database/Cursor;
+    move-result-object v0
+
+    invoke-interface {v0, p1}, Landroid/database/Cursor;->moveToPosition(I)Z
+    move-result p1
+
+    if-eqz p1, :null
+
+    const p1, 1
+    invoke-interface {v0, p1}, Landroid/database/Cursor;->getString(I)Ljava/lang/String;
+    move-result-object p1
+    return-object p1
+
+    :null
+    const p1, 0x0
+    return-object p1
+.end method
--- /dev/null
+++ b/res/layout/series_list_header.xml
@@ -1 +1,5 @@
+<?xml version="1.0" encoding="utf-8"?>
+<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" android:orientation="vertical" android:layout_width="match_parent" android:layout_height="match_parent">
+    <View android:background="@color/divider" android:layout_width="match_parent" android:layout_height="1dp" android:layout_marginTop="8dp"/>
+    <TextView android:textSize="14sp" android:textColor="?android:attr/textColorSecondary" android:gravity="center_vertical" android:paddingLeft="16dp" android:paddingRight="16dp" android:layout_width="match_parent" android:layout_height="48dp" android:text="Series" android:fontFamily="sans-serif-medium"/>
+</LinearLayout>
--- a/res/values/public.xml
+++ b/res/values/public.xml
@@ -3566,4 +3566,5 @@
     <public type="id" name="invert_rotation" id="0x7f0901f6" />
     <public type="layout" name="empty_series" id="0x7f0c00c3" />
     <public type="drawable" name="ic_drawer_collection" id="0x7f080100" />
+    <public type="layout" name="series_list_header" id="0x7f0c00c4" />
 </resources>
\ No newline at end of file
--- a/smali/com/faultexception/reader/R$layout.smali
+++ b/smali/com/faultexception/reader/R$layout.smali
@@ -416,3 +416,6 @@
 
 
 .field public static final empty_series:I = 0x7f0c00c3
+
+
+.field public static final series_list_header:I = 0x7f0c00c4
--- a/smali/com/faultexception/reader/MainDrawerFragment.smali
+++ b/smali/com/faultexception/reader/MainDrawerFragment.smali
@@ -25,6 +25,10 @@
 
 .field private mDatabase:Landroid/database/sqlite/SQLiteDatabase;
 
+.field private mSeriesSection:Lcom/faultexception/reader/util/adapters/MultiAdapter;
+
+.field private mSeriesAdapter:Lcom/faultexception/reader/MainDrawerFragment$SeriesAdapter;
+
 .field private mFolderSection:Lcom/faultexception/reader/util/adapters/MultiAdapter;
 
 .field private mFoldersAdapter:Lcom/faultexception/reader/MainDrawerFragment$FoldersAdapter;
@@ -182,6 +186,32 @@
     return-void
 .end method
 
+
+.method private onCreateViewSeries()V
+    .locals 4
+
+    invoke-virtual {p0}, Lcom/faultexception/reader/MainDrawerFragment;->requireContext()Landroid/content/Context;
+    move-result-object v0
+
+    new-instance v1, Lcom/faultexception/reader/util/adapters/MultiAdapter;
+    invoke-direct {v1}, Lcom/faultexception/reader/util/adapters/MultiAdapter;-><init>()V
+    iput-object v1, p0, Lcom/faultexception/reader/MainDrawerFragment;->mSeriesSection:Lcom/faultexception/reader/util/adapters/MultiAdapter;
+
+    new-instance v2, Lcom/faultexception/reader/util/adapters/SingleViewAdapter;
+    sget v3, Lcom/faultexception/reader/R$layout;->series_list_header:I
+    invoke-direct {v2, v0, v3}, Lcom/faultexception/reader/util/adapters/SingleViewAdapter;-><init>(Landroid/content/Context;I)V
+    invoke-virtual {v1, v2}, Lcom/faultexception/reader/util/adapters/MultiAdapter;->addAdapter(Landroid/widget/BaseAdapter;)V
+
+    new-instance v2, Lcom/faultexception/reader/MainDrawerFragment$SeriesAdapter;
+    invoke-direct {v2, p0, v0}, Lcom/faultexception/reader/MainDrawerFragment$SeriesAdapter;-><init>(Lcom/faultexception/reader/MainDrawerFragment;Landroid/content/Context;)V
+    invoke-virtual {v1, v2}, Lcom/faultexception/reader/util/adapters/MultiAdapter;->addAdapter(Landroid/widget/BaseAdapter;)V
+    iput-object v2, p0, Lcom/faultexception/reader/MainDrawerFragment;->mSeriesAdapter:Lcom/faultexception/reader/MainDrawerFragment$SeriesAdapter;
+
+    iget-object v2, p0, Lcom/faultexception/reader/MainDrawerFragment;->mAdapter:Lcom/faultexception/reader/util/adapters/MultiAdapter;
+    invoke-virtual {v2, v1}, Lcom/faultexception/reader/util/adapters/MultiAdapter;->addAdapter(Landroid/widget/BaseAdapter;)V
+
+    return-void
+.end method
 .method public onCreateView(Landroid/view/LayoutInflater;Landroid/view/ViewGroup;Landroid/os/Bundle;)Landroid/view/View;
     .locals 2
 
@@ -318,6 +348,8 @@
 
     iput-object p3, p0, Lcom/faultexception/reader/MainDrawerFragment;->mFolderSection:Lcom/faultexception/reader/util/adapters/MultiAdapter;
 
+    invoke-direct {p0}, Lcom/faultexception/reader/MainDrawerFragment;->onCreateViewSeries()V
+
     .line 102
     new-instance v0, Lcom/faultexception/reader/util/adapters/SingleViewAdapter;
 
@@ -403,6 +435,35 @@
     return-void
 .end method
 
+
+.method private checkItemClickSeries(Lcom/faultexception/reader/util/adapters/MultiAdapter$Projection;)V
+    .locals 3
+
+    iget-object v0, p0, Lcom/faultexception/reader/MainDrawerFragment;->mSeriesSection:Lcom/faultexception/reader/util/adapters/MultiAdapter;
+    iget-object v1, p1, Lcom/faultexception/reader/util/adapters/MultiAdapter$Projection;->adapter:Landroid/widget/BaseAdapter;
+    if-ne v0, v1, :not
+
+    iget v2, p1, Lcom/faultexception/reader/util/adapters/MultiAdapter$Projection;->index:I
+    invoke-virtual {v0, v2}, Lcom/faultexception/reader/util/adapters/MultiAdapter;->getProjection(I)Lcom/faultexception/reader/util/adapters/MultiAdapter$Projection;
+    move-result-object p1
+
+    iget-object v0, p0, Lcom/faultexception/reader/MainDrawerFragment;->mSeriesAdapter:Lcom/faultexception/reader/MainDrawerFragment$SeriesAdapter;
+    iget-object v1, p1, Lcom/faultexception/reader/util/adapters/MultiAdapter$Projection;->adapter:Landroid/widget/BaseAdapter;
+    if-ne v0, v1, :not
+
+    iget v2, p1, Lcom/faultexception/reader/util/adapters/MultiAdapter$Projection;->index:I
+    invoke-virtual {v0, v2}, Lcom/faultexception/reader/MainDrawerFragment$SeriesAdapter;->getSeriesAtIndex(I)Ljava/lang/String;
+    move-result-object p1
+
+    invoke-static {p1}, Lcom/faultexception/reader/BooksFragment;->newSeriesInstance(Ljava/lang/String;)Landroidx/fragment/app/Fragment;
+    move-result-object p1
+
+    iget-object v2, p0, Lcom/faultexception/reader/MainDrawerFragment;->mListener:Lcom/faultexception/reader/MainDrawerFragment$Listener;
+    invoke-interface {v2, p1}, Lcom/faultexception/reader/MainDrawerFragment$Listener;->switchToFragment(Landroidx/fragment/app/Fragment;)V
+
+    :not
+    return-void
+.end method
 .method public onItemClick(Landroid/widget/AdapterView;Landroid/view/View;IJ)V
     .locals 0
     .annotation system Ldalvik/annotation/Signature;
@@ -422,6 +483,8 @@
 
     move-result-object p1
 
+    invoke-direct {p0, p1}, Lcom/faultexception/reader/MainDrawerFragment;->checkItemClickSeries(Lcom/faultexception/reader/util/adapters/MultiAdapter$Projection;)V
+
     .line 161
     iget-object p2, p1, Lcom/faultexception/reader/util/adapters/MultiAdapter$Projection;->adapter:Landroid/widget/BaseAdapter;
 
@@ -600,6 +663,39 @@
     return-void
 .end method
 
+
+.method private refreshSeries()V
+    .locals 3
+
+    invoke-virtual {p0}, Lcom/faultexception/reader/MainDrawerFragment;->isAdded()Z
+    move-result v0
+    if-eqz v0, :done
+
+    invoke-virtual {p0}, Lcom/faultexception/reader/MainDrawerFragment;->getActivity()Landroidx/fragment/app/FragmentActivity;
+    move-result-object v0
+    invoke-static {v0}, Landroid/preference/PreferenceManager;->getDefaultSharedPreferences(Landroid/content/Context;)Landroid/content/SharedPreferences;
+    move-result-object v0
+    const-string v1, "series_in_drawer"
+    const v2, 0x0
+    invoke-interface {v0, v1, v2}, Landroid/content/SharedPreferences;->getBoolean(Ljava/lang/String;Z)Z
+    move-result v2
+
+    iget-object v0, p0, Lcom/faultexception/reader/MainDrawerFragment;->mAdapter:Lcom/faultexception/reader/util/adapters/MultiAdapter;
+    iget-object v1, p0, Lcom/faultexception/reader/MainDrawerFragment;->mSeriesSection:Lcom/faultexception/reader/util/adapters/MultiAdapter;
+    invoke-virtual {v0, v1, v2}, Lcom/faultexception/reader/util/adapters/MultiAdapter;->setEnabled(Landroid/widget/BaseAdapter;Z)V
+    if-eqz v2, :done
+
+    iget-object v0, p0, Lcom/faultexception/reader/MainDrawerFragment;->mDatabase:Landroid/database/sqlite/SQLiteDatabase;
+    const-string v1, "SELECT _id, series FROM books WHERE hidden=0 AND series IS NOT NULL GROUP BY series"
+    const v2, 0x0
+    invoke-virtual {v0, v1, v2}, Landroid/database/sqlite/SQLiteDatabase;->rawQuery(Ljava/lang/String;[Ljava/lang/String;)Landroid/database/Cursor;
+    move-result-object v0
+    iget-object v1, p0, Lcom/faultexception/reader/MainDrawerFragment;->mSeriesAdapter:Lcom/faultexception/reader/MainDrawerFragment$SeriesAdapter;
+    invoke-virtual {v1, v0}, Lcom/faultexception/reader/MainDrawerFragment$SeriesAdapter;->changeCursor(Landroid/database/Cursor;)V
+
+    :done
+    return-void
+.end method
 .method public refresh()V
     .locals 10
 
@@ -713,6 +809,8 @@
     :cond_1
     iget-object v0, p0, Lcom/faultexception/reader/MainDrawerFragment;->mAdapter:Lcom/faultexception/reader/util/adapters/MultiAdapter;
 
+    invoke-direct {p0}, Lcom/faultexception/reader/MainDrawerFragment;->refreshSeries()V
+
     invoke-virtual {v0}, Lcom/faultexception/reader/util/adapters/MultiAdapter;->notifyDataSetChanged()V
 
     return-void
--- a/smali/com/faultexception/reader/MainActivity.smali
+++ b/smali/com/faultexception/reader/MainActivity.smali
@@ -845,6 +845,18 @@
 
     move-result v0
 
+    const v3, 3
+    if-ne v0, v3, :cond_1a
+
+    sget-object v0, Lcom/faultexception/reader/BooksFragment;->EXTRA_SERIES:Ljava/lang/String;
+    invoke-virtual {v1, v0}, Landroid/os/Bundle;->getString(Ljava/lang/String;)Ljava/lang/String;
+    move-result-object v1
+    invoke-interface {v2, v0, v1}, Landroid/content/SharedPreferences$Editor;->putString(Ljava/lang/String;Ljava/lang/String;)Landroid/content/SharedPreferences$Editor;
+
+    goto :goto_0
+
+    :cond_1a
+
     const/4 v3, 0x2
 
     if-ne v0, v3, :cond_1
@@ -865,6 +877,7 @@
 
     :cond_2
     return-void
+
 .end method
 
 
@@ -1519,9 +1532,24 @@
 
     if-eq v2, v3, :cond_2
 
+    const v3, 3
+
+    if-eq v2, v3, :cond_2a
+
     goto :goto_1
 
     .line 182
+    :cond_2a
+    iget-object v2, p0, Lcom/faultexception/reader/MainActivity;->mPrefs:Landroid/content/SharedPreferences;
+    const v3, 0x0
+    const-string v4, "series"
+    invoke-interface {v2, v4, v3}, Landroid/content/SharedPreferences;->getString(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;
+    move-result-object v2
+    invoke-static {v2}, Lcom/faultexception/reader/BooksFragment;->newSeriesInstance(Ljava/lang/String;)Landroidx/fragment/app/Fragment;
+    move-result-object v2
+    invoke-virtual {p0, v2, v0}, Lcom/faultexception/reader/MainActivity;->switchToFragment(Landroidx/fragment/app/Fragment;Z)V
+    goto :goto_1
+
     :cond_2
     iget-object v2, p0, Lcom/faultexception/reader/MainActivity;->mPrefs:Landroid/content/SharedPreferences;
 
@@ -1675,6 +1700,7 @@
     invoke-static {p0}, Lcom/faultexception/reader/backup/BackupEvents;->addObserver(Lcom/faultexception/reader/backup/BackupEvents$Observer;)V
 
     return-void
+
 .end method
 
 .method public onCreateOptionsMenu(Landroid/view/Menu;)Z
--- a/res/values/ids.xml
+++ b/res/values/ids.xml
@@ -403,4 +403,5 @@
     <item type="id" name="content_invert_image" />
     <item type="id" name="content_invert_page" />
     <item type="id" name="invert_rotation" />
+    <item type="id" name="series" />
 </resources>
--- a/res/values/public.xml
+++ b/res/values/public.xml
@@ -3567,4 +3567,5 @@
     <public type="layout" name="empty_series" id="0x7f0c00c3" />
     <public type="drawable" name="ic_drawer_collection" id="0x7f080100" />
     <public type="layout" name="series_list_header" id="0x7f0c00c4" />
+    <public type="id" name="series" id="0x7f0901f7" />
 </resources>
\ No newline at end of file
--- a/smali/com/faultexception/reader/R$id.smali
+++ b/smali/com/faultexception/reader/R$id.smali
@@ -1034,3 +1034,6 @@
 
 
 .field public static final invert_rotation:I = 0x7f0901f6
+
+
+.field public static final series:I = 0x7f0901f7
--- a/res/layout/books_grid_item.xml
+++ b/res/layout/books_grid_item.xml
@@ -9,6 +9,7 @@
         <LinearLayout android:orientation="vertical" android:id="@id/footer" android:padding="12.0dip" android:layout_width="fill_parent" android:layout_height="wrap_content">
             <TextView android:textSize="14.0sp" android:textColor="#ffffffff" android:ellipsize="end" android:id="@id/title" android:layout_width="fill_parent" android:layout_height="wrap_content" android:maxLines="1" android:fontFamily="sans-serif" />
             <TextView android:textSize="12.0sp" android:textColor="#ffffffff" android:ellipsize="end" android:id="@id/creator" android:layout_width="fill_parent" android:layout_height="wrap_content" android:maxLines="1" android:fontFamily="sans-serif" />
+            <TextView android:textSize="10.0sp" android:textColor="#ffffffff" android:ellipsize="end" android:id="@id/series" android:layout_width="fill_parent" android:layout_height="wrap_content" android:maxLines="1" android:fontFamily="sans-serif"/>
         </LinearLayout>
     </LinearLayout>
     <FrameLayout android:id="@id/selected_scrim" android:background="@color/book_item_selected_scrim_color" android:visibility="gone" android:layout_width="fill_parent" android:layout_height="fill_parent" />
--- a/res/layout/books_list_item.xml
+++ b/res/layout/books_list_item.xml
@@ -2,13 +2,14 @@
 <androidx.cardview.widget.CardView android:layout_width="fill_parent" android:layout_height="wrap_content" android:layout_margin="8.0dip" android:foreground="?android:selectableItemBackground" app:cardCornerRadius="12.0dip" app:cardElevation="0dp"
   xmlns:android="http://schemas.android.com/apk/res/android" xmlns:app="http://schemas.android.com/apk/res-auto">
     <LinearLayout android:orientation="horizontal" android:layout_width="fill_parent" android:layout_height="fill_parent">
-        <FrameLayout android:id="@id/cover_container" android:layout_width="48.0dip" android:layout_height="fill_parent">
+        <FrameLayout android:id="@id/cover_container" android:layout_width="60.0dip" android:layout_height="fill_parent">
             <ImageView android:id="@id/cover" android:layout_width="fill_parent" android:layout_height="fill_parent" android:scaleType="fitCenter" android:contentDescription="@null" />
             <ImageView android:layout_gravity="center" android:id="@id/noCover" android:visibility="gone" android:layout_width="fill_parent" android:layout_height="64.0dip" android:src="@drawable/book_no_cover" android:scaleType="fitCenter" android:contentDescription="@null" app:tint="@color/book_item_no_cover_tint" />
         </FrameLayout>
         <LinearLayout android:orientation="vertical" android:id="@id/footer" android:padding="14.0dip" android:layout_width="fill_parent" android:layout_height="wrap_content">
             <TextView android:textSize="16.0sp" android:textColor="?android:textColorPrimary" android:ellipsize="end" android:id="@id/title" android:layout_width="fill_parent" android:layout_height="wrap_content" android:fontFamily="sans-serif" />
             <TextView android:textSize="14.0sp" android:textColor="?android:textColorSecondary" android:ellipsize="end" android:id="@id/creator" android:layout_width="fill_parent" android:layout_height="wrap_content" android:maxLines="1" android:fontFamily="sans-serif" />
+            <TextView android:textSize="14.0sp" android:textColor="?android:textColorSecondary" android:ellipsize="end" android:id="@id/series" android:layout_width="fill_parent" android:layout_height="wrap_content" android:maxLines="1" android:fontFamily="sans-serif" />
         </LinearLayout>
     </LinearLayout>
     <FrameLayout android:id="@id/selected_scrim" android:background="@color/book_item_selected_scrim_color" android:visibility="gone" android:layout_width="fill_parent" android:layout_height="fill_parent" />
--- a/res/layout-v17/books_list_item.xml
+++ b/res/layout-v17/books_list_item.xml
@@ -2,13 +2,14 @@
 <androidx.cardview.widget.CardView android:layout_width="fill_parent" android:layout_height="wrap_content" android:layout_margin="5.0dip" android:foreground="?android:selectableItemBackground" app:cardCornerRadius="4.0dip"
   xmlns:android="http://schemas.android.com/apk/res/android" xmlns:app="http://schemas.android.com/apk/res-auto">
     <LinearLayout android:orientation="horizontal" android:layout_width="fill_parent" android:layout_height="fill_parent">
-        <FrameLayout android:id="@id/cover_container" android:layout_width="48.0dip" android:layout_height="fill_parent">
+        <FrameLayout android:id="@id/cover_container" android:layout_width="60.0dip" android:layout_height="fill_parent">
             <ImageView android:id="@id/cover" android:layout_width="fill_parent" android:layout_height="fill_parent" android:scaleType="fitCenter" android:contentDescription="@null" />
             <ImageView android:layout_gravity="center" android:id="@id/noCover" android:visibility="gone" android:layout_width="fill_parent" android:layout_height="64.0dip" android:src="@drawable/book_no_cover" android:scaleType="fitCenter" android:contentDescription="@null" app:tint="@color/book_item_no_cover_tint" />
         </FrameLayout>
         <LinearLayout android:orientation="vertical" android:id="@id/footer" android:padding="14.0dip" android:layout_width="fill_parent" android:layout_height="wrap_content">
             <TextView android:textSize="16.0sp" android:textColor="?android:textColorPrimary" android:ellipsize="end" android:id="@id/title" android:layout_width="fill_parent" android:layout_height="wrap_content" android:fontFamily="sans-serif" />
             <TextView android:textSize="14.0sp" android:textColor="?android:textColorSecondary" android:ellipsize="end" android:id="@id/creator" android:layout_width="fill_parent" android:layout_height="wrap_content" android:maxLines="1" android:fontFamily="sans-serif" />
+            <TextView android:textSize="14.0sp" android:textColor="?android:textColorSecondary" android:ellipsize="end" android:id="@id/series" android:layout_width="fill_parent" android:layout_height="wrap_content" android:maxLines="1" android:fontFamily="sans-serif" />
         </LinearLayout>
     </LinearLayout>
     <FrameLayout android:id="@id/selected_scrim" android:background="@color/book_item_selected_scrim_color" android:visibility="gone" android:layout_width="fill_parent" android:layout_height="fill_parent" />
--- a/res/xml/preferences.xml
+++ b/res/xml/preferences.xml
@@ -26,6 +26,7 @@
     </PreferenceCategory>
 
     <PreferenceCategory android:title="@string/pref_category_advanced">
+        <SwitchPreferenceCompat android:title="Show series metadata" android:key="series_metadata" android:defaultValue="false" />
         <SwitchPreferenceCompat android:title="Show series in drawer" android:key="series_in_drawer" android:defaultValue="false" />
         <SwitchPreferenceCompat android:title="Use hyphenation" android:key="hyphenation" android:defaultValue="true" />
         <SwitchPreferenceCompat android:title="Hide footer slider (reader)" android:key="hide_reader_footer" android:defaultValue="false" />
--- a/smali/com/faultexception/reader/BooksFragment.smali
+++ b/smali/com/faultexception/reader/BooksFragment.smali
@@ -3308,7 +3308,7 @@
     goto :goto_1
 
     :pswitch_2
-    const-string v3, "creator ASC"
+    const-string v3, "creator ASC, series ASC, LENGTH(series_index) ASC, series_index ASC"
 
     goto :goto_1
 
@@ -3471,7 +3471,7 @@
     goto :goto_6
 
     :cond_7
-    const-string v3, "title LIKE ? OR creator LIKE ?"
+    const-string v3, "title LIKE ? OR (coalesce(creator, '') || coalesce(series, '')) LIKE ?"
 
     .line 306
     invoke-static {v6, v3}, Landroid/database/DatabaseUtils;->concatenateWhere(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;
--- a/smali/com/faultexception/reader/BooksAdapter$ViewHolder.smali
+++ b/smali/com/faultexception/reader/BooksAdapter$ViewHolder.smali
@@ -24,6 +24,7 @@
 .field public coverView:Landroid/widget/ImageView;
 
 .field public creatorView:Landroid/widget/TextView;
+.field public seriesView:Landroid/widget/TextView;
 
 .field public footerView:Landroid/view/View;
 
@@ -70,6 +71,12 @@
 
     iput-object p1, p0, Lcom/faultexception/reader/BooksAdapter$ViewHolder;->creatorView:Landroid/widget/TextView;
 
+    sget p1, Lcom/faultexception/reader/R$id;->series:I
+    invoke-virtual {p2, p1}, Landroid/view/View;->findViewById(I)Landroid/view/View;
+    move-result-object p1
+    check-cast p1, Landroid/widget/TextView;
+    iput-object p1, p0, Lcom/faultexception/reader/BooksAdapter$ViewHolder;->seriesView:Landroid/widget/TextView;
+
     const p1, 0x7f090079
 
     .line 322
--- a/smali/com/faultexception/reader/BooksAdapter.smali
+++ b/smali/com/faultexception/reader/BooksAdapter.smali
@@ -228,6 +228,46 @@
     return-object p1
 .end method
 
+.method private getCurrentSeriesString()Ljava/lang/String;
+    .locals 7
+
+    # v0=cursor, v1=stringbuilder
+    iget-object v0, p0, Lcom/faultexception/reader/BooksAdapter;->mCursor:Landroid/database/Cursor;
+    new-instance v1, Ljava/lang/StringBuilder;
+    invoke-direct {v1}, Ljava/lang/StringBuilder;-><init>()V
+
+    # v2=series
+    iget-object v2, p0, Lcom/faultexception/reader/BooksAdapter;->mIndexes:Lcom/faultexception/reader/BooksAdapter$CursorIndexContainer;
+    iget v2, v2, Lcom/faultexception/reader/BooksAdapter$CursorIndexContainer;->series:I
+    invoke-interface {v0, v2}, Landroid/database/Cursor;->getString(I)Ljava/lang/String;
+    move-result-object v2
+
+    if-eqz v2, :retstr
+    invoke-virtual {v1, v2}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
+
+    # v3=series_index, v4=separator, v5=find, v6=replace
+    iget-object v3, p0, Lcom/faultexception/reader/BooksAdapter;->mIndexes:Lcom/faultexception/reader/BooksAdapter$CursorIndexContainer;
+    iget v3, v3, Lcom/faultexception/reader/BooksAdapter$CursorIndexContainer;->seriesIndex:I
+    invoke-interface {v0, v3}, Landroid/database/Cursor;->getString(I)Ljava/lang/String;
+    move-result-object v3
+
+    if-eqz v3, :retstr
+    const-string v5, ".0"
+    const-string v6, ""
+    invoke-virtual {v3, v5, v6}, Ljava/lang/String;->replace(Ljava/lang/CharSequence;Ljava/lang/CharSequence;)Ljava/lang/String;
+    move-result-object v3
+
+    const-string v4, " #"
+    invoke-virtual {v1, v4}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
+    invoke-virtual {v1, v3}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
+
+    :retstr
+    invoke-virtual {v1}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;
+    move-result-object v1
+
+    return-object v1
+.end method
+
 .method private highlightSearchQuery(Ljava/lang/String;)Landroid/text/Spannable;
     .locals 5
 
@@ -503,6 +543,27 @@
     return-void
 .end method
 
+.method private maybeHideSeries(Landroid/widget/TextView;)V
+    .locals 3
+
+    iget-object v0, p0, Lcom/faultexception/reader/BooksAdapter;->mActivity:Landroidx/appcompat/app/AppCompatActivity;
+    invoke-static {v0}, Landroid/preference/PreferenceManager;->getDefaultSharedPreferences(Landroid/content/Context;)Landroid/content/SharedPreferences;
+    move-result-object v0
+
+    const-string v1, "series_metadata"
+    const/4 v2, 0x0
+    invoke-interface {v0, v1, v2}, Landroid/content/SharedPreferences;->getBoolean(Ljava/lang/String;Z)Z
+    move-result v1
+
+    const/16 v2, 0x0 # android.View.VISIBLE
+    if-nez v1, :visible
+    const/16 v2, 0x8 # android.View.GONE
+    :visible
+    invoke-virtual {p1, v2}, Landroid/widget/TextView;->setVisibility(I)V
+
+    return-void
+.end method
+
 .method public onBindViewHolder(Lcom/faultexception/reader/BooksAdapter$ViewHolder;I)V
     .locals 6
 
@@ -582,6 +643,14 @@
 
     invoke-virtual {p2, v0}, Landroid/widget/TextView;->setText(Ljava/lang/CharSequence;)V
 
+    iget-object p2, p1, Lcom/faultexception/reader/BooksAdapter$ViewHolder;->seriesView:Landroid/widget/TextView;
+    invoke-direct {p0}, Lcom/faultexception/reader/BooksAdapter;->getCurrentSeriesString()Ljava/lang/String;
+    move-result-object v0
+    invoke-direct {p0, v0}, Lcom/faultexception/reader/BooksAdapter;->highlightSearchQuery(Ljava/lang/String;)Landroid/text/Spannable;
+    move-result-object v0
+    invoke-virtual {p2, v0}, Landroid/widget/TextView;->setText(Ljava/lang/CharSequence;)V
+    invoke-direct {p0, p2}, Lcom/faultexception/reader/BooksAdapter;->maybeHideSeries(Landroid/widget/TextView;)V
+
     goto :goto_0
 
     .line 161
@@ -595,6 +664,12 @@
 
     invoke-virtual {p2, v0}, Landroid/widget/TextView;->setText(Ljava/lang/CharSequence;)V
 
+    iget-object p2, p1, Lcom/faultexception/reader/BooksAdapter$ViewHolder;->seriesView:Landroid/widget/TextView;
+    invoke-direct {p0}, Lcom/faultexception/reader/BooksAdapter;->getCurrentSeriesString()Ljava/lang/String;
+    move-result-object v0
+    invoke-virtual {p2, v0}, Landroid/widget/TextView;->setText(Ljava/lang/CharSequence;)V
+    invoke-direct {p0, p2}, Lcom/faultexception/reader/BooksAdapter;->maybeHideSeries(Landroid/widget/TextView;)V
+
     .line 165
     :goto_0
     iget-object p2, p0, Lcom/faultexception/reader/BooksAdapter;->mCursor:Landroid/database/Cursor;
@@ -750,6 +825,9 @@
 
     invoke-virtual {v3, v2}, Landroid/widget/TextView;->setTextColor(I)V
 
+    iget-object v3, p1, Lcom/faultexception/reader/BooksAdapter$ViewHolder;->seriesView:Landroid/widget/TextView;
+    invoke-virtual {v3, v2}, Landroid/widget/TextView;->setTextColor(I)V
+
     .line 193
     iget-object v2, p1, Lcom/faultexception/reader/BooksAdapter$ViewHolder;->footerView:Landroid/view/View;
     invoke-direct {p0, v2}, Lcom/faultexception/reader/BooksAdapter;->maybeHideFooter(Landroid/view/View;)V
@@ -883,6 +961,7 @@
     invoke-direct {p1, p2}, Ljava/lang/IllegalStateException;-><init>(Ljava/lang/String;)V
 
     throw p1
+
 .end method
 
 .method public bridge synthetic onCreateViewHolder(Landroid/view/ViewGroup;I)Landroidx/recyclerview/widget/RecyclerView$ViewHolder;
@@ -1210,6 +1289,18 @@
 
     iput v1, v0, Lcom/faultexception/reader/BooksAdapter$CursorIndexContainer;->creator:I
 
+    iget-object v0, p0, Lcom/faultexception/reader/BooksAdapter;->mIndexes:Lcom/faultexception/reader/BooksAdapter$CursorIndexContainer;
+    const-string v1, "series"
+    invoke-interface {p1, v1}, Landroid/database/Cursor;->getColumnIndexOrThrow(Ljava/lang/String;)I
+    move-result v1
+    iput v1, v0, Lcom/faultexception/reader/BooksAdapter$CursorIndexContainer;->series:I
+
+    iget-object v0, p0, Lcom/faultexception/reader/BooksAdapter;->mIndexes:Lcom/faultexception/reader/BooksAdapter$CursorIndexContainer;
+    const-string v1, "series_index"
+    invoke-interface {p1, v1}, Landroid/database/Cursor;->getColumnIndexOrThrow(Ljava/lang/String;)I
+    move-result v1
+    iput v1, v0, Lcom/faultexception/reader/BooksAdapter$CursorIndexContainer;->seriesIndex:I
+
     .line 91
     iget-object v0, p0, Lcom/faultexception/reader/BooksAdapter;->mIndexes:Lcom/faultexception/reader/BooksAdapter$CursorIndexContainer;
 
--- a/smali/com/faultexception/reader/db/BooksTable.smali
+++ b/smali/com/faultexception/reader/db/BooksTable.smali
@@ -24,6 +24,8 @@
 .field public static final COLUMN_COVER_BACKGROUND:Ljava/lang/String; = "cover_bg"
 
 .field public static final COLUMN_CREATOR:Ljava/lang/String; = "creator"
+.field public static final COLUMN_SERIES:Ljava/lang/String; = "series"
+.field public static final COLUMN_SERIES_INDEX:Ljava/lang/String; = "series_index"
 
 .field public static final COLUMN_CURRENT_POSITION:Ljava/lang/String; = "current_position"
 
--- a/smali/com/faultexception/reader/BooksAdapter$CursorIndexContainer.smali
+++ b/smali/com/faultexception/reader/BooksAdapter$CursorIndexContainer.smali
@@ -20,6 +20,8 @@
 .field coverBackground:I
 
 .field creator:I
+.field series:I
+.field seriesIndex:I
 
 .field id:I
 
--- a/smali/com/faultexception/reader/db/DatabaseOpenHelper.smali
+++ b/smali/com/faultexception/reader/db/DatabaseOpenHelper.smali
@@ -46,6 +46,28 @@
 
 
 # direct methods
+.method private static tryAddSeriesStuff(Landroid/database/sqlite/SQLiteDatabase;)V
+    .locals 1
+    :ts
+    const-string v0, "ALTER TABLE books ADD COLUMN series text default null;"
+    invoke-virtual {p0, v0}, Landroid/database/sqlite/SQLiteDatabase;->execSQL(Ljava/lang/String;)V
+    :te
+    .catch Ljava/lang/Exception; {:ts .. :te} :ts1
+    :ts1
+    const-string v0, "ALTER TABLE books ADD COLUMN series_index text default null;"
+    invoke-virtual {p0, v0}, Landroid/database/sqlite/SQLiteDatabase;->execSQL(Ljava/lang/String;)V
+    :te1
+    .catch Ljava/lang/Exception; {:ts1 .. :te1} :ret
+    :ret
+    return-void
+.end method
+
+.method public onOpen(Landroid/database/sqlite/SQLiteDatabase;)V
+    .locals 0
+    invoke-static {p1}, Lcom/faultexception/reader/db/DatabaseOpenHelper;->tryAddSeriesStuff(Landroid/database/sqlite/SQLiteDatabase;)V
+    return-void
+.end method
+
 .method public constructor <init>(Landroid/content/Context;)V
     .locals 3
 
--- a/smali/com/faultexception/reader/book/Book.smali
+++ b/smali/com/faultexception/reader/book/Book.smali
@@ -103,6 +103,10 @@
 
 .method public abstract getCreator()Ljava/lang/String;
 .end method
+.method public abstract getSeries()Ljava/lang/String;
+.end method
+.method public abstract getSeriesIndex()Ljava/lang/String;
+.end method
 
 .method public abstract getLanguage()Ljava/lang/String;
 .end method
--- a/smali/com/faultexception/reader/book/EPubBook.smali
+++ b/smali/com/faultexception/reader/book/EPubBook.smali
@@ -21,6 +21,8 @@
 .field private mAdobeFontDecryptor:Lcom/faultexception/reader/book/EPubFontDecryptor;
 
 .field private mCreator:Ljava/lang/String;
+.field private mSeries:Ljava/lang/String;
+.field private mSeriesIndex:Ljava/lang/String;
 
 .field private mFontDecryptorMap:Ljava/util/Map;
     .annotation system Ldalvik/annotation/Signature;
@@ -1455,6 +1457,757 @@
     return v1
 .end method
 
+.method private parseSeries(Ljava/util/zip/ZipEntry;)V
+    .locals 1
+    iget-object v0, p0, Lcom/faultexception/reader/book/EPubBook;->mZip:Lcom/faultexception/reader/util/ZipFileCompat;
+    invoke-virtual {v0, p1}, Lcom/faultexception/reader/util/ZipFileCompat;->getInputStream(Ljava/util/zip/ZipEntry;)Ljava/io/InputStream;
+    move-result-object v0
+    invoke-direct {p0, v0}, Lcom/faultexception/reader/book/EPubBook;->parseSeries(Ljava/io/InputStream;)Ljava/lang/String;
+    return-void
+.end method
+
+.method private parseSeries(Ljava/io/InputStream;)Ljava/lang/String;
+    .registers 28
+    .param p1, "is"    # Ljava/io/InputStream;
+    .annotation system Ldalvik/annotation/Throws;
+        value = {
+            Lorg/xmlpull/v1/XmlPullParserException;,
+            Ljava/io/IOException;
+        }
+    .end annotation
+
+    .prologue
+    .line 30
+    invoke-static {}, Landroid/util/Xml;->newPullParser()Lorg/xmlpull/v1/XmlPullParser;
+
+    move-result-object v23
+
+    .line 31
+    .local v23, "xpp":Lorg/xmlpull/v1/XmlPullParser;
+    const-string v24, "http://xmlpull.org/v1/doc/features.html#process-namespaces"
+
+    const/16 v25, 0x1
+
+    invoke-interface/range {v23 .. v25}, Lorg/xmlpull/v1/XmlPullParser;->setFeature(Ljava/lang/String;Z)V
+
+    .line 32
+    const/16 v24, 0x0
+
+    move-object/from16 v0, v23
+
+    move-object/from16 v1, p1
+
+    move-object/from16 v2, v24
+
+    invoke-interface {v0, v1, v2}, Lorg/xmlpull/v1/XmlPullParser;->setInput(Ljava/io/InputStream;Ljava/lang/String;)V
+
+    .line 33
+    new-instance v9, Ljava/util/LinkedHashSet;
+
+    invoke-direct {v9}, Ljava/util/LinkedHashSet;-><init>()V
+
+    .line 34
+    .local v9, "hSeriesSkip":Ljava/util/LinkedHashSet;, "Ljava/util/LinkedHashSet<Ljava/lang/String;>;"
+    new-instance v7, Ljava/util/LinkedHashMap;
+
+    invoke-direct {v7}, Ljava/util/LinkedHashMap;-><init>()V
+
+    .line 35
+    .local v7, "hSeries":Ljava/util/LinkedHashMap;, "Ljava/util/LinkedHashMap<Ljava/lang/String;Ljava/lang/String;>;"
+    new-instance v8, Ljava/util/LinkedHashMap;
+
+    invoke-direct {v8}, Ljava/util/LinkedHashMap;-><init>()V
+
+    .line 36
+    .local v8, "hSeriesIndex":Ljava/util/LinkedHashMap;, "Ljava/util/LinkedHashMap<Ljava/lang/String;Ljava/lang/String;>;"
+    const/16 v24, 0x0
+
+    const/16 v25, 0x0
+
+    move-object/from16 v0, v24
+
+    move-object/from16 v1, v25
+
+    invoke-virtual {v7, v0, v1}, Ljava/util/LinkedHashMap;->put(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
+
+    .line 37
+    new-instance v19, Ljava/lang/StringBuilder;
+
+    invoke-direct/range {v19 .. v19}, Ljava/lang/StringBuilder;-><init>()V
+
+    .line 38
+    .local v19, "txt":Ljava/lang/StringBuilder;
+    const/4 v3, 0x0
+
+    .local v3, "depth":I
+    const/4 v5, 0x0
+
+    .local v5, "depthMatch":I
+    invoke-interface/range {v23 .. v23}, Lorg/xmlpull/v1/XmlPullParser;->getEventType()I
+
+    move-result v6
+
+    .local v6, "evt":I
+    move v4, v3
+
+    .end local v3    # "depth":I
+    .local v4, "depth":I
+    :goto_40
+    const/16 v24, 0x1
+
+    move/from16 v0, v24
+
+    if-eq v6, v0, :cond_199
+
+    .line 39
+    packed-switch v6, :pswitch_data_1f6
+
+    move v3, v4
+
+    .line 122
+    .end local v4    # "depth":I
+    .restart local v3    # "depth":I
+    :cond_4a
+    :goto_4a
+    invoke-interface/range {v23 .. v23}, Lorg/xmlpull/v1/XmlPullParser;->next()I
+
+    move-result v6
+
+    move v4, v3
+
+    .end local v3    # "depth":I
+    .restart local v4    # "depth":I
+    goto :goto_40
+
+    .line 41
+    :pswitch_50
+    add-int/lit8 v3, v4, -0x1
+
+    .end local v4    # "depth":I
+    .restart local v3    # "depth":I
+    if-ge v4, v5, :cond_4a
+
+    .line 42
+    add-int/lit8 v5, v5, -0x1
+
+    goto :goto_4a
+
+    .line 46
+    .end local v3    # "depth":I
+    .restart local v4    # "depth":I
+    :pswitch_57
+    add-int/lit8 v3, v4, 0x1
+
+    .end local v4    # "depth":I
+    .restart local v3    # "depth":I
+    if-ne v4, v5, :cond_6a
+
+    .line 47
+    const-string v24, "http://www.idpf.org/2007/opf"
+
+    invoke-interface/range {v23 .. v23}, Lorg/xmlpull/v1/XmlPullParser;->getNamespace()Ljava/lang/String;
+
+    move-result-object v25
+
+    invoke-virtual/range {v24 .. v25}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
+
+    move-result v24
+
+    if-eqz v24, :cond_6a
+
+    .line 48
+    packed-switch v3, :pswitch_data_1fe
+
+    .line 65
+    :cond_6a
+    :goto_6a
+    const/16 v24, 0x3
+
+    move/from16 v0, v24
+
+    if-ne v5, v0, :cond_4a
+
+    .line 67
+    const/16 v24, 0x0
+
+    const-string v25, "name"
+
+    invoke-interface/range {v23 .. v25}, Lorg/xmlpull/v1/XmlPullParser;->getAttributeValue(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;
+
+    move-result-object v12
+
+    .line 68
+    .local v12, "pName":Ljava/lang/String;
+    const/16 v24, 0x0
+
+    const-string v25, "content"
+
+    invoke-interface/range {v23 .. v25}, Lorg/xmlpull/v1/XmlPullParser;->getAttributeValue(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;
+
+    move-result-object v10
+
+    .line 69
+    .local v10, "pContent":Ljava/lang/String;
+    const/16 v24, 0x0
+
+    const-string v25, "property"
+
+    invoke-interface/range {v23 .. v25}, Lorg/xmlpull/v1/XmlPullParser;->getAttributeValue(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;
+
+    move-result-object v13
+
+    .line 70
+    .local v13, "pProperty":Ljava/lang/String;
+    const/16 v24, 0x0
+
+    const-string v25, "id"
+
+    invoke-interface/range {v23 .. v25}, Lorg/xmlpull/v1/XmlPullParser;->getAttributeValue(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;
+
+    move-result-object v11
+
+    .line 71
+    .local v11, "pId":Ljava/lang/String;
+    const/16 v24, 0x0
+
+    const-string v25, "refines"
+
+    invoke-interface/range {v23 .. v25}, Lorg/xmlpull/v1/XmlPullParser;->getAttributeValue(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;
+
+    move-result-object v14
+
+    .line 73
+    .local v14, "pRefines":Ljava/lang/String;
+    const/16 v24, 0x0
+
+    move-object/from16 v0, v19
+
+    move/from16 v1, v24
+
+    invoke-virtual {v0, v1}, Ljava/lang/StringBuilder;->setLength(I)V
+
+    .line 74
+    invoke-interface/range {v23 .. v23}, Lorg/xmlpull/v1/XmlPullParser;->next()I
+
+    move-result v6
+
+    :goto_a5
+    const/16 v24, 0x3
+
+    move/from16 v0, v24
+
+    if-ne v3, v0, :cond_b1
+
+    const/16 v24, 0x3
+
+    move/from16 v0, v24
+
+    if-eq v6, v0, :cond_fa
+
+    .line 75
+    :cond_b1
+    packed-switch v6, :pswitch_data_208
+
+    .line 74
+    :cond_b4
+    :goto_b4
+    invoke-interface/range {v23 .. v23}, Lorg/xmlpull/v1/XmlPullParser;->next()I
+
+    move-result v6
+
+    goto :goto_a5
+
+    .line 50
+    .end local v10    # "pContent":Ljava/lang/String;
+    .end local v11    # "pId":Ljava/lang/String;
+    .end local v12    # "pName":Ljava/lang/String;
+    .end local v13    # "pProperty":Ljava/lang/String;
+    .end local v14    # "pRefines":Ljava/lang/String;
+    :pswitch_b9
+    const-string v24, "package"
+
+    invoke-interface/range {v23 .. v23}, Lorg/xmlpull/v1/XmlPullParser;->getName()Ljava/lang/String;
+
+    move-result-object v25
+
+    invoke-virtual/range {v24 .. v25}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
+
+    move-result v24
+
+    if-eqz v24, :cond_6a
+
+    .line 51
+    add-int/lit8 v5, v5, 0x1
+
+    goto :goto_6a
+
+    .line 54
+    :pswitch_c8
+    const-string v24, "metadata"
+
+    invoke-interface/range {v23 .. v23}, Lorg/xmlpull/v1/XmlPullParser;->getName()Ljava/lang/String;
+
+    move-result-object v25
+
+    invoke-virtual/range {v24 .. v25}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
+
+    move-result v24
+
+    if-eqz v24, :cond_6a
+
+    .line 55
+    add-int/lit8 v5, v5, 0x1
+
+    goto :goto_6a
+
+    .line 58
+    :pswitch_d7
+    const-string v24, "meta"
+
+    invoke-interface/range {v23 .. v23}, Lorg/xmlpull/v1/XmlPullParser;->getName()Ljava/lang/String;
+
+    move-result-object v25
+
+    invoke-virtual/range {v24 .. v25}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
+
+    move-result v24
+
+    if-eqz v24, :cond_6a
+
+    .line 59
+    add-int/lit8 v5, v5, 0x1
+
+    goto :goto_6a
+
+    .line 77
+    .restart local v10    # "pContent":Ljava/lang/String;
+    .restart local v11    # "pId":Ljava/lang/String;
+    .restart local v12    # "pName":Ljava/lang/String;
+    .restart local v13    # "pProperty":Ljava/lang/String;
+    .restart local v14    # "pRefines":Ljava/lang/String;
+    :pswitch_e6
+    add-int/lit8 v3, v3, 0x1
+
+    .line 78
+    goto :goto_b4
+
+    .line 80
+    :pswitch_e9
+    add-int/lit8 v3, v3, -0x1
+
+    .line 81
+    goto :goto_b4
+
+    .line 83
+    :pswitch_ec
+    invoke-interface/range {v23 .. v23}, Lorg/xmlpull/v1/XmlPullParser;->getText()Ljava/lang/String;
+
+    move-result-object v18
+
+    .line 84
+    .local v18, "tmp":Ljava/lang/String;
+    if-eqz v18, :cond_b4
+
+    .line 85
+    move-object/from16 v0, v19
+
+    move-object/from16 v1, v18
+
+    invoke-virtual {v0, v1}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
+
+    goto :goto_b4
+
+    .line 92
+    .end local v18    # "tmp":Ljava/lang/String;
+    :cond_fa
+    if-eqz v12, :cond_128
+
+    .line 93
+    const/16 v21, 0x0
+
+    .line 94
+    .local v21, "vSrc":Ljava/lang/String;
+    move-object/from16 v20, v12
+
+    .line 95
+    .local v20, "vKey":Ljava/lang/String;
+    move-object/from16 v22, v10
+
+    .line 111
+    .local v22, "vValue":Ljava/lang/String;
+    :cond_102
+    :goto_102
+    if-eqz v20, :cond_1f3
+
+    if-eqz v22, :cond_1f3
+
+    .line 112
+    const-string v24, "calibre:series"
+
+    move-object/from16 v0, v24
+
+    move-object/from16 v1, v20
+
+    invoke-virtual {v0, v1}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
+
+    move-result v24
+
+    if-nez v24, :cond_11e
+
+    const-string v24, "belongs-to-collection"
+
+    move-object/from16 v0, v24
+
+    move-object/from16 v1, v20
+
+    invoke-virtual {v0, v1}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
+
+    move-result v24
+
+    if-eqz v24, :cond_157
+
+    .line 113
+    :cond_11e
+    move-object/from16 v0, v21
+
+    move-object/from16 v1, v22
+
+    invoke-virtual {v7, v0, v1}, Ljava/util/LinkedHashMap;->put(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
+
+    move v4, v3
+
+    .end local v3    # "depth":I
+    .restart local v4    # "depth":I
+    goto/16 :goto_40
+
+    .line 97
+    .end local v4    # "depth":I
+    .end local v20    # "vKey":Ljava/lang/String;
+    .end local v21    # "vSrc":Ljava/lang/String;
+    .end local v22    # "vValue":Ljava/lang/String;
+    .restart local v3    # "depth":I
+    :cond_128
+    if-eqz v14, :cond_14f
+
+    const-string v24, "#"
+
+    move-object/from16 v0, v24
+
+    invoke-virtual {v14, v0}, Ljava/lang/String;->startsWith(Ljava/lang/String;)Z
+
+    move-result v24
+
+    if-eqz v24, :cond_14f
+
+    .line 98
+    const/16 v24, 0x1
+
+    move/from16 v0, v24
+
+    invoke-virtual {v14, v0}, Ljava/lang/String;->substring(I)Ljava/lang/String;
+
+    move-result-object v21
+
+    .line 104
+    .restart local v21    # "vSrc":Ljava/lang/String;
+    :goto_13c
+    move-object/from16 v20, v13
+
+    .line 105
+    .restart local v20    # "vKey":Ljava/lang/String;
+    invoke-virtual/range {v19 .. v19}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;
+
+    move-result-object v24
+
+    invoke-virtual/range {v24 .. v24}, Ljava/lang/String;->trim()Ljava/lang/String;
+
+    move-result-object v22
+
+    .line 106
+    .restart local v22    # "vValue":Ljava/lang/String;
+    invoke-virtual/range {v22 .. v22}, Ljava/lang/String;->isEmpty()Z
+
+    move-result v24
+
+    if-eqz v24, :cond_102
+
+    .line 107
+    const/16 v22, 0x0
+
+    goto :goto_102
+
+    .line 99
+    .end local v20    # "vKey":Ljava/lang/String;
+    .end local v21    # "vSrc":Ljava/lang/String;
+    .end local v22    # "vValue":Ljava/lang/String;
+    :cond_14f
+    if-eqz v11, :cond_154
+
+    .line 100
+    move-object/from16 v21, v11
+
+    .restart local v21    # "vSrc":Ljava/lang/String;
+    goto :goto_13c
+
+    .line 102
+    .end local v21    # "vSrc":Ljava/lang/String;
+    :cond_154
+    const-string v21, ""
+
+    .restart local v21    # "vSrc":Ljava/lang/String;
+    goto :goto_13c
+
+    .line 114
+    .restart local v20    # "vKey":Ljava/lang/String;
+    .restart local v22    # "vValue":Ljava/lang/String;
+    :cond_157
+    const-string v24, "calibre:series_index"
+
+    move-object/from16 v0, v24
+
+    move-object/from16 v1, v20
+
+    invoke-virtual {v0, v1}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
+
+    move-result v24
+
+    if-nez v24, :cond_16f
+
+    const-string v24, "group-position"
+
+    move-object/from16 v0, v24
+
+    move-object/from16 v1, v20
+
+    invoke-virtual {v0, v1}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
+
+    move-result v24
+
+    if-eqz v24, :cond_179
+
+    .line 115
+    :cond_16f
+    move-object/from16 v0, v21
+
+    move-object/from16 v1, v22
+
+    invoke-virtual {v8, v0, v1}, Ljava/util/LinkedHashMap;->put(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
+
+    move v4, v3
+
+    .end local v3    # "depth":I
+    .restart local v4    # "depth":I
+    goto/16 :goto_40
+
+    .line 116
+    .end local v4    # "depth":I
+    .restart local v3    # "depth":I
+    :cond_179
+    const-string v24, "collection-type"
+
+    move-object/from16 v0, v24
+
+    move-object/from16 v1, v20
+
+    invoke-virtual {v0, v1}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
+
+    move-result v24
+
+    if-eqz v24, :cond_1f3
+
+    const-string v24, "series"
+
+    move-object/from16 v0, v24
+
+    move-object/from16 v1, v22
+
+    invoke-virtual {v0, v1}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
+
+    move-result v24
+
+    if-nez v24, :cond_1f3
+
+    .line 117
+    move-object/from16 v0, v21
+
+    invoke-virtual {v9, v0}, Ljava/util/LinkedHashSet;->add(Ljava/lang/Object;)Z
+
+    move v4, v3
+
+    .end local v3    # "depth":I
+    .restart local v4    # "depth":I
+    goto/16 :goto_40
+
+    .line 125
+    .end local v10    # "pContent":Ljava/lang/String;
+    .end local v11    # "pId":Ljava/lang/String;
+    .end local v12    # "pName":Ljava/lang/String;
+    .end local v13    # "pProperty":Ljava/lang/String;
+    .end local v14    # "pRefines":Ljava/lang/String;
+    .end local v20    # "vKey":Ljava/lang/String;
+    .end local v21    # "vSrc":Ljava/lang/String;
+    .end local v22    # "vValue":Ljava/lang/String;
+    :cond_199
+    invoke-virtual {v7}, Ljava/util/LinkedHashMap;->keySet()Ljava/util/Set;
+
+    move-result-object v24
+
+    invoke-interface/range {v24 .. v24}, Ljava/util/Set;->iterator()Ljava/util/Iterator;
+
+    move-result-object v24
+
+    :cond_1a1
+    invoke-interface/range {v24 .. v24}, Ljava/util/Iterator;->hasNext()Z
+
+    move-result v25
+
+    if-eqz v25, :cond_1f0
+
+    invoke-interface/range {v24 .. v24}, Ljava/util/Iterator;->next()Ljava/lang/Object;
+
+    move-result-object v17
+
+    check-cast v17, Ljava/lang/String;
+
+    .line 126
+    .local v17, "src":Ljava/lang/String;
+    move-object/from16 v0, v17
+
+    invoke-virtual {v7, v0}, Ljava/util/LinkedHashMap;->get(Ljava/lang/Object;)Ljava/lang/Object;
+
+    move-result-object v15
+
+    check-cast v15, Ljava/lang/String;
+
+    .line 127
+    .local v15, "series":Ljava/lang/String;
+    if-eqz v15, :cond_1a1
+
+    .line 128
+    move-object/from16 v0, v17
+
+    invoke-virtual {v8, v0}, Ljava/util/LinkedHashMap;->get(Ljava/lang/Object;)Ljava/lang/Object;
+
+    move-result-object v16
+
+    check-cast v16, Ljava/lang/String;
+
+    .line 129
+    .local v16, "seriesIndex":Ljava/lang/String;
+    if-eqz v16, :cond_1a1
+
+    .line 130
+    move-object/from16 v0, v17
+
+    invoke-virtual {v9, v0}, Ljava/util/LinkedHashSet;->contains(Ljava/lang/Object;)Z
+
+    move-result v25
+
+    if-nez v25, :cond_1a1
+
+    .line 131
+    move-object/from16 v0, p0
+
+    iput-object v15, v0, Lcom/faultexception/reader/book/EPubBook;->mSeries:Ljava/lang/String;
+
+    .line 132
+    move-object/from16 v0, v16
+
+    move-object/from16 v1, p0
+
+    iput-object v0, v1, Lcom/faultexception/reader/book/EPubBook;->mSeriesIndex:Ljava/lang/String;
+
+    .line 133
+    if-eqz v17, :cond_1ed
+
+    new-instance v24, Ljava/lang/StringBuilder;
+
+    invoke-direct/range {v24 .. v24}, Ljava/lang/StringBuilder;-><init>()V
+
+    const-string v25, "#"
+
+    invoke-virtual/range {v24 .. v25}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
+
+    move-result-object v24
+
+    move-object/from16 v0, v24
+
+    move-object/from16 v1, v17
+
+    invoke-virtual {v0, v1}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
+
+    move-result-object v24
+
+    invoke-virtual/range {v24 .. v24}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;
+
+    move-result-object v24
+
+    .line 138
+    .end local v15    # "series":Ljava/lang/String;
+    .end local v16    # "seriesIndex":Ljava/lang/String;
+    .end local v17    # "src":Ljava/lang/String;
+    :goto_1ec
+    return-object v24
+
+    .line 133
+    .restart local v15    # "series":Ljava/lang/String;
+    .restart local v16    # "seriesIndex":Ljava/lang/String;
+    .restart local v17    # "src":Ljava/lang/String;
+    :cond_1ed
+    const-string v24, "calibre"
+
+    goto :goto_1ec
+
+    .line 138
+    .end local v15    # "series":Ljava/lang/String;
+    .end local v16    # "seriesIndex":Ljava/lang/String;
+    .end local v17    # "src":Ljava/lang/String;
+    :cond_1f0
+    const/16 v24, 0x0
+
+    goto :goto_1ec
+
+    .end local v4    # "depth":I
+    .restart local v3    # "depth":I
+    .restart local v10    # "pContent":Ljava/lang/String;
+    .restart local v11    # "pId":Ljava/lang/String;
+    .restart local v12    # "pName":Ljava/lang/String;
+    .restart local v13    # "pProperty":Ljava/lang/String;
+    .restart local v14    # "pRefines":Ljava/lang/String;
+    .restart local v20    # "vKey":Ljava/lang/String;
+    .restart local v21    # "vSrc":Ljava/lang/String;
+    .restart local v22    # "vValue":Ljava/lang/String;
+    :cond_1f3
+    move v4, v3
+
+    .end local v3    # "depth":I
+    .restart local v4    # "depth":I
+    goto/16 :goto_40
+
+    .line 39
+    :pswitch_data_1f6
+    .packed-switch 0x2
+        :pswitch_57
+        :pswitch_50
+    .end packed-switch
+
+    .line 48
+    :pswitch_data_1fe
+    .packed-switch 0x1
+        :pswitch_b9
+        :pswitch_c8
+        :pswitch_d7
+    .end packed-switch
+
+    .line 75
+    :pswitch_data_208
+    .packed-switch 0x2
+        :pswitch_e6
+        :pswitch_e9
+        :pswitch_ec
+    .end packed-switch
+.end method
+
 .method private readOpfFile(Ljava/lang/String;)V
     .locals 19
     .annotation system Ldalvik/annotation/Throws;
@@ -1495,6 +2248,8 @@
     invoke-direct {v6, v5}, Lcom/faultexception/reader/book/SimplifiedXmlParser;-><init>(Lorg/xmlpull/v1/XmlPullParser;)V
 
     .line 321
+    invoke-direct {v1, v4}, Lcom/faultexception/reader/book/EPubBook;->parseSeries(Ljava/util/zip/ZipEntry;)V
+
     iget-object v7, v1, Lcom/faultexception/reader/book/EPubBook;->mZip:Lcom/faultexception/reader/util/ZipFileCompat;
 
     invoke-virtual {v7, v4}, Lcom/faultexception/reader/util/ZipFileCompat;->getInputStream(Ljava/util/zip/ZipEntry;)Ljava/io/InputStream;
@@ -3891,6 +4646,18 @@
     return-object p1
 .end method
 
+
+.method public getSeries()Ljava/lang/String;
+    .locals 1
+    iget-object v0, p0, Lcom/faultexception/reader/book/EPubBook;->mSeries:Ljava/lang/String;
+    return-object v0
+.end method
+.method public getSeriesIndex()Ljava/lang/String;
+    .locals 1
+    iget-object v0, p0, Lcom/faultexception/reader/book/EPubBook;->mSeriesIndex:Ljava/lang/String;
+    return-object v0
+.end method
+
 .method public getCreator()Ljava/lang/String;
     .locals 1
 
--- a/smali/com/faultexception/reader/library/LibraryManager.smali
+++ b/smali/com/faultexception/reader/library/LibraryManager.smali
@@ -258,6 +258,16 @@
 
     invoke-virtual {v4, v5, p1}, Landroid/content/ContentValues;->put(Ljava/lang/String;Ljava/lang/String;)V
 
+    invoke-virtual {v0}, Lcom/faultexception/reader/book/Book;->getSeries()Ljava/lang/String;
+    move-result-object p1
+    const-string v5, "series"
+    invoke-virtual {v4, v5, p1}, Landroid/content/ContentValues;->put(Ljava/lang/String;Ljava/lang/String;)V
+
+    invoke-virtual {v0}, Lcom/faultexception/reader/book/Book;->getSeriesIndex()Ljava/lang/String;
+    move-result-object p1
+    const-string v5, "series_index"
+    invoke-virtual {v4, v5, p1}, Landroid/content/ContentValues;->put(Ljava/lang/String;Ljava/lang/String;)V
+
     const-string p1, "cover_bg"
 
     if-eqz v1, :cond_0
--- a/smali/com/faultexception/reader/model/ProManager.smali
+++ b/smali/com/faultexception/reader/model/ProManager.smali
@@ -65,10 +65,8 @@
     const-string v3, "com.faultexception.reader.pro"
 
     .line 47
-    invoke-virtual {v1, v2, v3}, Landroid/content/pm/PackageManager;->checkSignatures(Ljava/lang/String;Ljava/lang/String;)I
+    const/4 v2, 0x0
 
-    move-result v2
-
     const/4 v4, 0x0
 
     if-eqz v2, :cond_1
--- a/smali/com/faultexception/reader/SettingsActivity$PreferencesFragment.smali
+++ b/smali/com/faultexception/reader/SettingsActivity$PreferencesFragment.smali
@@ -289,6 +289,16 @@
     return p1
 .end method
 
+.method private static addPatched(Ljava/lang/String;)Ljava/lang/String;
+    .locals 1
+
+    const-string v0, " (Patched)"
+    invoke-virtual {p0, v0}, Ljava/lang/String;->concat(Ljava/lang/String;)Ljava/lang/String;
+    move-result-object p0
+
+    return-object p0
+.end method
+
 .method public onCreatePreferences(Landroid/os/Bundle;Ljava/lang/String;)V
     .locals 2
 
@@ -377,6 +387,9 @@
     :cond_0
     iget-object v0, p0, Lcom/faultexception/reader/SettingsActivity$PreferencesFragment;->mBuildVersionPref:Landroidx/preference/Preference;
 
+    invoke-static {p2}, Lcom/faultexception/reader/SettingsActivity$PreferencesFragment;->addPatched(Ljava/lang/String;)Ljava/lang/String;
+    move-result-object p2
+
     invoke-virtual {v0, p2}, Landroidx/preference/Preference;->setSummary(Ljava/lang/CharSequence;)V
 
     :cond_1
